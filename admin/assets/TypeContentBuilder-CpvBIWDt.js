var qt=Object.defineProperty;var At=(t,e,n)=>e in t?qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ve=(t,e,n)=>(At(t,typeof e!="symbol"?e+"":e,n),n);import{S as ye,i as Ce,s as pe,ab as Ht,z as j,C as A,v as C,X as tn,b as R,w as K,E as ne,M as De,Q as He,a as p,g as Y,t as y,c as Q,d as T,r as on,T as Ue,o as H,D as F,p as V,q as P,I as ht,J as ln,U as X,e as oe,A as bt,W as ue,$ as Be,a0 as Me,K as hn,N as bn,O as mn,P as gn,n as $,a4 as Oe,B as Ae,k as Je,l as Xe,a6 as ie,H as Re,m as Bn,h as En,a5 as Vt,a9 as Pt,Z as In}from"./index-78E-VoOI.js";import{c as je}from"./index-CFThmAmn.js";import{Q as Jt,T as _n,t as te,U as pn,V as Sn,e as Ge,W as mt,I as Le,X as Ye,Y as Wt,Z as Ft,a as gt,_ as Zt,$ as On,a0 as Gt,N as sn,a1 as pt,a2 as kn,B as Pe,E as Rn,G as Tn,a3 as rn,a4 as Ut,a5 as un,a6 as Xt,d as Ln,f as Yt}from"./App-BFKXIU13.js";import{i as Qt}from"./iconFeatherTrash2-pC5ltAhM.js";function Mn(t){let e,n,l;return n=new pn({props:{thc:t[2],forceAsHtml:!0}}),{c(){e=j("label"),H(n.$$.fragment),C(e,"for",t[16]),C(e,"class",t[12]),F(e,"cursor-pointer",!t[6]),F(e,"cursor-not-allowed",t[6])},m(i,s){R(i,e,s),V(n,e,null),l=!0},p(i,s){const o={};s[0]&4&&(o.thc=i[2]),n.$set(o),(!l||s[0]&4096)&&C(e,"class",i[12]),(!l||s[0]&4160)&&F(e,"cursor-pointer",!i[6]),(!l||s[0]&4160)&&F(e,"cursor-not-allowed",i[6])},i(i){l||(p(n.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),l=!1},d(i){i&&T(e),P(n)}}}function Dn(t){let e,n=t[9].message+"",l,i;return{c(){e=j("div"),C(e,"class",t[11])},m(s,o){R(s,e,o),e.innerHTML=n,i=!0},p(s,o){(!i||o[0]&512)&&n!==(n=s[9].message+"")&&(e.innerHTML=n),(!i||o[0]&2048)&&C(e,"class",s[11])},i(s){i||(s&&ht(()=>{i&&(l||(l=ln(e,Sn,{duration:150},!0)),l.run(1))}),i=!0)},o(s){s&&(l||(l=ln(e,Sn,{duration:150},!1)),l.run(0)),i=!1},d(s){s&&T(e),s&&l&&l.end()}}}function jn(t){let e,n,l,i,s;return n=new pn({props:{thc:t[4],forceAsHtml:!0}}),{c(){e=j("div"),H(n.$$.fragment),C(e,"class",t[10]),F(e,"cursor-pointer",!t[6]),F(e,"cursor-not-allowed",t[6])},m(o,a){R(o,e,a),V(n,e,null),l=!0,i||(s=ne(e,"click",t[36]),i=!0)},p(o,a){const r={};a[0]&16&&(r.thc=o[4]),n.$set(r),(!l||a[0]&1024)&&C(e,"class",o[10]),(!l||a[0]&1088)&&F(e,"cursor-pointer",!o[6]),(!l||a[0]&1088)&&F(e,"cursor-not-allowed",o[6])},i(o){l||(p(n.$$.fragment,o),l=!0)},o(o){y(n.$$.fragment,o),l=!1},d(o){o&&T(e),P(n),i=!1,s()}}}function $t(t){var E;let e,n,l,i=!1,s,o,a,r,u,f,c,k,d,g,h=t[2]&&Mn(t),b=t[9]&&!((E=t[9])!=null&&E.valid)&&Dn(t),_=t[4]&&jn(t);return k=Ht(t[35][0]),{c(){e=j("div"),n=j("div"),l=j("input"),a=A(),r=j("div"),h&&h.c(),u=A(),b&&b.c(),f=A(),_&&_.c(),C(l,"id",t[16]),C(l,"type","radio"),l.__value=t[1],tn(l,l.__value),C(l,"aria-describedby",s=t[4]?t[17]:void 0),C(l,"name",t[3]),C(l,"class",t[13]),l.disabled=t[6],l.required=t[7],C(l,"tabindex",t[5]),C(n,"class","flex h-6 items-center ml-1"),C(r,"class","ml-3 w-full"),C(e,"class",t[14]),k.p(l)},m(v,S){R(v,e,S),K(e,n),K(n,l),l.checked=l.__value===t[0],K(e,a),K(e,r),h&&h.m(r,null),K(r,u),b&&b.m(r,null),K(r,f),_&&_.m(r,null),c=!0,d||(g=[ne(l,"change",t[34]),De(o=Jt.call(null,l,t[8]?{...t[8]===!0?{}:t[8],setValidationResult:t[15]}:void 0)),ne(l,"blur",t[21]),ne(l,"change",t[22]),ne(l,"click",t[23]),ne(l,"focus",t[24]),ne(l,"input",t[25]),ne(l,"keydown",t[26]),ne(l,"keyup",t[27]),ne(l,"touchstart",t[28],{passive:!0}),ne(l,"touchend",t[29],{passive:!0}),ne(l,"touchmove",t[30],{passive:!0}),ne(l,"touchcancel",t[31]),ne(l,"mouseenter",t[32]),ne(l,"mouseleave",t[33])],d=!0)},p(v,S){var O;(!c||S[0]&2)&&(l.__value=v[1],tn(l,l.__value),i=!0),(!c||S[0]&16&&s!==(s=v[4]?v[17]:void 0))&&C(l,"aria-describedby",s),(!c||S[0]&8)&&C(l,"name",v[3]),(!c||S[0]&8192)&&C(l,"class",v[13]),(!c||S[0]&64)&&(l.disabled=v[6]),(!c||S[0]&128)&&(l.required=v[7]),(!c||S[0]&32)&&C(l,"tabindex",v[5]),(i||S[0]&1)&&(l.checked=l.__value===v[0]),o&&He(o.update)&&S[0]&256&&o.update.call(null,v[8]?{...v[8]===!0?{}:v[8],setValidationResult:v[15]}:void 0),v[2]?h?(h.p(v,S),S[0]&4&&p(h,1)):(h=Mn(v),h.c(),p(h,1),h.m(r,u)):h&&(Y(),y(h,1,1,()=>{h=null}),Q()),v[9]&&!((O=v[9])!=null&&O.valid)?b?(b.p(v,S),S[0]&512&&p(b,1)):(b=Dn(v),b.c(),p(b,1),b.m(r,f)):b&&(Y(),y(b,1,1,()=>{b=null}),Q()),v[4]?_?(_.p(v,S),S[0]&16&&p(_,1)):(_=jn(v),_.c(),p(_,1),_.m(r,null)):_&&(Y(),y(_,1,1,()=>{_=null}),Q()),(!c||S[0]&16384)&&C(e,"class",v[14])},i(v){c||(p(h),p(b),p(_),c=!0)},o(v){y(h),y(b),y(_),c=!1},d(v){v&&T(e),h&&h.d(),b&&b.d(),_&&_.d(),k.r(),d=!1,on(g)}}}const fn={box:"flex items-start",label:"block w-full",input:`
			size-4 rounded-full
			bg-gray-100
			border-gray-300
			shadow-sm
			text-stuic-primary
			cursor-pointer
			focus:border-stuic-primary
			focus:ring-4
			focus:ring-offset-0
			focus:ring-stuic-primary
			focus:ring-opacity-20
			disabled:cursor-not-allowed
		`,validationMessage:"text-xs text-stuic-primary tracking-tight",description:"text-sm opacity-50"},dn={sm:{label:"text-sm"},md:{label:"text-base"},lg:{label:"text-base font-bold"}};function xt(t,e,n){let l,i,s,o,a;const r=Ue();let{class:u={}}=e,{classBySize:f={}}=e,{size:c="md"}=e,{value:k}=e,{group:d}=e,{label:g}=e,{name:h}=e,{description:b=""}=e,{tabindex:_=0}=e,{disabled:E=!1}=e,{required:v=!1}=e,{validate:S=void 0}=e,O;const q=N=>{n(9,O=N),r("validation",O)};let G=_n(),x=_n();const L=(N,Ee="")=>{var Ne,Ie,Se,ce,me;return[(fn==null?void 0:fn[N])||"",((Ne=dn==null?void 0:dn[c])==null?void 0:Ne[N])||"",((Ie=qe==null?void 0:qe.class)==null?void 0:Ie[N])||"",((ce=(Se=qe==null?void 0:qe.classBySize)==null?void 0:Se[c])==null?void 0:ce[N])||"",Ee||"",(u==null?void 0:u[N])||"",((me=f==null?void 0:f[c])==null?void 0:me[N])||""]},M=[[]];function B(N){X.call(this,t,N)}function se(N){X.call(this,t,N)}function I(N){X.call(this,t,N)}function D(N){X.call(this,t,N)}function le(N){X.call(this,t,N)}function J(N){X.call(this,t,N)}function fe(N){X.call(this,t,N)}function ke(N){X.call(this,t,N)}function be(N){X.call(this,t,N)}function Z(N){X.call(this,t,N)}function w(N){X.call(this,t,N)}function W(N){X.call(this,t,N)}function ae(N){X.call(this,t,N)}function ee(){d=this.__value,n(0,d)}const z=()=>!E&&n(0,d=k);return t.$$set=N=>{"class"in N&&n(18,u=N.class),"classBySize"in N&&n(19,f=N.classBySize),"size"in N&&n(20,c=N.size),"value"in N&&n(1,k=N.value),"group"in N&&n(0,d=N.group),"label"in N&&n(2,g=N.label),"name"in N&&n(3,h=N.name),"description"in N&&n(4,b=N.description),"tabindex"in N&&n(5,_=N.tabindex),"disabled"in N&&n(6,E=N.disabled),"required"in N&&n(7,v=N.required),"validate"in N&&n(8,S=N.validate)},t.$$.update=()=>{t.$$.dirty[0]&512&&n(13,i=te(L("input",O&&!O.valid?L("invalid").join(" "):"")))},n(14,l=te(L("box"))),n(12,s=te(L("label"))),n(11,o=te(L("validationMessage"))),n(10,a=te(L("description"))),[d,k,g,h,b,_,E,v,S,O,a,o,s,i,l,q,G,x,u,f,c,B,se,I,D,le,J,fe,ke,be,Z,w,W,ae,ee,M,z]}class el extends ye{constructor(e){super(),Ce(this,e,xt,$t,pe,{class:18,classBySize:19,size:20,value:1,group:0,label:2,name:3,description:4,tabindex:5,disabled:6,required:7,validate:8},null,[-1,-1])}}function Kn(t,e,n){const l=t.slice();return l[25]=e[n],l[27]=n,l}function qn(t){let e,n,l,i=Ge(t[9]),s=[];for(let a=0;a<i.length;a+=1)s[a]=An(Kn(t,i,a));const o=a=>y(s[a],1,1,()=>{s[a]=null});return{c(){e=j("div");for(let a=0;a<s.length;a+=1)s[a].c();C(e,"class",n=te(`gap-y-2 grid ${t[0].group||""}`))},m(a,r){R(a,e,r);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);l=!0},p(a,r){if(r&1015){i=Ge(a[9]);let u;for(u=0;u<i.length;u+=1){const f=Kn(a,i,u);s[u]?(s[u].p(f,r),p(s[u],1)):(s[u]=An(f),s[u].c(),p(s[u],1),s[u].m(e,null))}for(Y(),u=i.length;u<s.length;u+=1)o(u);Q()}(!l||r&1&&n!==(n=te(`gap-y-2 grid ${a[0].group||""}`)))&&C(e,"class",n)},i(a){if(!l){for(let r=0;r<i.length;r+=1)p(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)y(s[r]);l=!1},d(a){a&&T(e),bt(s,a)}}}function An(t){let e,n,l;function i(o){t[10](o)}let s={name:t[1],label:t[25].label,value:t[25].value||t[25].label,description:t[25].description,class:t[0],classBySize:t[4],disabled:t[6],tabindex:t[8],required:t[7],size:t[5]};return t[2]!==void 0&&(s.group=t[2]),e=new el({props:s}),ue.push(()=>Be(e,"group",i)),e.$on("blur",t[11]),e.$on("change",t[12]),e.$on("click",t[13]),e.$on("focus",t[14]),e.$on("input",t[15]),e.$on("keydown",t[16]),e.$on("keyup",t[17]),e.$on("touchstart",t[18]),e.$on("touchend",t[19]),e.$on("touchmove",t[20]),e.$on("touchcancel",t[21]),e.$on("mouseenter",t[22]),e.$on("mouseleave",t[23]),{c(){H(e.$$.fragment)},m(o,a){V(e,o,a),l=!0},p(o,a){const r={};a&2&&(r.name=o[1]),a&512&&(r.label=o[25].label),a&512&&(r.value=o[25].value||o[25].label),a&512&&(r.description=o[25].description),a&1&&(r.class=o[0]),a&16&&(r.classBySize=o[4]),a&64&&(r.disabled=o[6]),a&256&&(r.tabindex=o[8]),a&128&&(r.required=o[7]),a&32&&(r.size=o[5]),!n&&a&4&&(n=!0,r.group=o[2],Me(()=>n=!1)),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){P(e,o)}}}function nl(t){let e,n,l=t[3].length&&qn(t);return{c(){l&&l.c(),e=oe()},m(i,s){l&&l.m(i,s),R(i,e,s),n=!0},p(i,[s]){i[3].length?l?(l.p(i,s),s&8&&p(l,1)):(l=qn(i),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(Y(),y(l,1,1,()=>{l=null}),Q())},i(i){n||(p(l),n=!0)},o(i){y(l),n=!1},d(i){i&&T(e),l&&l.d(i)}}}const xe=()=>({group:"",box:"",label:"",input:"",invalid:"",validationMessage:"",description:""});class qe{}ve(qe,"class",xe()),ve(qe,"classBySize",{sm:xe(),md:xe(),lg:xe()});function tl(t,e,n){je("FieldRadio");let{options:l=[]}=e,{class:i={}}=e,{classBySize:s={}}=e,{size:o="md"}=e,{name:a=""}=e,{value:r}=e,{disabled:u=!1}=e,{required:f=!1}=e,{tabindex:c=0}=e,k=[];function d(B){r=B,n(2,r)}function g(B){X.call(this,t,B)}function h(B){X.call(this,t,B)}function b(B){X.call(this,t,B)}function _(B){X.call(this,t,B)}function E(B){X.call(this,t,B)}function v(B){X.call(this,t,B)}function S(B){X.call(this,t,B)}function O(B){X.call(this,t,B)}function q(B){X.call(this,t,B)}function G(B){X.call(this,t,B)}function x(B){X.call(this,t,B)}function L(B){X.call(this,t,B)}function M(B){X.call(this,t,B)}return t.$$set=B=>{"options"in B&&n(3,l=B.options),"class"in B&&n(0,i=B.class),"classBySize"in B&&n(4,s=B.classBySize),"size"in B&&n(5,o=B.size),"name"in B&&n(1,a=B.name),"value"in B&&n(2,r=B.value),"disabled"in B&&n(6,u=B.disabled),"required"in B&&n(7,f=B.required),"tabindex"in B&&n(8,c=B.tabindex)},t.$$.update=()=>{t.$$.dirty&1&&typeof i=="string"&&n(0,i={group:i}),t.$$.dirty&8&&n(9,k=l.map(B=>(typeof B=="string"&&(B={label:B}),B))),t.$$.dirty&2&&n(1,a||(a=_n()))},[i,a,r,l,s,o,u,f,c,k,d,g,h,b,_,E,v,S,O,q,G,x,L,M]}class ll extends ye{constructor(e){super(),Ce(this,e,tl,nl,pe,{options:3,class:0,classBySize:4,size:5,name:1,value:2,disabled:6,required:7,tabindex:8})}}function Hn(t){let e,n,l;return n=new pn({props:{thc:t[0],forceAsHtml:!0}}),{c(){e=j("legend"),H(n.$$.fragment),C(e,"class",te(t[1]("legend")))},m(i,s){R(i,e,s),V(n,e,null),l=!0},p(i,s){const o={};s&1&&(o.thc=i[0]),n.$set(o)},i(i){l||(p(n.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),l=!1},d(i){i&&T(e),P(n)}}}function il(t){let e,n,l,i=t[0]&&Hn(t);const s=t[4].default,o=hn(s,t,t[3],null);return{c(){e=j("fieldset"),i&&i.c(),n=A(),o&&o.c(),C(e,"class",te(t[1]("box")))},m(a,r){R(a,e,r),i&&i.m(e,null),K(e,n),o&&o.m(e,null),l=!0},p(a,[r]){a[0]?i?(i.p(a,r),r&1&&p(i,1)):(i=Hn(a),i.c(),p(i,1),i.m(e,n)):i&&(Y(),y(i,1,1,()=>{i=null}),Q()),o&&o.p&&(!l||r&8)&&bn(o,s,a,a[3],l?gn(s,a[3],r,null):mn(a[3]),null)},i(a){l||(p(i),p(o,a),l=!0)},o(a){y(i),y(o,a),l=!1},d(a){a&&T(e),i&&i.d(),o&&o.d(a)}}}const cn={box:"border border-gray-200 p-4 pt-3 rounded-md",legend:"px-2"};class en{}ve(en,"class",{});function sl(t,e,n){let{$$slots:l={},$$scope:i}=e,{class:s={}}=e,{legend:o=""}=e;const a=(r,u="")=>{var f;return[(cn==null?void 0:cn[r])||"",((f=en==null?void 0:en.class)==null?void 0:f[r])||"",(s==null?void 0:s[r])||""]};return t.$$set=r=>{"class"in r&&n(2,s=r.class),"legend"in r&&n(0,o=r.legend),"$$scope"in r&&n(3,i=r.$$scope)},[o,a,s,i,l]}class ol extends ye{constructor(e){super(),Ce(this,e,sl,il,pe,{class:2,legend:0})}}const al=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||16}" height="${e||16}" ${s?`${s} `:""}fill="currentColor" viewBox="0 0 16 16"><path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>`},rl=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||24}" height="${e||24}" stroke-width="${i??2}" ${s?`${s} `:""}viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`},ul=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||24}" height="${e||24}" stroke-width="${i??2}" ${s?`${s} `:""}viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>`},kt=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||24}" height="${e||24}" stroke-width="${i??2}" ${s?`${s} `:""}viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>`},we=class we{constructor(e,n=null,l=null){ve(this,"value");ve(this,"_parent");ve(this,"tree");ve(this,"_key");ve(this,"_children",[]);ve(this,"_readonly",!1);this.value=e,this._parent=n,this.tree=l,this._key=we.createKey()}__setKey(e){return this._key=e,this}__setParent(e){return this._parent=e,this}__setTree(e){return this.tree=e,this}__setReadonly(e=!0){return this._readonly=e,this}__syncChildren(){const e=(n,l)=>{for(let i of n)i.__setParent(l).__setTree((l==null?void 0:l.tree)||null).__setReadonly(l==null?void 0:l.readonly),e(i.children,i)};return e(this._children,this)}get depth(){return this.path.length}get readonly(){return this._readonly}get root(){let e=this._parent,n=e;for(;e;)e=e.parent,e&&(n=e);return n}get path(){let e=this._parent,n=[];for(e&&n.push(e);e;)e=e.parent,e&&n.unshift(e);return n}get key(){return this._key}get parent(){return this._parent}get children(){return this._children}get isLeaf(){return this._children.length===0}get isRoot(){return this._parent===null}get siblings(){var e;return((e=this._parent)==null?void 0:e.children)||[]}get siblingIndex(){return this.siblings.length?this.siblings.findIndex(e=>e.key===this._key):-1}_assertNotReadonly(){if(this._readonly)throw new Error("Cannot proceed because the node is marked as readonly")}_assertSameTopRootNode(e){if(!this.isRoot&&e instanceof we&&e.root!==this.root)throw new Error("Cannot proceed with a node from a different tree. (Use node's value instead.)")}_assertNotContains(e){if(e instanceof we&&this.contains(e.key))throw new Error("Cannot proceed, already contains.")}_assertIsNotSiblingOf(e){if(e instanceof we&&this.siblings.some(n=>n.key===e.key))throw new Error("Cannot proceed (is sibling of).")}toJSON(){return{key:this._key,value:this.value,children:this._children}}deepClone(){const e=JSON.parse(JSON.stringify(this.toJSON(),(i,s)=>i==="key"?we.createKey():s)),n=new we(e.value,this._parent);n.__setKey(e.key);const l=(i,s)=>{for(let o of i){const a=s.appendChild(o.value).__setKey(o.key);l(o.children,a)}};return l(e.children,n),n}appendChild(e,n=!0){this._assertNotReadonly(),this._assertSameTopRootNode(e),this._assertIsNotSiblingOf(e);const l=e instanceof we?e:new we(e,this);return l.__setParent(this),this._children.push(l),n&&this.__syncChildren(),l}removeChild(e){this._assertNotReadonly();const n=this._children.findIndex(l=>l.key===e);if(n<0)throw new Error(`Node "${e}" not found.`);return this._children.splice(n,1),this}replaceChild(e,n){this._assertNotReadonly(),this._assertSameTopRootNode(n);const l=this._children.findIndex(s=>s.key===e);if(l<0)throw new Error(`Node "${e}" not found.`);this._assertNotContains(n);const i=n instanceof we?n:new we(n,this);return i.__setParent(this),this._children[l]=i,this.__syncChildren(),this._children[l]}resetChildren(e=[]){return this._assertNotReadonly(),this._children=[],(e||[]).forEach(n=>this.appendChild(n,!1)),this.__syncChildren(),this}previousSibling(){if(this.siblings.length){const e=this.siblings.findIndex(n=>n.key===this._key);return this.siblings[e-1]||null}return null}nextSibling(){if(this.siblings.length){const e=this.siblings.findIndex(n=>n.key===this._key);return this.siblings[e+1]||null}return null}moveSiblingIndex(e){this._assertNotReadonly();const n=this.siblingIndex;return this.siblings.length<2||((e=Math.min(e,this.siblings.length-1))<0&&(e=Math.max(0,this.siblings.length-1+e)),this.siblings.splice(e,0,this.siblings.splice(n,1)[0])),this}contains(e){if(!e)throw new Error("Missing key");const n=l=>{for(let i of l)if(i.key===e||n(i.children))return!0;return!1};return n(this._children)}toString(){var n;let e=(n=this.value)==null?void 0:n.toString();return e==="[object Object]"&&(e=this.key),"    ".repeat(this.depth)+e}};ve(we,"createKey",()=>"n"+Math.random().toString(36).slice(2,10));let Ze=we;class We{constructor(e=null,n=!1){ve(this,"_root");ve(this,"_readonly");this._root=e,this._readonly=n,this._root&&this._root.__setTree(this).__setReadonly(this._readonly).__syncChildren()}get readonly(){return this._readonly}__setReadonly(e=!0){return this._readonly=!!e,this._root&&this._root.__setReadonly(this._readonly).__syncChildren(),this}static factory(e,n=!1){return new We(null,n).restore(e)}appendChild(e){return this._root?this._root.appendChild(e).__setReadonly(this._readonly):(this._root=e instanceof Ze?e:new Ze(e),this._root.__setTree(this).__syncChildren(),this._root)}get root(){return this._root}*preOrderTraversal(e){if(e??(e=this._root),yield e,e==null?void 0:e.children.length)for(let n of e.children)yield*this.preOrderTraversal(n)}*postOrderTraversal(e){if(e??(e=this._root),e==null?void 0:e.children.length)for(let n of e.children)yield*this.postOrderTraversal(n);yield e}find(e){for(let n of this.preOrderTraversal())if(n.key===e)return n;return null}findBy(e,n=null){for(let l of this.preOrderTraversal())if(n&&l.value[n]!==void 0&&l.value[n]===e||!n&&l.value===e)return l;return null}findLCA(e,n){const l=this.find(e),i=this.find(n);if(!l||!i)throw new Error(`Node "${e}" and/or "${n}" not found.`);if(l===i)return l;const s=l.path.reduce((a,r)=>({...a,[r.key]:r}),{});let o=this._root;for(let a of i.path){if(!s[a.key])return o;o=s[a.key]}return o}insert(e,n){const l=this.find(e);if(l)return l.appendChild(n).__setReadonly(this._readonly);throw new Error(`Node "${e}" not found.`)}remove(e){var n;if(((n=this._root)==null?void 0:n.key)===e)return this._root=null,this;for(let l of this.preOrderTraversal())if(l.key===e&&l.parent.removeChild(e))return this;throw new Error(`Node "${e}" not found.`)}_moveOrCopy(e,n,l){const i=this.find(e);if(!i)throw new Error(`Source node "${e}" not found.`);if(l&&i.contains(n))throw new Error("Recursive reference detected. Node cannot be moved to its own descendant.");const s=this.find(n);if(!s)throw new Error(`Target node "${n}" not found.`);if(l&&s===i)throw new Error("Cannot move to self.");return l&&s===i.parent?i:l?(this.remove(i.key),s.appendChild(i).__setReadonly(this._readonly)):s.appendChild(i.deepClone()).__setReadonly(this._readonly)}move(e,n){return this._moveOrCopy(e,n,!0)}copy(e,n){return this._moveOrCopy(e,n,!1)}toJSON(){var e;return(e=this._root)==null?void 0:e.toJSON()}dump(){return JSON.stringify(this)}restore(e){let n=e;typeof e=="string"&&(n=JSON.parse(e));const l=(s,o)=>{for(let a of s){const r=o.appendChild(a.value,!1).__setTree(this).__setKey(a.key);l(a.children,r)}},i=new Ze(n.value).__setTree(this).__setKey(n.key);return l(n.children,i),this._readonly&&[...this.postOrderTraversal()].map(s=>s==null?void 0:s.__setReadonly(this._readonly)),this._root=i,this}size(e){if(e??(e=this._root),!e)return 0;const n=[...this.preOrderTraversal(e)].length;return e===this._root||n!==1||this.contains(e==null?void 0:e.key)?n:0}contains(e){var n;return!!((n=this._root)!=null&&n.contains(e))}toString(){return[...this.preOrderTraversal()].map(e=>e==null?void 0:e.toString()).join(`
`)}}const fl=t=>`${t}`.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),vt=(t,e,n=!1)=>{n&&(e=Object.entries(e).reduce((s,[o,a])=>({...s,[o.toLowerCase()]:a}),{}));let l=[];Object.keys(e).forEach(s=>l.push(fl(s)));let i=new RegExp(l.join("|"),"g"+(n?"i":""));return t.replace(i,s=>{n&&(s=s.toLowerCase());let o=typeof e[s]=="function"?e[s]():e[s];return o??""})};function Vn(t){let e,n,l,i;return{c(){e=j("div"),C(e,"class","transition-all rounded"),F(e,"bg-black",t[5]===t[1]),F(e,"h-2",t[5]!==t[1]&&t[0]===-1),F(e,"h-3",t[5]!==t[1]&&t[0]!==-1),F(e,"h-8",t[5]===t[1])},m(s,o){R(s,e,o),l||(i=De(n=mt.call(null,e,{enabled:!t[3],id:t[1],dropEffect:"move",onDrop:t[9],isDraggedOver:t[7]})),l=!0)},p(s,o){n&&He(n.update)&&o&31&&n.update.call(null,{enabled:!s[3],id:s[1],dropEffect:"move",onDrop:s[9],isDraggedOver:s[7]}),o&34&&F(e,"bg-black",s[5]===s[1]),o&35&&F(e,"h-2",s[5]!==s[1]&&s[0]===-1),o&35&&F(e,"h-3",s[5]!==s[1]&&s[0]!==-1),o&34&&F(e,"h-8",s[5]===s[1])},d(s){s&&T(e),l=!1,i()}}}function dl(t){let e,n=t[1]&&Vn(t);return{c(){n&&n.c(),e=oe()},m(l,i){n&&n.m(l,i),R(l,e,i)},p(l,[i]){l[1]?n?n.p(l,i):(n=Vn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:$,o:$,d(l){l&&T(e),n&&n.d(l)}}}function cl(t,e,n){let l,i=$,s=()=>(i(),i=Ae(f,h=>n(4,l=h)),f),o;t.$$.on_destroy.push(()=>i());const a=Ue();je("Dropzone");let{index:r=0}=e,{id:u=""}=e,{store:f}=e;s();let{disabled:c=!1}=e;const k=Le(null);Oe(t,k,h=>n(5,o=h));const d=new We,g=(h,b)=>{var q;const _=(q=h.payload)==null?void 0:q.source,E=u;let v=r;d.restore(l.data);const S=d.find(_),O=d.find(E);(S==null?void 0:S.parent)===O?v===-1?v=0:(S==null?void 0:S.siblingIndex)>v&&v++:v++,f.move(_,E,v),a("dropped")};return t.$$set=h=>{"index"in h&&n(0,r=h.index),"id"in h&&n(1,u=h.id),"store"in h&&s(n(2,f=h.store)),"disabled"in h&&n(3,c=h.disabled)},[r,u,f,c,l,o,a,k,d,g]}class wt extends ye{constructor(e){super(),Ce(this,e,cl,dl,pe,{index:0,id:1,store:2,disabled:3})}}function Pn(t){let e,n;return{c(){e=j("span"),n=Je(t[1]),C(e,"class","text-xs font-mono opacity-50 mr-2")},m(l,i){R(l,e,i),K(e,n)},p(l,i){i&2&&Xe(n,l[1])},d(l){l&&T(e)}}}function _l(t){let e,n,l,i,s,o,a,r=t[0].type+"",u,f,c,k,d=t[4]&&Pn(t);return{c(){e=j("div"),n=j("div"),l=j("input"),i=A(),d&&d.c(),s=A(),o=j("button"),a=j("span"),u=Je(r),C(l,"type","text"),C(l,"class","w-full bg-transparent focus:outline-none focus:bg-gray-100 hover:bg-gray-50 focus:border-none focus:ring-0 border-none p-0 text-base ring-0 "),l.disabled=t[2],F(l,"cursor-not-allowed",t[2]),C(n,"class","flex-1 pr-2"),C(a,"class","opacity-75"),C(o,"class","text-xs font-mono rounded-full p-1 px-2 bg-gray-100 "),C(o,"type","button"),C(o,"aria-label",f=t[3]("node_edit_drag")),C(e,"class","flex items-center")},m(g,h){R(g,e,h),K(e,n),K(n,l),t[9](l),tn(l,t[0].label),K(e,i),d&&d.m(e,null),K(e,s),K(e,o),K(o,a),K(a,u),c||(k=[ne(l,"input",t[10]),ne(l,"blur",t[7]),ne(l,"keydown",t[11]),ne(o,"click",t[12])],c=!0)},p(g,[h]){h&4&&(l.disabled=g[2]),h&1&&l.value!==g[0].label&&tn(l,g[0].label),h&4&&F(l,"cursor-not-allowed",g[2]),g[4]?d?d.p(g,h):(d=Pn(g),d.c(),d.m(e,s)):d&&(d.d(1),d=null),h&1&&r!==(r=g[0].type+"")&&Xe(u,r),h&8&&f!==(f=g[3]("node_edit_drag"))&&C(o,"aria-label",f)},i:$,o:$,d(g){g&&T(e),t[9](null),d&&d.d(),c=!1,on(k)}}}function hl(t,e,n){je("ContentNodeValue");let{value:l}=e,{key:i}=e,{store:s}=e,{disabled:o=!1}=e,{t:a}=e,{showNodeId:r=!1}=e,{onNodeEditRequest:u}=e,f,c=l.label;const k=_=>{c!==l.label&&(s.save(),c=l.label)};function d(_){ue[_?"unshift":"push"](()=>{f=_,n(6,f)})}function g(){l.label=this.value,n(0,l)}const h=_=>{_.key==="Enter"&&(f.blur(),k())},b=async()=>u(i,l);return t.$$set=_=>{"value"in _&&n(0,l=_.value),"key"in _&&n(1,i=_.key),"store"in _&&n(8,s=_.store),"disabled"in _&&n(2,o=_.disabled),"t"in _&&n(3,a=_.t),"showNodeId"in _&&n(4,r=_.showNodeId),"onNodeEditRequest"in _&&n(5,u=_.onNodeEditRequest)},[l,i,o,a,r,u,f,k,s,d,g,h,b]}class bl extends ye{constructor(e){super(),Ce(this,e,hl,_l,pe,{value:0,key:1,store:8,disabled:2,t:3,showNodeId:4,onNodeEditRequest:5})}}function ml(t){let e,n,l,i,s;const o=t[5].default,a=hn(o,t,t[4],null);return{c(){var r,u;e=j("button"),a&&a.c(),C(e,"class",n=te(`
        px-3 py-2 
        opacity-80
        text-white
        hover:underline hover:opacity-100 hover:bg-gray-700 
        ${((u=(r=t[2])==null?void 0:r.hover_control)==null?void 0:u.button)||""}
        ${t[0]}
    `)),C(e,"aria-label",t[1]),e.disabled=t[3],C(e,"type","button")},m(r,u){R(r,e,u),a&&a.m(e,null),l=!0,i||(s=[ne(e,"click",t[6]),De(Ye.call(null,e))],i=!0)},p(r,[u]){var f,c;a&&a.p&&(!l||u&16)&&bn(a,o,r,r[4],l?gn(o,r[4],u,null):mn(r[4]),null),(!l||u&5&&n!==(n=te(`
        px-3 py-2 
        opacity-80
        text-white
        hover:underline hover:opacity-100 hover:bg-gray-700 
        ${((c=(f=r[2])==null?void 0:f.hover_control)==null?void 0:c.button)||""}
        ${r[0]}
    `)))&&C(e,"class",n),(!l||u&2)&&C(e,"aria-label",r[1]),(!l||u&8)&&(e.disabled=r[3])},i(r){l||(p(a,r),l=!0)},o(r){y(a,r),l=!1},d(r){r&&T(e),a&&a.d(r),i=!1,on(s)}}}function gl(t,e,n){let{$$slots:l={},$$scope:i}=e,{class:s=""}=e,{ariaLabel:o=""}=e,{theme:a}=e,{disabled:r=!1}=e;function u(f){X.call(this,t,f)}return t.$$set=f=>{"class"in f&&n(0,s=f.class),"ariaLabel"in f&&n(1,o=f.ariaLabel),"theme"in f&&n(2,a=f.theme),"disabled"in f&&n(3,r=f.disabled),"$$scope"in f&&n(4,i=f.$$scope)},[s,o,a,r,i,l,u]}class nn extends ye{constructor(e){super(),Ce(this,e,gl,ml,pe,{class:0,ariaLabel:1,theme:2,disabled:3})}}function Jn(t){let e,n=JSON.stringify({dropzoneEnabled:t[1]})+"",l;return{c(){e=j("div"),l=Je(n),C(e,"class","text-xs font-mono bg-pink-100 text-pink-800/70 p-1")},m(i,s){R(i,e,s),K(e,l)},p(i,s){s&2&&n!==(n=JSON.stringify({dropzoneEnabled:i[1]})+"")&&Xe(l,n)},d(i){i&&T(e)}}}function pl(t){let e,n=t[0]&&Jn(t);return{c(){n&&n.c(),e=oe()},m(l,i){n&&n.m(l,i),R(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=Jn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:$,o:$,d(l){l&&T(e),n&&n.d(l)}}}function kl(t,e,n){let{debug:l=!1}=e,{node:i}=e,{dropzoneEnabled:s=void 0}=e;return t.$$set=o=>{"debug"in o&&n(0,l=o.debug),"node"in o&&n(2,i=o.node),"dropzoneEnabled"in o&&n(1,s=o.dropzoneEnabled)},[l,s,i]}class yt extends ye{constructor(e){super(),Ce(this,e,kl,pl,pe,{debug:0,node:2,dropzoneEnabled:1})}}function Wn(t,e,n){const l=t.slice();l[36]=e[n],l[40]=n;const i=l[36].key;l[37]=i;const s=!l[5]&&l[11].at(-1)===l[36].key;return l[38]=s,l}function Fn(t){var a;let e,n=[],l=new Map,i,s=Ge(((a=t[0])==null?void 0:a.children)||[]);const o=r=>r[36].key;for(let r=0;r<s.length;r+=1){let u=Wn(t,s,r),f=o(u);l.set(f,n[r]=Yn(f,u))}return{c(){e=j("ol");for(let r=0;r<n.length;r+=1)n[r].c();C(e,"class","w-full"),F(e,"opacity-50",t[5]),F(e,"cursor-not-allowed",t[5])},m(r,u){R(r,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);i=!0},p(r,u){var f;u[0]&8126463&&(s=Ge(((f=r[0])==null?void 0:f.children)||[]),Y(),n=Wt(n,u,o,1,r,s,l,e,Zt,Yn,null,Wn),Q()),(!i||u[0]&32)&&F(e,"opacity-50",r[5]),(!i||u[0]&32)&&F(e,"cursor-not-allowed",r[5])},i(r){if(!i){for(let u=0;u<s.length;u+=1)p(n[u]);i=!0}},o(r){for(let u=0;u<n.length;u+=1)y(n[u]);i=!1},d(r){r&&T(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Zn(t){var o;let e,n,l,i,s;return n=new yt({props:{node:t[0],debug:t[10],dropzoneEnabled:t[22](t[0])}}),i=new wt({props:{id:(o=t[0])==null?void 0:o.key,store:t[1],index:-1,disabled:t[5]||!t[22](t[0])}}),i.$on("dropped",t[23]),{c(){e=j("li"),H(n.$$.fragment),l=A(),H(i.$$.fragment)},m(a,r){R(a,e,r),V(n,e,null),K(e,l),V(i,e,null),s=!0},p(a,r){var c;const u={};r[0]&1&&(u.node=a[0]),r[0]&1024&&(u.debug=a[10]),r[0]&1&&(u.dropzoneEnabled=a[22](a[0])),n.$set(u);const f={};r[0]&1&&(f.id=(c=a[0])==null?void 0:c.key),r[0]&2&&(f.store=a[1]),r[0]&33&&(f.disabled=a[5]||!a[22](a[0])),i.$set(f)},i(a){s||(p(n.$$.fragment,a),p(i.$$.fragment,a),s=!0)},o(a){y(n.$$.fragment,a),y(i.$$.fragment,a),s=!1},d(a){a&&T(e),P(n),P(i)}}}function Gn(t){let e,n,l,i;return n=new Ct({props:{node:t[36],store:t[1],hoveredKeys:t[2],t:t[3],theme:t[4],disabled:t[5],acp:t[6],showNodeId:t[8],onNodeEditRequest:t[7],highlightedNodeKey:t[9],debug:t[10]}}),{c(){e=j("div"),H(n.$$.fragment),C(e,"class",l=t[36].value.allowInnerBlocks?"":"text-red-500")},m(s,o){R(s,e,o),V(n,e,null),i=!0},p(s,o){const a={};o[0]&1&&(a.node=s[36]),o[0]&2&&(a.store=s[1]),o[0]&4&&(a.hoveredKeys=s[2]),o[0]&8&&(a.t=s[3]),o[0]&16&&(a.theme=s[4]),o[0]&32&&(a.disabled=s[5]),o[0]&64&&(a.acp=s[6]),o[0]&256&&(a.showNodeId=s[8]),o[0]&128&&(a.onNodeEditRequest=s[7]),o[0]&512&&(a.highlightedNodeKey=s[9]),o[0]&1024&&(a.debug=s[10]),n.$set(a),(!i||o[0]&1&&l!==(l=s[36].value.allowInnerBlocks?"":"text-red-500"))&&C(e,"class",l)},i(s){i||(p(n.$$.fragment,s),i=!0)},o(s){y(n.$$.fragment,s),i=!1},d(s){s&&T(e),P(n)}}}function Un(t){let e,n,l,i,s,o,a,r,u,f,c;function k(){return t[27](t[36])}l=new nn({props:{class:"rounded-bl",ariaLabel:t[3]("node_edit"),theme:t[4],disabled:t[5],$$slots:{default:[vl]},$$scope:{ctx:t}}}),l.$on("click",k);let d=t[36].value.allowInnerBlocks&&Xn(t);function g(){return t[29](t[36])}o=new nn({props:{ariaLabel:t[3]("node_duplicate"),theme:t[4],disabled:t[5],$$slots:{default:[yl]},$$scope:{ctx:t}}}),o.$on("click",g);function h(){return t[30](t[36])}return r=new nn({props:{ariaLabel:t[3]("node_remove"),class:"rounded-br",theme:t[4],disabled:t[5],$$slots:{default:[Cl]},$$scope:{ctx:t}}}),r.$on("click",h),{c(){var b,_;e=j("div"),n=j("div"),H(l.$$.fragment),i=A(),d&&d.c(),s=A(),H(o.$$.fragment),a=A(),H(r.$$.fragment),C(n,"class","flex items-center h-full"),C(e,"class",u=te(`
						absolute leading-none
						top-[100%] -right-[3px] z-10
						bg-black
						${((_=(b=t[4])==null?void 0:b.hover_control)==null?void 0:_.box)||""}
						rounded-b
						transition-all
					`))},m(b,_){R(b,e,_),K(e,n),V(l,n,null),K(n,i),d&&d.m(n,null),K(n,s),V(o,n,null),K(n,a),V(r,n,null),c=!0},p(b,_){var O,q;t=b;const E={};_[0]&8&&(E.ariaLabel=t[3]("node_edit")),_[0]&16&&(E.theme=t[4]),_[0]&32&&(E.disabled=t[5]),_[1]&1024&&(E.$$scope={dirty:_,ctx:t}),l.$set(E),t[36].value.allowInnerBlocks?d?(d.p(t,_),_[0]&1&&p(d,1)):(d=Xn(t),d.c(),p(d,1),d.m(n,s)):d&&(Y(),y(d,1,1,()=>{d=null}),Q());const v={};_[0]&8&&(v.ariaLabel=t[3]("node_duplicate")),_[0]&16&&(v.theme=t[4]),_[0]&32&&(v.disabled=t[5]),_[1]&1024&&(v.$$scope={dirty:_,ctx:t}),o.$set(v);const S={};_[0]&8&&(S.ariaLabel=t[3]("node_remove")),_[0]&16&&(S.theme=t[4]),_[0]&32&&(S.disabled=t[5]),_[1]&1024&&(S.$$scope={dirty:_,ctx:t}),r.$set(S),(!c||_[0]&16&&u!==(u=te(`
						absolute leading-none
						top-[100%] -right-[3px] z-10
						bg-black
						${((q=(O=t[4])==null?void 0:O.hover_control)==null?void 0:q.box)||""}
						rounded-b
						transition-all
					`)))&&C(e,"class",u)},i(b){c||(p(l.$$.fragment,b),p(d),p(o.$$.fragment,b),p(r.$$.fragment,b),b&&ht(()=>{c&&(f||(f=ln(e,On,{},!0)),f.run(1))}),c=!0)},o(b){y(l.$$.fragment,b),y(d),y(o.$$.fragment,b),y(r.$$.fragment,b),b&&(f||(f=ln(e,On,{},!1)),f.run(0)),c=!1},d(b){b&&T(e),P(l),d&&d.d(),P(o),P(r),b&&f&&f.end()}}}function vl(t){let e,n=ul({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function Xn(t){let e,n;function l(){return t[28](t[36])}return e=new nn({props:{ariaLabel:t[3]("node_add"),theme:t[4],disabled:t[5],$$slots:{default:[wl]},$$scope:{ctx:t}}}),e.$on("click",l),{c(){H(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){t=i;const o={};s[0]&8&&(o.ariaLabel=t[3]("node_add")),s[0]&16&&(o.theme=t[4]),s[0]&32&&(o.disabled=t[5]),s[1]&1024&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function wl(t){let e,n=kt({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function yl(t){let e,n=rl({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function Cl(t){let e,n=Qt({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function Yn(t,e){var be;let n,l,i,s,o,a,r=al({size:21})+"",u,f,c,k,d,g,h,b,_,E,v,S,O,q,G,x,L,M,B,se,I=!e[40]&&Zn(e);c=new bl({props:{value:e[36].value,key:e[36].key,store:e[1],disabled:e[5],showNodeId:e[8],onNodeEditRequest:e[7],t:e[3]}});let D=((be=e[36].children)==null?void 0:be.length)&&Gn(e);function le(...Z){return e[26](e[37],...Z)}let J=!e[5]&&e[38]&&Un(e);function fe(){return e[31](e[36])}function ke(){return e[32](e[36])}return O=new yt({props:{node:e[0],debug:e[10],dropzoneEnabled:e[22](e[0])}}),G=new wt({props:{id:e[0].key,store:e[1],index:e[40],disabled:e[5]||!e[22](e[0])}}),G.$on("dropped",e[33]),{key:t,first:null,c(){var Z,w,W,ae,ee,z,N,Ee;n=oe(),I&&I.c(),l=A(),i=j("li"),s=j("div"),o=j("div"),a=j("div"),u=A(),f=j("div"),H(c.$$.fragment),k=A(),D&&D.c(),b=A(),J&&J.c(),v=A(),S=j("li"),H(O.$$.fragment),q=A(),H(G.$$.fragment),x=A(),C(a,"class","flex flex-col justify-center p-0 opacity-40"),F(a,"hidden",e[5]),F(a,"cursor-grab",!e[5]&&e[14]!==e[37]),F(a,"cursor-grabbing",!e[5]&&e[14]===e[37]),C(f,"class","flex-1 p-2"),C(o,"class","flex w-full"),C(s,"data-content-builder-node-highlighted",d=e[9]===e[36].key?!0:void 0),F(s,"bg-gray-300",!e[5]&&e[14]===e[37]),C(i,"class",_=te("select-none relative",((Z=e[4])==null?void 0:Z.li)||"",e[38]?"border-solid":"border-dashed",e[38]?((w=e[4])==null?void 0:w.li_hi)||"border-black":((W=e[4])==null?void 0:W.li_low)||"border-gray-300","border-[3px] rounded-t rounded-l relative block",e[13]===e[37]&&" border-black border-solid","transition-all	duration-500")),C(i,"role","group"),C(i,"data-content-builder-node-hidden",E=(ee=(ae=e[36].value)==null?void 0:ae.props)!=null&&ee.hidden?!0:void 0),F(i,"mx-4",!e[0].isRoot),C(S,"data-content-builder-node-debug",L=JSON.stringify({isRoot:e[0].isRoot,parentIsRoot:(z=e[0].parent)==null?void 0:z.isRoot,parentAllowInnerBlocks:(Ee=(N=e[0].parent)==null?void 0:N.value)==null?void 0:Ee.allowInnerBlocks})),this.first=n},m(Z,w){var W;R(Z,n,w),I&&I.m(Z,w),R(Z,l,w),R(Z,i,w),K(i,s),K(s,o),K(o,a),a.innerHTML=r,K(o,u),K(o,f),V(c,f,null),K(s,k),D&&D.m(s,null),K(i,b),J&&J.m(i,null),R(Z,v,w),R(Z,S,w),V(O,S,null),K(S,q),V(G,S,null),K(S,x),M=!0,B||(se=[ne(a,"mousedown",e[24]),ne(a,"mouseup",e[25]),De(g=Ft.call(null,s,{enabled:e[12]&&!e[5]&&e[38],id:e[37],payload:{source:e[36].key},effectAllowed:"move",isDragged:e[19]})),De(h=mt.call(null,s,{enabled:!!(e[36].value.allowInnerBlocks&&!((W=e[36].children)!=null&&W.length)),id:e[37],onDrop:le,isDraggedOver:e[20]})),ne(i,"pointerenter",fe),ne(i,"pointerleave",ke)],B=!0)},p(Z,w){var z,N,Ee,Ne,Ie,Se,ce,me,ge,Te;e=Z,e[40]?I&&(Y(),y(I,1,1,()=>{I=null}),Q()):I?(I.p(e,w),w[0]&1&&p(I,1)):(I=Zn(e),I.c(),p(I,1),I.m(l.parentNode,l)),(!M||w[0]&32)&&F(a,"hidden",e[5]),(!M||w[0]&16417)&&F(a,"cursor-grab",!e[5]&&e[14]!==e[37]),(!M||w[0]&16417)&&F(a,"cursor-grabbing",!e[5]&&e[14]===e[37]);const W={};w[0]&1&&(W.value=e[36].value),w[0]&1&&(W.key=e[36].key),w[0]&2&&(W.store=e[1]),w[0]&32&&(W.disabled=e[5]),w[0]&256&&(W.showNodeId=e[8]),w[0]&128&&(W.onNodeEditRequest=e[7]),w[0]&8&&(W.t=e[3]),c.$set(W),(z=e[36].children)!=null&&z.length?D?(D.p(e,w),w[0]&1&&p(D,1)):(D=Gn(e),D.c(),p(D,1),D.m(s,null)):D&&(Y(),y(D,1,1,()=>{D=null}),Q()),(!M||w[0]&513&&d!==(d=e[9]===e[36].key?!0:void 0))&&C(s,"data-content-builder-node-highlighted",d),g&&He(g.update)&&w[0]&6177&&g.update.call(null,{enabled:e[12]&&!e[5]&&e[38],id:e[37],payload:{source:e[36].key},effectAllowed:"move",isDragged:e[19]}),h&&He(h.update)&&w[0]&36867&&h.update.call(null,{enabled:!!(e[36].value.allowInnerBlocks&&!((N=e[36].children)!=null&&N.length)),id:e[37],onDrop:le,isDraggedOver:e[20]}),(!M||w[0]&16417)&&F(s,"bg-gray-300",!e[5]&&e[14]===e[37]),!e[5]&&e[38]?J?(J.p(e,w),w[0]&2081&&p(J,1)):(J=Un(e),J.c(),p(J,1),J.m(i,null)):J&&(Y(),y(J,1,1,()=>{J=null}),Q()),(!M||w[0]&10289&&_!==(_=te("select-none relative",((Ee=e[4])==null?void 0:Ee.li)||"",e[38]?"border-solid":"border-dashed",e[38]?((Ne=e[4])==null?void 0:Ne.li_hi)||"border-black":((Ie=e[4])==null?void 0:Ie.li_low)||"border-gray-300","border-[3px] rounded-t rounded-l relative block",e[13]===e[37]&&" border-black border-solid","transition-all	duration-500")))&&C(i,"class",_),(!M||w[0]&1&&E!==(E=(ce=(Se=e[36].value)==null?void 0:Se.props)!=null&&ce.hidden?!0:void 0))&&C(i,"data-content-builder-node-hidden",E),(!M||w[0]&10289)&&F(i,"mx-4",!e[0].isRoot);const ae={};w[0]&1&&(ae.node=e[0]),w[0]&1024&&(ae.debug=e[10]),w[0]&1&&(ae.dropzoneEnabled=e[22](e[0])),O.$set(ae);const ee={};w[0]&1&&(ee.id=e[0].key),w[0]&2&&(ee.store=e[1]),w[0]&1&&(ee.index=e[40]),w[0]&33&&(ee.disabled=e[5]||!e[22](e[0])),G.$set(ee),(!M||w[0]&1&&L!==(L=JSON.stringify({isRoot:e[0].isRoot,parentIsRoot:(me=e[0].parent)==null?void 0:me.isRoot,parentAllowInnerBlocks:(Te=(ge=e[0].parent)==null?void 0:ge.value)==null?void 0:Te.allowInnerBlocks})))&&C(S,"data-content-builder-node-debug",L)},i(Z){M||(p(I),p(c.$$.fragment,Z),p(D),p(J),p(O.$$.fragment,Z),p(G.$$.fragment,Z),M=!0)},o(Z){y(I),y(c.$$.fragment,Z),y(D),y(J),y(O.$$.fragment,Z),y(G.$$.fragment,Z),M=!1},d(Z){Z&&(T(n),T(l),T(i),T(v),T(S)),I&&I.d(Z),P(c),D&&D.d(),J&&J.d(),P(O),P(G),B=!1,on(se)}}}function Nl(t){var i,s;let e,n,l=((s=(i=t[0])==null?void 0:i.children)==null?void 0:s.length)&&Fn(t);return{c(){l&&l.c(),e=oe()},m(o,a){l&&l.m(o,a),R(o,e,a),n=!0},p(o,a){var r,u;(u=(r=o[0])==null?void 0:r.children)!=null&&u.length?l?(l.p(o,a),a[0]&1&&p(l,1)):(l=Fn(o),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(Y(),y(l,1,1,()=>{l=null}),Q())},i(o){n||(p(l),n=!0)},o(o){y(l),n=!1},d(o){o&&T(e),l&&l.d(o)}}}function zl(t,e,n){let l,i=$,s=()=>(i(),i=Ae(g,z=>n(11,l=z)),g),o,a,r,u,f=$,c=()=>(f(),f=Ae(d,z=>n(15,u=z)),d);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>f()),je("ContentNode"),Ue();let{node:k}=e,{store:d}=e;c();let{hoveredKeys:g=Le([])}=e;s();let{t:h}=e,{theme:b}=e,{disabled:_=!1}=e,{acp:E=null}=e,{onNodeEditRequest:v}=e,{showNodeId:S=!1}=e,{highlightedNodeKey:O=void 0}=e,{debug:q=!1}=e;const G=z=>{ie(g,l=[...l,z.key],l)},x=z=>{ie(g,l=[...l.filter(N=>N!==z.key)],l)},L=Le(!1);Oe(t,L,z=>n(12,o=z));const M=Le(null);Oe(t,M,z=>n(14,r=z));const B=Le(null);Oe(t,B,z=>n(13,a=z));const se=new We,I=z=>{var N;return z.isRoot||((N=k==null?void 0:k.value)==null?void 0:N.allowInnerBlocks)},D=()=>ie(L,o=!1,o),le=()=>ie(L,o=!0,o),J=()=>ie(L,o=!1,o),fe=(z,N,Ee)=>{var me;const Ne=(me=N.payload)==null?void 0:me.source,Ie=z;se.restore(u.data);const Se=se.find(Ne),ce=se.find(Ie);Se&&ce&&Se!==ce&&d.move(Ne,Ie),ie(L,o=!1,o)},ke=async z=>v(z.key,z.value),be=z=>d.add(z.key),Z=z=>d.duplicate(z.key),w=async z=>{const N=Ne=>({html:vt(h(Ne),{"{{label}}":z.value.label})});await(E?gt(E,{title:N("node_remove_confirm_title"),variant:"warn"}):confirm)(N("node_remove_confirm"))&&d.remove(z.key)},W=z=>G(z),ae=z=>x(z),ee=()=>ie(L,o=!1,o);return t.$$set=z=>{"node"in z&&n(0,k=z.node),"store"in z&&c(n(1,d=z.store)),"hoveredKeys"in z&&s(n(2,g=z.hoveredKeys)),"t"in z&&n(3,h=z.t),"theme"in z&&n(4,b=z.theme),"disabled"in z&&n(5,_=z.disabled),"acp"in z&&n(6,E=z.acp),"onNodeEditRequest"in z&&n(7,v=z.onNodeEditRequest),"showNodeId"in z&&n(8,S=z.showNodeId),"highlightedNodeKey"in z&&n(9,O=z.highlightedNodeKey),"debug"in z&&n(10,q=z.debug)},[k,d,g,h,b,_,E,v,S,O,q,l,o,a,r,u,G,x,L,M,B,se,I,D,le,J,fe,ke,be,Z,w,W,ae,ee]}class Ct extends ye{constructor(e){super(),Ce(this,e,zl,Nl,pe,{node:0,store:1,hoveredKeys:2,t:3,theme:4,disabled:5,acp:6,onNodeEditRequest:7,showNodeId:8,highlightedNodeKey:9,debug:10},null,[-1,-1])}}function Bl(t){let e,n,l,i=t[5]("empty")+"",s,o;return{c(){e=j("div"),n=j("button"),l=j("span"),C(l,"class","opacity-75 group-hover:opacity-100"),C(n,"type","button"),C(n,"class","text-sm mx-auto text-gray-800 border-dashed border-[3px] border-gray-300 hover:border-black focus:outline-none focus:border-black rounded-md p-2 px-3 flex items-center justify-center leading-none group "),C(e,"class","text-center")},m(a,r){R(a,e,r),K(e,n),K(n,l),l.innerHTML=i,s||(o=ne(n,"click",t[15]),s=!0)},p:$,i:$,o:$,d(a){a&&T(e),s=!1,o()}}}function El(t){let e,n;return e=new Ct({props:{node:t[10].root,store:t[2],t:t[5],theme:t[3],disabled:t[6],acp:t[4],onNodeEditRequest:t[7],showNodeId:t[8],highlightedNodeKey:t[0],debug:t[8]}}),{c(){H(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,i){const s={};i&1024&&(s.node=l[10].root),i&4&&(s.store=l[2]),i&8&&(s.theme=l[3]),i&64&&(s.disabled=l[6]),i&16&&(s.acp=l[4]),i&128&&(s.onNodeEditRequest=l[7]),i&256&&(s.showNodeId=l[8]),i&1&&(s.highlightedNodeKey=l[0]),i&256&&(s.debug=l[8]),e.$set(s)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){P(e,l)}}}function Il(t){let e,n,l,i,s;const o=[El,Bl],a=[];function r(u,f){return u[9].size>1?0:1}return n=r(t),l=a[n]=o[n](t),{c(){e=j("div"),l.c(),C(e,"class",i=te(`${t[1]}`))},m(u,f){R(u,e,f),a[n].m(e,null),s=!0},p(u,[f]){let c=n;n=r(u),n===c?a[n].p(u,f):(Y(),y(a[c],1,1,()=>{a[c]=null}),Q(),l=a[n],l?l.p(u,f):(l=a[n]=o[n](u),l.c()),p(l,1),l.m(e,null)),(!s||f&2&&i!==(i=te(`${u[1]}`)))&&C(e,"class",i)},i(u){s||(p(l),s=!0)},o(u){y(l),s=!1},d(u){u&&T(e),a[n].d()}}}function Sl(t,e,n){let l,i,s=$,o=()=>(s(),s=Ae(r,O=>n(9,i=O)),r);t.$$.on_destroy.push(()=>s()),je("ContentBuilder");let{class:a=""}=e,{store:r}=e;o();let{i18n:u={empty:"Click here to append the first content block",node_remove:"Remove this content block",node_remove_confirm_title:'Are you sure to delete <b>"{{label}}"</b>?',node_remove_confirm:['This operation removes the content block <b>"{{label}}"</b> and all its inner blocks (if any).',"There is no undo. Continue?"].join(" "),node_add:"Add a new content block inside this block",node_duplicate:"Duplicate this content block",node_edit:"Edit this content block",node_edit_drag:"Click to edit this content block or drag to move",label_label:"Label",label_desc:"For your internal reference only.",type_label:"Content block type",type_desc:"This will affect how this content block is rendered. Note that changing the type resets all current block properties.",props_fieldset_legend:"Content block properties",html_label:"Block inner HTML (advanced)",html_desc:"Be careful. You can break things.",style_label:"Block CSS (advanced)",style_desc:"Note that some content blocks may ignore this value.",class_label:"Block classes (advanced)",class_desc:"Note that some content blocks may ignore this value.",hidden_label:"Hidden",hidden_desc:"If checked, this block including its inner blocks will not be rendered.",allow_inner_label:"Allow this block to contain inner blocks",allow_inner_desc:"If unchecked, any existing inner blocks will not be rendered, but will remain intact."}}=e,{theme:f={}}=e,{notifications:c=void 0}=e,{acp:k=void 0}=e;const d=(O,q={})=>(u==null?void 0:u[O])??O;let{disabled:g=!1}=e,{highlightedNodeKey:h=void 0}=e;function b(O){n(0,h=O)}async function _(O,q){if(k){r.resetError();const G=await new Promise(x=>{k==null||k.prompt(L=>{try{L=JSON.parse(L),k.close(),x(L)}catch{k.setHeadValue(L),(c||console).error("Invalid JSON data. Can't continue...")}},{content:"Valid JSON is required. Edit at your own risk.",value:JSON.stringify(q,null,2),promptFieldProps:{type:"textarea",class:{input:"font-mono"}},iconFn:!1,title:{html:['<span class="flex items-center justify-between">',"<span>Advanced content block data editor</span>",`<code class="text-xs opacity-50 font-normal">${O}</code>`,"</span>"].join(" ")}})});return G&&r.edit(O,G),!!G}else return console.warn("Default `defaultOnNodeEdit` is a no-op, because `acp` instance was not provided."),!1}let{onNodeEditRequest:E=_}=e,{debug:v=!1}=e;const S=()=>r.add(null);return t.$$set=O=>{"class"in O&&n(1,a=O.class),"store"in O&&o(n(2,r=O.store)),"i18n"in O&&n(11,u=O.i18n),"theme"in O&&n(3,f=O.theme),"notifications"in O&&n(12,c=O.notifications),"acp"in O&&n(4,k=O.acp),"disabled"in O&&n(6,g=O.disabled),"highlightedNodeKey"in O&&n(0,h=O.highlightedNodeKey),"onNodeEditRequest"in O&&n(7,E=O.onNodeEditRequest),"debug"in O&&n(8,v=O.debug)},t.$$.update=()=>{t.$$.dirty&512&&n(10,l=We.factory(i.data||"",!0))},[h,a,r,f,k,d,g,E,v,i,l,u,c,b,_,S]}class Ol extends ye{constructor(e){super(),Ce(this,e,Sl,Il,pe,{class:1,store:2,i18n:11,theme:3,notifications:12,acp:4,t:5,disabled:6,highlightedNodeKey:0,setHighlightedNodeKey:13,defaultOnNodeEdit:14,onNodeEditRequest:7,debug:8})}get t(){return this.$$.ctx[5]}get setHighlightedNodeKey(){return this.$$.ctx[13]}get defaultOnNodeEdit(){return this.$$.ctx[14]}}const Rl={label:"Default",value:"default",description:"",props:[{name:"html",inputType:"textarea",value:"",inputProps:{placeholder:"<b>Hello, World!</b>"}},{name:"style",inputType:"textarea",value:"",inputProps:{placeholder:"color: red;"}}],allowInnerBlocks:{value:!0,hidden:!1}},Tl=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${s?`${s} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"/></svg>`},Ll=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${s?`${s} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z" clip-rule="evenodd"/></svg>`},Ml=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${s?`${s} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M6.28 5.22a.75.75 0 0 1 0 1.06L2.56 10l3.72 3.72a.75.75 0 0 1-1.06 1.06L.97 10.53a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Zm7.44 0a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L17.44 10l-3.72-3.72a.75.75 0 0 1 0-1.06ZM11.377 2.011a.75.75 0 0 1 .612.867l-2.5 14.5a.75.75 0 0 1-1.478-.255l2.5-14.5a.75.75 0 0 1 .866-.612Z" clip-rule="evenodd"/></svg>`},Dl=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let s=Object.entries(t).filter(([o,a])=>!/^class|size|style|strokeWidth$/.test(o)).reduce((o,[a,r])=>[...o,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${s?`${s} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"/></svg>`};function Qn(t,e,n){const l=t.slice();l[68]=e[n][0],l[69]=e[n][1],l[71]=e,l[72]=n;const i=l[37](l[68],l[69].inputType,l[69].inputProps);return l[70]=i,l}function $n(t){let e=t[19].key,n,l,i=rt(t);return{c(){i.c(),n=oe()},m(s,o){i.m(s,o),R(s,n,o),l=!0},p(s,o){o[0]&524288&&pe(e,e=s[19].key)?(Y(),y(i,1,1,$),Q(),i=rt(s),i.c(),p(i,1),i.m(n.parentNode,n)):i.p(s,o)},i(s){l||(p(i),l=!0)},o(s){y(i),l=!1},d(s){s&&T(n),i.d(s)}}}function jl(t){let e,n,l,i,s;return{c(){e=j("span"),n=Je(t[0]),C(e,"slot","input_after"),C(e,"class","text-xs font-mono px-2 flex items-center opacity-50")},m(o,a){R(o,e,a),K(e,n),i||(s=De(l=Ye.call(null,e,{content:"Internal block ID",getAppendChildTarget:t[12],boundaryRoot:t[24]})),i=!0)},p(o,a){a[0]&1&&Xe(n,o[0]),l&&He(l.update)&&a[0]&16781312&&l.update.call(null,{content:"Internal block ID",getAppendChildTarget:o[12],boundaryRoot:o[24]})},d(o){o&&T(e),i=!1,s()}}}function Kl(t){let e,n,l;function i(o){t[54](o)}let s={type:"text",label:t[14]("type_label"),size:t[35](t[13],"sm","md"),class:t[36].text.props.class,disabled:!0};return t[22]!==void 0&&(s.value=t[22]),e=new sn({props:s}),ue.push(()=>Be(e,"value",i)),{c(){H(e.$$.fragment)},m(o,a){V(e,o,a),l=!0},p(o,a){const r={};a[0]&16384&&(r.label=o[14]("type_label")),a[0]&8192&&(r.size=o[35](o[13],"sm","md")),!n&&a[0]&4194304&&(n=!0,r.value=o[22],Me(()=>n=!1)),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){P(e,o)}}}function ql(t){let e,n,l;function i(o){t[53](o)}let s={label:t[14]("type_label"),description:t[14]("type_desc"),class:t[36].select.props.class,options:t[20].map(ut),size:t[35](t[13],"sm","md")};return t[22]!==void 0&&(s.value=t[22]),e=new pt({props:s}),ue.push(()=>Be(e,"value",i)),e.$on("change",t[34]),{c(){H(e.$$.fragment)},m(o,a){V(e,o,a),l=!0},p(o,a){const r={};a[0]&16384&&(r.label=o[14]("type_label")),a[0]&16384&&(r.description=o[14]("type_desc")),a[0]&1048576&&(r.options=o[20].map(ut)),a[0]&8192&&(r.size=o[35](o[13],"sm","md")),!n&&a[0]&4194304&&(n=!0,r.value=o[22],Me(()=>n=!1)),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){P(e,o)}}}function xn(t){var l;let e,n;return e=new ol({props:{legend:(l=t[18])==null?void 0:l.label,class:{box:`mb-4 pb-2 ${t[3]}`},$$slots:{default:[Al]},$$scope:{ctx:t}}}),{c(){H(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){var a;const o={};s[0]&262144&&(o.legend=(a=i[18])==null?void 0:a.label),s[0]&8&&(o.class={box:`mb-4 pb-2 ${i[3]}`}),s[0]&2367504|s[2]&2048&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function et(t){let e,n=t[18].description+"",l;return{c(){e=j("div"),C(e,"class",l=te("-mt-2 mb-3 opacity-50",t[4],t[35](t[13],"text-xs","text-sm")))},m(i,s){R(i,e,s),e.innerHTML=n},p(i,s){s[0]&262144&&n!==(n=i[18].description+"")&&(e.innerHTML=n),s[0]&8208&&l!==(l=te("-mt-2 mb-3 opacity-50",i[4],i[35](i[13],"text-xs","text-sm")))&&C(e,"class",l)},d(i){i&&T(e)}}}function nt(t){let e,n,l,i,s,o;const a=[t[70].props||{},{name:t[68]},{size:t[35](t[13],"sm","md")},{validate:!0}];function r(d){t[55](d,t[68])}function u(d){t[56](d,t[68])}function f(d){t[57](d,t[68])}var c=t[70].component;function k(d,g){let h={};for(let b=0;b<a.length;b+=1)h=En(h,a[b]);return g!==void 0&&g[0]&270336|g[1]&80&&(h=En(h,Rn(a,[g[0]&262144|g[1]&64&&Tn(d[70].props||{}),g[0]&262144&&{name:d[68]},g[0]&8192|g[1]&16&&{size:d[35](d[13],"sm","md")},a[3]]))),d[21][d[68]]!==void 0&&(h.value=d[21][d[68]]),d[21][d[68]]!==void 0&&(h.group=d[21][d[68]]),d[21][d[68]]!==void 0&&(h.checked=d[21][d[68]]),{props:h}}return c&&(e=Bn(c,k(t)),ue.push(()=>Be(e,"value",r)),ue.push(()=>Be(e,"group",u)),ue.push(()=>Be(e,"checked",f)),e.$on("change",t[34])),{c(){e&&H(e.$$.fragment),s=oe()},m(d,g){e&&V(e,d,g),R(d,s,g),o=!0},p(d,g){if(t=d,g[0]&262144&&c!==(c=t[70].component)){if(e){Y();const h=e;y(h.$$.fragment,1,0,()=>{P(h,1)}),Q()}c?(e=Bn(c,k(t,g)),ue.push(()=>Be(e,"value",r)),ue.push(()=>Be(e,"group",u)),ue.push(()=>Be(e,"checked",f)),e.$on("change",t[34]),H(e.$$.fragment),p(e.$$.fragment,1),V(e,s.parentNode,s)):e=null}else if(c){const h=g[0]&270336|g[1]&80?Rn(a,[g[0]&262144|g[1]&64&&Tn(t[70].props||{}),g[0]&262144&&{name:t[68]},g[0]&8192|g[1]&16&&{size:t[35](t[13],"sm","md")},a[3]]):{};!n&&g[0]&2359296&&(n=!0,h.value=t[21][t[68]],Me(()=>n=!1)),!l&&g[0]&2359296&&(l=!0,h.group=t[21][t[68]],Me(()=>l=!1)),!i&&g[0]&2359296&&(i=!0,h.checked=t[21][t[68]],Me(()=>i=!1)),e.$set(h)}},i(d){o||(e&&p(e.$$.fragment,d),o=!0)},o(d){e&&y(e.$$.fragment,d),o=!1},d(d){d&&T(s),e&&P(e,d)}}}function Al(t){var r,u,f;let e,n,l,i=((r=t[18])==null?void 0:r.description)&&et(t),s=Ge(((f=(u=t[18])==null?void 0:u.props)==null?void 0:f.entries())||[]),o=[];for(let c=0;c<s.length;c+=1)o[c]=nt(Qn(t,s,c));const a=c=>y(o[c],1,1,()=>{o[c]=null});return{c(){i&&i.c(),e=A();for(let c=0;c<o.length;c+=1)o[c].c();n=oe()},m(c,k){i&&i.m(c,k),R(c,e,k);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(c,k);R(c,n,k),l=!0},p(c,k){var d,g,h;if((d=c[18])!=null&&d.description?i?i.p(c,k):(i=et(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),k[0]&2367488|k[1]&88){s=Ge(((h=(g=c[18])==null?void 0:g.props)==null?void 0:h.entries())||[]);let b;for(b=0;b<s.length;b+=1){const _=Qn(c,s,b);o[b]?(o[b].p(_,k),p(o[b],1)):(o[b]=nt(_),o[b].c(),p(o[b],1),o[b].m(n.parentNode,n))}for(Y(),b=s.length;b<o.length;b+=1)a(b);Q()}},i(c){if(!l){for(let k=0;k<s.length;k+=1)p(o[k]);l=!0}},o(c){o=o.filter(Boolean);for(let k=0;k<o.length;k+=1)y(o[k]);l=!1},d(c){c&&(T(e),T(n)),i&&i.d(c),bt(o,c)}}}function tt(t){var a,r;let e,n,l,i;function s(u){t[59](u)}let o={label:t[14]("allow_inner_label"),description:t[14]("allow_inner_desc"),disabled:(r=(a=t[18])==null?void 0:a.allowInnerBlocks)==null?void 0:r.hidden,size:t[35](t[13],"sm","md"),class:t[36].checkbox.props.class};return t[25]!==void 0&&(o.checked=t[25]),n=new kn({props:o}),ue.push(()=>Be(n,"checked",s)),n.$on("change",t[34]),{c(){var u,f;e=j("div"),H(n.$$.fragment),F(e,"opacity-50",(f=(u=t[18])==null?void 0:u.allowInnerBlocks)==null?void 0:f.hidden)},m(u,f){R(u,e,f),V(n,e,null),i=!0},p(u,f){var k,d,g,h;const c={};f[0]&16384&&(c.label=u[14]("allow_inner_label")),f[0]&16384&&(c.description=u[14]("allow_inner_desc")),f[0]&262144&&(c.disabled=(d=(k=u[18])==null?void 0:k.allowInnerBlocks)==null?void 0:d.hidden),f[0]&8192&&(c.size=u[35](u[13],"sm","md")),!l&&f[0]&33554432&&(l=!0,c.checked=u[25],Me(()=>l=!1)),n.$set(c),(!i||f[0]&262144)&&F(e,"opacity-50",(h=(g=u[18])==null?void 0:g.allowInnerBlocks)==null?void 0:h.hidden)},i(u){i||(p(n.$$.fragment,u),i=!0)},o(u){y(n.$$.fragment,u),i=!1},d(u){u&&T(e),P(n)}}}function lt(t){var k;let e,n,l,i,s,o,a,r=t[6]&&it(t),u=t[8]&&st(t),f=t[7]&&ot(t),c=((k=t[23])==null?void 0:k.isSaving)&&at();return{c(){e=j("div"),n=j("div"),r&&r.c(),l=A(),u&&u.c(),i=A(),f&&f.c(),s=A(),c&&c.c(),C(n,"class","flex-1"),C(e,"class",o=te("space-x-2 mt-8 flex items-start justify-center",t[2]))},m(d,g){R(d,e,g),K(e,n),r&&r.m(n,null),K(n,l),u&&u.m(n,null),K(n,i),f&&f.m(n,null),K(e,s),c&&c.m(e,null),a=!0},p(d,g){var h;d[6]?r?(r.p(d,g),g[0]&64&&p(r,1)):(r=it(d),r.c(),p(r,1),r.m(n,l)):r&&(Y(),y(r,1,1,()=>{r=null}),Q()),d[8]?u?(u.p(d,g),g[0]&256&&p(u,1)):(u=st(d),u.c(),p(u,1),u.m(n,i)):u&&(Y(),y(u,1,1,()=>{u=null}),Q()),d[7]?f?(f.p(d,g),g[0]&128&&p(f,1)):(f=ot(d),f.c(),p(f,1),f.m(n,null)):f&&(Y(),y(f,1,1,()=>{f=null}),Q()),(h=d[23])!=null&&h.isSaving?c||(c=at(),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!a||g[0]&4&&o!==(o=te("space-x-2 mt-8 flex items-start justify-center",d[2])))&&C(e,"class",o)},i(d){a||(p(r),p(u),p(f),a=!0)},o(d){y(r),y(u),y(f),a=!1},d(d){d&&T(e),r&&r.d(),u&&u.d(),f&&f.d(),c&&c.d()}}}function it(t){let e,n,l,i,s,o;return n=new Pe({props:{size:t[35](t[13],"sm","md"),"data-content-editor-edit":!0,class:t[10],variant:t[11],$$slots:{default:[Hl]},$$scope:{ctx:t}}}),n.$on("click",t[16]),{c(){e=j("span"),H(n.$$.fragment)},m(a,r){R(a,e,r),V(n,e,null),i=!0,s||(o=De(l=Ye.call(null,e,{content:"Advanced raw data editor",getAppendChildTarget:t[12],boundaryRoot:t[24]})),s=!0)},p(a,r){const u={};r[0]&8192&&(u.size=a[35](a[13],"sm","md")),r[0]&1024&&(u.class=a[10]),r[0]&2048&&(u.variant=a[11]),r[2]&2048&&(u.$$scope={dirty:r,ctx:a}),n.$set(u),l&&He(l.update)&&r[0]&16781312&&l.update.call(null,{content:"Advanced raw data editor",getAppendChildTarget:a[12],boundaryRoot:a[24]})},i(a){i||(p(n.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),i=!1},d(a){a&&T(e),P(n),s=!1,o()}}}function Hl(t){let e,n=Ml({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function st(t){let e,n,l,i,s,o;return n=new Pe({props:{size:t[35](t[13],"sm","md"),"data-content-editor-remove":!0,class:t[10],variant:t[11],$$slots:{default:[Vl]},$$scope:{ctx:t}}}),n.$on("click",t[17]),{c(){e=j("span"),H(n.$$.fragment)},m(a,r){R(a,e,r),V(n,e,null),i=!0,s||(o=De(l=Ye.call(null,e,{content:"Delete this content block",getAppendChildTarget:t[12],boundaryRoot:t[24]})),s=!0)},p(a,r){const u={};r[0]&8192&&(u.size=a[35](a[13],"sm","md")),r[0]&1024&&(u.class=a[10]),r[0]&2048&&(u.variant=a[11]),r[2]&2048&&(u.$$scope={dirty:r,ctx:a}),n.$set(u),l&&He(l.update)&&r[0]&16781312&&l.update.call(null,{content:"Delete this content block",getAppendChildTarget:a[12],boundaryRoot:a[24]})},i(a){i||(p(n.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),i=!1},d(a){a&&T(e),P(n),s=!1,o()}}}function Vl(t){let e,n=Ll({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function ot(t){let e,n,l,i,s,o;return n=new Pe({props:{size:t[35](t[13],"sm","md"),"data-content-editor-close":!0,class:t[10],variant:t[11],$$slots:{default:[Pl]},$$scope:{ctx:t}}}),n.$on("click",t[15]),{c(){e=j("span"),H(n.$$.fragment)},m(a,r){R(a,e,r),V(n,e,null),i=!0,s||(o=De(l=Ye.call(null,e,{content:"Close this editor",getAppendChildTarget:t[12],boundaryRoot:t[24]})),s=!0)},p(a,r){const u={};r[0]&8192&&(u.size=a[35](a[13],"sm","md")),r[0]&1024&&(u.class=a[10]),r[0]&2048&&(u.variant=a[11]),r[2]&2048&&(u.$$scope={dirty:r,ctx:a}),n.$set(u),l&&He(l.update)&&r[0]&16781312&&l.update.call(null,{content:"Close this editor",getAppendChildTarget:a[12],boundaryRoot:a[24]})},i(a){i||(p(n.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),i=!1},d(a){a&&T(e),P(n),s=!1,o()}}}function Pl(t){let e,n=Tl({size:16})+"",l;return{c(){e=new Re(!1),l=oe(),e.a=l},m(i,s){e.m(n,i,s),R(i,l,s)},p:$,d(i){i&&(T(l),e.d())}}}function at(t){let e,n=Dl({class:te("animate-spin m-auto inline")})+"";return{c(){e=j("div"),C(e,"class","opacity-25")},m(l,i){R(l,e,i),e.innerHTML=n},d(l){l&&T(e)}}}function rt(t){var B,se;let e,n,l,i,s,o,a,r,u=t[33]((B=t[18])==null?void 0:B.props)||((se=t[18])==null?void 0:se.description),f,c,k,d,g=t[32](t[22]),h,b;function _(I){t[52](I)}let E={type:"text",label:t[14]("label_label"),description:t[14]("label_desc"),size:t[35](t[13],"sm","md"),class:{input:te(t[36].text.props.class.input,"rounded-r-none"),description:t[36].text.props.class.description},$$slots:{input_after:[jl]},$$scope:{ctx:t}};t[26]!==void 0&&(E.value=t[26]),n=new sn({props:E}),ue.push(()=>Be(n,"value",_)),n.$on("change",t[34]);const v=[ql,Kl],S=[];function O(I,D){return D[0]&4194304&&(s=null),s==null&&(s=!!I[32](I[22])),s?0:1}o=O(t,[-1,-1,-1]),a=S[o]=v[o](t);let q=u&&xn(t);function G(I){t[58](I)}let x={label:t[14]("hidden_label"),description:t[14]("hidden_desc"),size:t[35](t[13],"sm","md"),class:t[36].checkbox.props.class};t[21].hidden!==void 0&&(x.checked=t[21].hidden),c=new kn({props:x}),ue.push(()=>Be(c,"checked",G)),c.$on("change",t[34]);let L=g&&tt(t),M=(t[6]||t[7]||t[8]||t[9])&&lt(t);return{c(){e=j("form"),H(n.$$.fragment),i=A(),a.c(),r=A(),q&&q.c(),f=A(),H(c.$$.fragment),d=A(),L&&L.c(),h=A(),M&&M.c(),C(e,"class",t[1])},m(I,D){R(I,e,D),V(n,e,null),K(e,i),S[o].m(e,null),K(e,r),q&&q.m(e,null),K(e,f),V(c,e,null),K(e,d),L&&L.m(e,null),K(e,h),M&&M.m(e,null),t[60](e),b=!0},p(I,D){var ke,be;const le={};D[0]&16384&&(le.label=I[14]("label_label")),D[0]&16384&&(le.description=I[14]("label_desc")),D[0]&8192&&(le.size=I[35](I[13],"sm","md")),D[0]&16781313|D[2]&2048&&(le.$$scope={dirty:D,ctx:I}),!l&&D[0]&67108864&&(l=!0,le.value=I[26],Me(()=>l=!1)),n.$set(le);let J=o;o=O(I,D),o===J?S[o].p(I,D):(Y(),y(S[J],1,1,()=>{S[J]=null}),Q(),a=S[o],a?a.p(I,D):(a=S[o]=v[o](I),a.c()),p(a,1),a.m(e,r)),D[0]&262144&&(u=I[33]((ke=I[18])==null?void 0:ke.props)||((be=I[18])==null?void 0:be.description)),u?q?(q.p(I,D),D[0]&262144&&p(q,1)):(q=xn(I),q.c(),p(q,1),q.m(e,f)):q&&(Y(),y(q,1,1,()=>{q=null}),Q());const fe={};D[0]&16384&&(fe.label=I[14]("hidden_label")),D[0]&16384&&(fe.description=I[14]("hidden_desc")),D[0]&8192&&(fe.size=I[35](I[13],"sm","md")),!k&&D[0]&2097152&&(k=!0,fe.checked=I[21].hidden,Me(()=>k=!1)),c.$set(fe),D[0]&4194304&&(g=I[32](I[22])),g?L?(L.p(I,D),D[0]&4194304&&p(L,1)):(L=tt(I),L.c(),p(L,1),L.m(e,h)):L&&(Y(),y(L,1,1,()=>{L=null}),Q()),I[6]||I[7]||I[8]||I[9]?M?(M.p(I,D),D[0]&960&&p(M,1)):(M=lt(I),M.c(),p(M,1),M.m(e,null)):M&&(Y(),y(M,1,1,()=>{M=null}),Q()),(!b||D[0]&2)&&C(e,"class",I[1])},i(I){b||(p(n.$$.fragment,I),p(a),p(q),p(c.$$.fragment,I),p(L),p(M),b=!0)},o(I){y(n.$$.fragment,I),y(a),y(q),y(c.$$.fragment,I),y(L),y(M),b=!1},d(I){I&&T(e),P(n),S[o].d(),q&&q.d(),P(c),L&&L.d(),M&&M.d(),t[60](null)}}}function Jl(t){let e,n,l=t[19]&&$n(t);return{c(){l&&l.c(),e=oe()},m(i,s){l&&l.m(i,s),R(i,e,s),n=!0},p(i,s){i[19]?l?(l.p(i,s),s[0]&524288&&p(l,1)):(l=$n(i),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(Y(),y(l,1,1,()=>{l=null}),Q())},i(i){n||(p(l),n=!0)},o(i){y(l),n=!1},d(i){i&&T(e),l&&l.d(i)}}}const Wl=je("ContentNodeEditor"),ut=t=>({label:t.label||t.value,value:t.value,optgroup:t.optgroup||""});function Fl(t,e,n){let l,i,s,o,a,r,u,f,c,k,d=$,g=()=>(d(),d=Ae(L,m=>n(23,k=m)),L);t.$$.on_destroy.push(()=>d());const h=Ue();let{debug:b=!1}=e;const _=(...m)=>b&&Wl(...m);let{class:E=""}=e,{buttonBoxClass:v=""}=e,{fieldsetBoxClass:S=""}=e,{fieldsetDescriptionClass:O=""}=e,{selectInputClass:q=""}=e,{notifications:G=void 0}=e,{acp:x=void 0}=e,{store:L}=e;g();let{key:M=""}=e,{builder:B=void 0}=e,{typesConfig:se=[]}=e;function I(m){_("setKey",m),n(0,M=m)}let{afterEdit:D=void 0}=e,{afterClose:le=void 0}=e,{afterRemove:J=void 0}=e,{showButtonEdit:fe=!0}=e,{showButtonClose:ke=!0}=e,{showButtonRemove:be=!0}=e,{showIsSaving:Z=!0}=e,{buttonsClass:w=""}=e,{buttonsVariant:W=""}=e,{tooltipGetAppendChildTarget:ae=void 0}=e,{size:ee="md"}=e,{t:z=(m,U)=>m}=e,{allowClassProp:N=!0}=e;const Ee=m=>{let U=[...m];return m.findIndex(re=>re.name==="style")<0&&U.push({name:"style",inputType:"textarea",value:"",inputProps:{placeholder:"color: red;"}}),N&&m.findIndex(re=>re.name==="class")<0&&U.push({name:"class",inputType:"textarea",value:"",inputProps:{placeholder:"text-red-500"}}),U};function Ne(){n(0,M=""),le==null||le(),h("closed")}async function Ie(){var m;o&&await((m=B==null?void 0:B.defaultOnNodeEdit)==null?void 0:m.call(B,M,a)),D==null||D(),h("edited")}async function Se(){const m=re=>({html:vt(z(re),{"{{label}}":o==null?void 0:o.value.label})});await(x?gt(x,{title:m("node_remove_confirm_title"),variant:"warn"}):confirm)(m("node_remove_confirm"))&&L.remove(M),J==null||J(),h("removed")}const ce=Le("");Oe(t,ce,m=>n(22,f=m));const me=Le("");Oe(t,me,m=>n(26,c=m));const ge=Le({});Oe(t,ge,m=>n(21,u=m));const Te=Le(!0);Oe(t,Te,m=>n(25,r=m));const vn=Gt([ce,me,ge,Te],([m,U,re,de])=>({...(o==null?void 0:o.value)||{},type:m,label:U,props:re,allowInnerBlocks:de}));Oe(t,vn,m=>n(61,a=m));let _e=null;const wn=(m,U=!1)=>{m=U?{}:{...m};const re=(de,he)=>{_(`setting prop ${de}=${JSON.stringify(he)}`),m[de]=he};return _e==null||_e.props.forEach((de,he)=>{m[he]===void 0&&re(he,de==null?void 0:de.value)}),_("going to apply config props:",m),m},Nt=m=>i.has(m),zt=m=>{const U=[...(m==null?void 0:m.entries())||[]];if(!U.length)return!1;for(let[re,de]of U)if(de.inputType==="hidden")return!1;return!0};let Ve={};const Bt=()=>{o&&(_(`SAVING '${M}'s VALUE TO '`,a),L.edit(M,a),h("saved"))},Et=()=>({html:{label:z("html_label"),description:z("html_desc")},style:{label:z("style_label"),description:z("style_desc")},class:{label:z("class_label"),description:z("class_desc")}}),Ke=(m,U,re)=>m==="sm"?U:re,yn={class:{input:`font-mono bg-white p-1 ${Ke(ee,"text-sm placeholder:text-sm","text-base placeholder:text-base")}`,description:Ke(ee,"text-xs","text-sm")}},Cn={text:{component:sn,props:{...yn,type:"text",class:{input:"bg-white p-2 font-mono",description:Ke(ee,"text-xs","text-sm")}}},textarea:{component:sn,props:{...yn,type:"textarea",class:{input:"bg-white p-2 font-mono min-h-0",description:Ke(ee,"text-xs","text-sm")}}},select:{component:pt,props:{class:{input:"bg-white p-2",description:Ke(ee,"text-xs","text-sm")}}},radio:{component:ll,props:{class:{description:Ke(ee,"text-xs","text-sm")}}},checkbox:{component:kn,props:{class:{description:Ke(ee,"text-xs","text-sm")}}}},It=(m,U,re)=>{let{component:de,props:he}=Cn[U]||{component:null,props:{}};return he={...re||{},...he,...Et()[m]||{}},he.rows??(he.rows=1),{component:de,props:he}};let an;function St(m){c=m,me.set(c)}function Ot(m){f=m,ce.set(f)}function Rt(m){f=m,ce.set(f)}function Tt(m,U){t.$$.not_equal(u[U],m)&&(u[U]=m,ge.set(u))}function Lt(m,U){t.$$.not_equal(u[U],m)&&(u[U]=m,ge.set(u))}function Mt(m,U){t.$$.not_equal(u[U],m)&&(u[U]=m,ge.set(u))}function Dt(m){t.$$.not_equal(u.hidden,m)&&(u.hidden=m,ge.set(u))}function jt(m){r=m,Te.set(r)}function Kt(m){ue[m?"unshift":"push"](()=>{an=m,n(24,an)})}return t.$$set=m=>{"debug"in m&&n(38,b=m.debug),"class"in m&&n(1,E=m.class),"buttonBoxClass"in m&&n(2,v=m.buttonBoxClass),"fieldsetBoxClass"in m&&n(3,S=m.fieldsetBoxClass),"fieldsetDescriptionClass"in m&&n(4,O=m.fieldsetDescriptionClass),"selectInputClass"in m&&n(39,q=m.selectInputClass),"notifications"in m&&n(40,G=m.notifications),"acp"in m&&n(41,x=m.acp),"store"in m&&g(n(5,L=m.store)),"key"in m&&n(0,M=m.key),"builder"in m&&n(42,B=m.builder),"typesConfig"in m&&n(43,se=m.typesConfig),"afterEdit"in m&&n(45,D=m.afterEdit),"afterClose"in m&&n(46,le=m.afterClose),"afterRemove"in m&&n(47,J=m.afterRemove),"showButtonEdit"in m&&n(6,fe=m.showButtonEdit),"showButtonClose"in m&&n(7,ke=m.showButtonClose),"showButtonRemove"in m&&n(8,be=m.showButtonRemove),"showIsSaving"in m&&n(9,Z=m.showIsSaving),"buttonsClass"in m&&n(10,w=m.buttonsClass),"buttonsVariant"in m&&n(11,W=m.buttonsVariant),"tooltipGetAppendChildTarget"in m&&n(12,ae=m.tooltipGetAppendChildTarget),"size"in m&&n(13,ee=m.size),"t"in m&&n(14,z=m.t),"allowClassProp"in m&&n(48,N=m.allowClassProp)},t.$$.update=()=>{var m,U,re,de,he,Nn,zn;t.$$.dirty[1]&4096&&n(20,l=[Rl,...se].sort((Fe,ze)=>{const Qe=[Fe.optgroup||"",Fe.label||Fe.value].join(" "),$e=[ze.optgroup||"",ze.label||ze.value].join(" ");return Qe.localeCompare($e)})),t.$$.dirty[0]&1048576&&n(50,i=l.reduce((Fe,ze)=>(Fe.set(ze.value,{label:ze.label||ze.value,description:ze.description,props:Ee(ze.props||[]).reduce((Qe,$e)=>(Qe.set($e.name,$e),Qe),new Map),allowInnerBlocks:(ze==null?void 0:ze.allowInnerBlocks)||{value:!0,hidden:!1}}),Fe),new Map([["html",{value:""}],["style",{value:""}]]))),t.$$.dirty[0]&1|t.$$.dirty[1]&2048&&(B==null||B.setHighlightedNodeKey(M||null)),t.$$.dirty[0]&8388608&&n(51,s=We.factory(k.data||"",!0)),t.$$.dirty[0]&1|t.$$.dirty[1]&1048576&&n(19,o=s.find(M)),t.$$.dirty[0]&524288&&o&&(_("NODE",o.value),ie(ce,f=((m=o.value)==null?void 0:m.type)||"default",f),ie(me,c=((U=o.value)==null?void 0:U.label)||"",c),ie(ge,u=((re=o.value)==null?void 0:re.props)||{},u),ie(Te,r=!!((de=o.value)!=null&&de.allowInnerBlocks),r)),t.$$.dirty[0]&2097152&&u.hidden===void 0&&ie(ge,u.hidden=!1,u),t.$$.dirty[0]&4194304|t.$$.dirty[1]&524288&&f&&n(18,_e=i.get(f)),t.$$.dirty[0]&262144&&_("typeConfig",_e),t.$$.dirty[0]&524289|t.$$.dirty[1]&262144&&o&&!Ve[M]&&(_("NOT SEEN",o.value),n(49,Ve[M]=o.value.type,Ve),ie(ge,u=wn(o.value.props||{},!1),u)),t.$$.dirty[0]&7077889|t.$$.dirty[1]&262144&&o&&Ve[M]!==f&&(_(`SWITCHING TYPE FROM '${o.value.type}' TO '${f}' FOR ${M}`),n(49,Ve[M]=f,Ve),ie(ge,u=wn(u,!0),u),((he=_e==null?void 0:_e.allowInnerBlocks)==null?void 0:he.value)!==void 0&&(_("Setting 'allowInnerBlocks' from config to ",!!((Nn=_e==null?void 0:_e.allowInnerBlocks)!=null&&Nn.value)),ie(Te,r=!!((zn=_e==null?void 0:_e.allowInnerBlocks)!=null&&zn.value),r)))},[M,E,v,S,O,L,fe,ke,be,Z,w,W,ae,ee,z,Ne,Ie,Se,_e,o,l,u,f,k,an,r,c,ce,me,ge,Te,vn,Nt,zt,Bt,Ke,Cn,It,b,q,G,x,B,se,I,D,le,J,N,Ve,i,s,St,Ot,Rt,Tt,Lt,Mt,Dt,jt,Kt]}class Zl extends ye{constructor(e){super(),Ce(this,e,Fl,Jl,pe,{debug:38,class:1,buttonBoxClass:2,fieldsetBoxClass:3,fieldsetDescriptionClass:4,selectInputClass:39,notifications:40,acp:41,store:5,key:0,builder:42,typesConfig:43,setKey:44,afterEdit:45,afterClose:46,afterRemove:47,showButtonEdit:6,showButtonClose:7,showButtonRemove:8,showIsSaving:9,buttonsClass:10,buttonsVariant:11,tooltipGetAppendChildTarget:12,size:13,t:14,allowClassProp:48,close:15,openRawEditor:16,remove:17},null,[-1,-1,-1])}get setKey(){return this.$$.ctx[44]}get close(){return this.$$.ctx[15]}get openRawEditor(){return this.$$.ctx[16]}get remove(){return this.$$.ctx[17]}}je("content-builder");const Gl={type:"default",label:"",props:{},allowInnerBlocks:!0},Ul=(t=null,e={})=>{const n=(..._)=>{var E;return(E=e.logger)==null?void 0:E.apply(null,_)};let l=new We(new Ze({type:"__root__"}));n("initialDump",t),t&&l.restore(t);const i=rn(0),s=rn(""),o=rn(!1),a=Ut([i,s,o],([_,E,v])=>({size:l.size(),data:l.toJSON(),error:E,isSaving:v})),r=()=>i.set(Date.now()),u=()=>Vt(a).size,f=async()=>{try{o.set(!0),s.set(""),typeof e.save=="function"&&await e.save(l.dump())}catch(_){s.set(`${_}`)}finally{o.set(!1)}},c=(_,E)=>{try{s.set("");const v=l.find(_||l.root.key);if(v)E??(E={...e.defaultNodeValue||Gl}),E.label||(E.label=`block #${u()}`),v.appendChild(E),r(),f();else throw new Error(`Parent node (key "${_}") not found`)}catch(v){s.set(`${v}`)}},k=_=>{try{s.set(""),l.remove(_)&&f()}catch(E){s.set(`${E}`)}},d=_=>{var E;try{s.set("");const v=l.find(_);if(!v)throw new Error(`Source node (key "${_}") not found`);l.copy(v.key,(E=v==null?void 0:v.parent)==null?void 0:E.key)&&f()}catch(v){s.set(`${v}`)}},g=(_,E,v=0)=>{var S,O;try{n("move",_,E,v),s.set(""),_===E?(S=l.find(_))==null||S.moveSiblingIndex(v):(O=l.move(_,E))==null||O.moveSiblingIndex(v),f()}catch(q){s.set(`${q}`)}},h=(_,E)=>{try{if(n("edit",_,E),s.set(""),typeof E=="string")try{E=JSON.parse(E)}catch{throw new TypeError("Invalid JSON data. Cannot edit.")}if(!E)return;const v=l.find(_);if(!v)throw new Error(`Node "${_}" not found!`);v.value=E,f()}catch(v){s.set(`${v}`)}},b=()=>{r(),f()};return{subscribe:a.subscribe,get:a.get,add:c,duplicate:d,move:g,remove:k,edit:h,resetError:()=>s.set(""),save:b,restore:_=>{l.restore(_),b()}}};function Xl(t){let e;return{c(){e=Je("Cancel")},m(n,l){R(n,e,l)},d(n){n&&T(e)}}}function ft(t){let e,n;return e=new Pe({props:{type:"button",variant:"",class:"min-w-24 flex justify-center",$$slots:{default:[Yl]},$$scope:{ctx:t}}}),e.$on("click",t[9]),{c(){H(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,i){const s={};i&4112&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){P(e,l)}}}function Yl(t){let e,n;return{c(){e=new Re(!1),n=oe(),e.a=n},m(l,i){e.m(t[4],l,i),R(l,n,i)},p(l,i){i&16&&e.p(l[4])},d(l){l&&(T(n),e.d())}}}function Ql(t){let e,n;return{c(){e=new Re(!1),n=oe(),e.a=n},m(l,i){e.m(t[3],l,i),R(l,n,i)},p(l,i){i&8&&e.p(l[3])},d(l){l&&(T(n),e.d())}}}function $l(t){let e,n,l,i,s,o;n=new Pe({props:{variant:"flat",class:"min-w-24 flex justify-center",$$slots:{default:[Xl]},$$scope:{ctx:t}}}),n.$on("click",t[8]);let a=t[2]&&ft(t);return s=new Pe({props:{variant:"primary",class:"min-w-24 flex justify-center",$$slots:{default:[Ql]},$$scope:{ctx:t}}}),s.$on("click",t[10]),{c(){e=j("footer"),H(n.$$.fragment),l=A(),a&&a.c(),i=A(),H(s.$$.fragment),C(e,"class","w-full min-h-14 flex items-center justify-end px-4 sm:px-8 transition-all space-x-4 bg-neutral-200 ")},m(r,u){R(r,e,u),V(n,e,null),K(e,l),a&&a.m(e,null),K(e,i),V(s,e,null),o=!0},p(r,[u]){const f={};u&4096&&(f.$$scope={dirty:u,ctx:r}),n.$set(f),r[2]?a?(a.p(r,u),u&4&&p(a,1)):(a=ft(r),a.c(),p(a,1),a.m(e,i)):a&&(Y(),y(a,1,1,()=>{a=null}),Q());const c={};u&4104&&(c.$$scope={dirty:u,ctx:r}),s.$set(c)},i(r){o||(p(n.$$.fragment,r),p(a),p(s.$$.fragment,r),o=!0)},o(r){y(n.$$.fragment,r),y(a),y(s.$$.fragment,r),o=!1},d(r){r&&T(e),P(n),a&&a.d(),P(s)}}}function xl(t,e,n){let l;Oe(t,un,h=>n(7,l=h));const i=je("NonFieldModalFooter");let{onCancel:s}=e,{onOK:o}=e,{onSave:a=null}=e,{okLabel:r="Save &amp; close"}=e,{saveLabel:u="Save"}=e,{allowCtrlSave:f=!0}=e;const c=h=>{if(typeof h=="function")return h();i.warn("Cannot execute. Not a function")};Pt(()=>{l.includes(a)&&(l.splice(l.indexOf(a),1),ie(un,l=[...l],l))});const k=()=>c(s),d=()=>c(a),g=()=>c(o);return t.$$set=h=>{"onCancel"in h&&n(0,s=h.onCancel),"onOK"in h&&n(1,o=h.onOK),"onSave"in h&&n(2,a=h.onSave),"okLabel"in h&&n(3,r=h.okLabel),"saveLabel"in h&&n(4,u=h.saveLabel),"allowCtrlSave"in h&&n(6,f=h.allowCtrlSave)},t.$$.update=()=>{t.$$.dirty&196&&f&&typeof a=="function"&&!l.includes(a)&&ie(un,l=[...l,a],l)},[s,o,a,r,u,c,f,l,k,d,g]}class ei extends ye{constructor(e){super(),Ce(this,e,xl,$l,pe,{onCancel:0,onOK:1,onSave:2,okLabel:3,saveLabel:4,allowCtrlSave:6})}}function ni(t){let e,n;const l=t[1].default,i=hn(l,t,t[0],null);return{c(){e=j("div"),i&&i.c(),C(e,"class","w-full min-h-14 flex items-center justify-center bg-neutral-200 px-4 sm:px-8 transition-all font-semibold ")},m(s,o){R(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&bn(i,l,s,s[0],n?gn(l,s[0],o,null):mn(s[0]),null)},i(s){n||(p(i,s),n=!0)},o(s){y(i,s),n=!1},d(s){s&&T(e),i&&i.d(s)}}}function ti(t,e,n){let{$$slots:l={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,l]}class li extends ye{constructor(e){super(),Ce(this,e,ti,ni,pe,{})}}function ii(t){let e;return{c(){e=Je("Content Builder")},m(n,l){R(n,e,l)},d(n){n&&T(e)}}}function si(t){var h;let e,n,l,i,s,o,a,r,u,f=((h=t[14])==null?void 0:h.error)&&dt(t),c={store:t[11],disabled:ui,acp:Ln,notifications:t[2],debug:!1,onNodeEditRequest:t[19],class:"p-4"};l=new Ol({props:c}),t[20](l);let k=t[14].size>1&&ct(t),d=!t[10]&&_t(),g={notifications:t[2],acp:Ln,store:t[11],builder:t[8],class:"p-4",t:t[22],fieldsetBoxClass:"text-sm border-neutral-300",showButtonClose:!1,size:"sm",buttonsVariant:"flat",buttonsClass:"bg-neutral-300 py-1 px-5",typesConfig:t[15](t[13].data)};return r=new Zl({props:g}),t[23](r),{c(){e=j("div"),f&&f.c(),n=A(),H(l.$$.fragment),i=A(),k&&k.c(),s=A(),o=j("div"),d&&d.c(),a=A(),H(r.$$.fragment),C(e,"class","overflow-y-auto"),C(o,"class","bg-neutral-100 overflow-y-auto")},m(b,_){R(b,e,_),f&&f.m(e,null),K(e,n),V(l,e,null),K(e,i),k&&k.m(e,null),R(b,s,_),R(b,o,_),d&&d.m(o,null),K(o,a),V(r,o,null),t[24](o),u=!0},p(b,_){var S;(S=b[14])!=null&&S.error?f?f.p(b,_):(f=dt(b),f.c(),f.m(e,n)):f&&(f.d(1),f=null);const E={};_&2048&&(E.store=b[11]),_&4&&(E.notifications=b[2]),_&1536&&(E.onNodeEditRequest=b[19]),l.$set(E),b[14].size>1?k?(k.p(b,_),_&16384&&p(k,1)):(k=ct(b),k.c(),p(k,1),k.m(e,null)):k&&(Y(),y(k,1,1,()=>{k=null}),Q()),b[10]?d&&(d.d(1),d=null):d||(d=_t(),d.c(),d.m(o,a));const v={};_&4&&(v.notifications=b[2]),_&2048&&(v.store=b[11]),_&256&&(v.builder=b[8]),_&256&&(v.t=b[22]),_&8192&&(v.typesConfig=b[15](b[13].data)),r.$set(v)},i(b){u||(p(l.$$.fragment,b),p(k),p(r.$$.fragment,b),u=!0)},o(b){y(l.$$.fragment,b),y(k),y(r.$$.fragment,b),u=!1},d(b){b&&(T(e),T(s),T(o)),f&&f.d(),t[20](null),P(l),k&&k.d(),d&&d.d(),t[23](null),P(r),t[24](null)}}}function oi(t){let e,n;return e=new Yt({}),{c(){H(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p:$,i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){P(e,l)}}}function dt(t){let e,n=t[14].error+"",l;return{c(){e=j("code"),l=Je(n),C(e,"class","text-red-500 text-sm block")},m(i,s){R(i,e,s),K(e,l)},p(i,s){s&16384&&n!==(n=i[14].error+"")&&Xe(l,n)},d(i){i&&T(e)}}}function ct(t){let e,n,l;return n=new Pe({props:{size:"sm",type:"button",variant:"flat",class:"bg-neutral-200",$$slots:{default:[ai]},$$scope:{ctx:t}}}),n.$on("click",t[21]),{c(){e=j("div"),H(n.$$.fragment),C(e,"class","p-4 pt-0")},m(i,s){R(i,e,s),V(n,e,null),l=!0},p(i,s){const o={};s&1073741824&&(o.$$scope={dirty:s,ctx:i}),n.$set(o)},i(i){l||(p(n.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),l=!1},d(i){i&&T(e),P(n)}}}function ai(t){let e,n=kt({size:16})+"",l,i;return{c(){e=new Re(!1),l=A(),i=j("span"),i.textContent="Add new content block",e.a=l,C(i,"class","")},m(s,o){e.m(n,s,o),R(s,l,o),R(s,i,o)},p:$,d(s){s&&(e.d(),T(l),T(i))}}}function _t(t){let e;return{c(){e=j("div"),e.textContent="Click on the content_block to edit.",C(e,"class","p-4 text-sm opacity-50")},m(n,l){R(n,e,l)},d(n){n&&T(e)}}}function ri(t){let e,n,l,i,s,o,a,r,u;n=new li({props:{$$slots:{default:[ii]},$$scope:{ctx:t}}});const f=[oi,si],c=[];function k(d,g){return d[13].isFetching?0:1}return s=k(t),o=c[s]=f[s](t),r=new ei({props:{onCancel:t[3],onOK:t[25],onSave:t[26]}}),{c(){e=j("div"),H(n.$$.fragment),l=A(),i=j("div"),o.c(),a=A(),H(r.$$.fragment),C(i,"class","flex-1 w-full grid grid-cols-1 sm:grid-cols-2 overflow-hidden"),C(e,"class","absolute inset-0 flex flex-col items-center justify-center")},m(d,g){R(d,e,g),V(n,e,null),K(e,l),K(e,i),c[s].m(i,null),K(e,a),V(r,e,null),u=!0},p(d,[g]){const h={};g&1073741824&&(h.$$scope={dirty:g,ctx:d}),n.$set(h);let b=s;s=k(d),s===b?c[s].p(d,g):(Y(),y(c[b],1,1,()=>{c[b]=null}),Q(),o=c[s],o?o.p(d,g):(o=c[s]=f[s](d),o.c()),p(o,1),o.m(i,null));const _={};g&8&&(_.onCancel=d[3]),g&4153&&(_.onOK=d[25]),g&4145&&(_.onSave=d[26]),r.$set(_)},i(d){u||(p(n.$$.fragment,d),p(o),p(r.$$.fragment,d),u=!0)},o(d){y(n.$$.fragment,d),y(o),y(r.$$.fragment,d),u=!1},d(d){d&&T(e),P(n),c[s].d(),P(r)}}}let ui=!1;function fi(t,e,n){let l,i,s,o=$,a=()=>(o(),o=Ae(E,w=>n(12,s=w)),E),r,u=$,f=()=>(u(),u=Ae(i,w=>n(13,r=w)),i),c,k=$,d=()=>(k(),k=Ae(l,w=>n(14,c=w)),l);t.$$.on_destroy.push(()=>o()),t.$$.on_destroy.push(()=>u()),t.$$.on_destroy.push(()=>k()),je("ContentBuilder"),Ue();let{params:g}=e,{name:h}=e,{attrs:b}=e,{model:_}=e,{formData:E}=e;a();let{modalNotifs:v}=e,{modalClose:S}=e,{save:O}=e,q,G;In(()=>{n(5,G=s[h])});let x,L,M;const B=w=>`${w}`.startsWith("_")?w:`_${w}`,se=w=>(w||[]).map(W=>{var ae,ee;return{value:W.value,label:W.label,description:W.description,optgroup:W.optgroup,props:(W.props||[]).map(z=>({name:z.name,type:z.type,inputType:z.inputType,value:z.value,inputProps:z.inputProps||{}})),allowInnerBlocks:{value:!!((ae=W==null?void 0:W.allowInnerBlocks)!=null&&ae.value),hidden:!!((ee=W==null?void 0:W.allowInnerBlocks)!=null&&ee.hidden)}}}),I=async(w,W)=>(n(10,M=w),L==null||L.setKey(w),!0);function D(w){ue[w?"unshift":"push"](()=>{x=w,n(8,x)})}const le=()=>l.add(null),J=(...w)=>x==null?void 0:x.t.apply(null,w);function fe(w){ue[w?"unshift":"push"](()=>{L=w,n(9,L)})}function ke(w){ue[w?"unshift":"push"](()=>{q=w,n(7,q)})}const be=()=>{ie(E,s[h]=G,s),O({rightClose:!1}),S()},Z=()=>{ie(E,s[h]=G,s),O({rightClose:!1})};return t.$$set=w=>{"params"in w&&n(16,g=w.params),"name"in w&&n(0,h=w.name),"attrs"in w&&n(17,b=w.attrs),"model"in w&&n(18,_=w.model),"formData"in w&&a(n(1,E=w.formData)),"modalNotifs"in w&&n(2,v=w.modalNotifs),"modalClose"in w&&n(3,S=w.modalClose),"save"in w&&n(4,O=w.save)},t.$$.update=()=>{t.$$.dirty&32&&d(n(11,l=Ul(G,{save:async w=>{n(5,G=w)}}))),t.$$.dirty&196608&&f(n(6,i=Xt(b.content_builder_types_config_entity||`_content_builder${B(g==null?void 0:g.entity)}_`,1e3))),t.$$.dirty&64&&In(()=>i.fetch())},[h,E,v,S,O,G,i,q,x,L,M,l,s,r,c,se,g,b,_,I,D,le,J,fe,ke,be,Z]}class mi extends ye{constructor(e){super(),Ce(this,e,fi,ri,pe,{params:16,name:0,attrs:17,model:18,formData:1,modalNotifs:2,modalClose:3,save:4})}}export{mi as default};

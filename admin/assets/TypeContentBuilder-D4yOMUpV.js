var Dt=Object.defineProperty;var jt=(t,e,n)=>e in t?Dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>(jt(t,typeof e!="symbol"?e+"":e,n),n);import{S as ze,i as Be,s as ve,ab as Kt,z as j,C as V,v as C,X as nn,b as R,w as K,E as ne,M as De,Q as He,a as p,g as $,t as y,c as x,d as T,r as on,T as Ue,o as J,D as P,p as W,q as F,I as st,J as tn,U as X,e as se,A as at,W as ue,$ as Ne,a0 as Me,n as Y,a4 as Oe,B as Ae,k as Je,l as Xe,K as rt,N as ut,O as ft,P as dt,a6 as ie,H as Re,m as kn,h as vn,a5 as qt,a9 as At,Z as wn}from"./index-78E-VoOI.js";import{c as je}from"./index-D_vEyJyp.js";import{O as Ht,Q as dn,t as le,T as ct,U as yn,e as Ge,V as _t,G as Le,W as Ye,X as Pt,Y as Vt,a as ht,Z as Jt,_ as Cn,$ as Wt,L as ln,a0 as bt,a1 as cn,a2 as Ft,B as Ve,D as Nn,E as zn,a3 as an,a4 as Zt,a5 as rn,a6 as Gt,d as Bn,f as Ut}from"./App-BIb8bTIk.js";import{i as Xt}from"./iconFeatherTrash2-pC5ltAhM.js";function En(t){let e,n,l;return n=new ct({props:{thc:t[2],forceAsHtml:!0}}),{c(){e=j("label"),J(n.$$.fragment),C(e,"for",t[16]),C(e,"class",t[12]),P(e,"cursor-pointer",!t[6]),P(e,"cursor-not-allowed",t[6])},m(i,o){R(i,e,o),W(n,e,null),l=!0},p(i,o){const s={};o[0]&4&&(s.thc=i[2]),n.$set(s),(!l||o[0]&4096)&&C(e,"class",i[12]),(!l||o[0]&4160)&&P(e,"cursor-pointer",!i[6]),(!l||o[0]&4160)&&P(e,"cursor-not-allowed",i[6])},i(i){l||(p(n.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),l=!1},d(i){i&&T(e),F(n)}}}function In(t){let e,n=t[9].message+"",l,i;return{c(){e=j("div"),C(e,"class",t[11])},m(o,s){R(o,e,s),e.innerHTML=n,i=!0},p(o,s){(!i||s[0]&512)&&n!==(n=o[9].message+"")&&(e.innerHTML=n),(!i||s[0]&2048)&&C(e,"class",o[11])},i(o){i||(o&&st(()=>{i&&(l||(l=tn(e,yn,{duration:150},!0)),l.run(1))}),i=!0)},o(o){o&&(l||(l=tn(e,yn,{duration:150},!1)),l.run(0)),i=!1},d(o){o&&T(e),o&&l&&l.end()}}}function Sn(t){let e,n,l,i,o;return n=new ct({props:{thc:t[4],forceAsHtml:!0}}),{c(){e=j("div"),J(n.$$.fragment),C(e,"class",t[10]),P(e,"cursor-pointer",!t[6]),P(e,"cursor-not-allowed",t[6])},m(s,a){R(s,e,a),W(n,e,null),l=!0,i||(o=ne(e,"click",t[36]),i=!0)},p(s,a){const r={};a[0]&16&&(r.thc=s[4]),n.$set(r),(!l||a[0]&1024)&&C(e,"class",s[10]),(!l||a[0]&1088)&&P(e,"cursor-pointer",!s[6]),(!l||a[0]&1088)&&P(e,"cursor-not-allowed",s[6])},i(s){l||(p(n.$$.fragment,s),l=!0)},o(s){y(n.$$.fragment,s),l=!1},d(s){s&&T(e),F(n),i=!1,o()}}}function Yt(t){var E;let e,n,l,i=!1,o,s,a,r,u,f,c,k,d,g,h=t[2]&&En(t),b=t[9]&&!((E=t[9])!=null&&E.valid)&&In(t),_=t[4]&&Sn(t);return k=Kt(t[35][0]),{c(){e=j("div"),n=j("div"),l=j("input"),a=V(),r=j("div"),h&&h.c(),u=V(),b&&b.c(),f=V(),_&&_.c(),C(l,"id",t[16]),C(l,"type","radio"),l.__value=t[1],nn(l,l.__value),C(l,"aria-describedby",o=t[4]?t[17]:void 0),C(l,"name",t[3]),C(l,"class",t[13]),l.disabled=t[6],l.required=t[7],C(l,"tabindex",t[5]),C(n,"class","flex h-6 items-center ml-1"),C(r,"class","ml-3 w-full"),C(e,"class",t[14]),k.p(l)},m(v,S){R(v,e,S),K(e,n),K(n,l),l.checked=l.__value===t[0],K(e,a),K(e,r),h&&h.m(r,null),K(r,u),b&&b.m(r,null),K(r,f),_&&_.m(r,null),c=!0,d||(g=[ne(l,"change",t[34]),De(s=Ht.call(null,l,t[8]?{...t[8]===!0?{}:t[8],setValidationResult:t[15]}:void 0)),ne(l,"blur",t[21]),ne(l,"change",t[22]),ne(l,"click",t[23]),ne(l,"focus",t[24]),ne(l,"input",t[25]),ne(l,"keydown",t[26]),ne(l,"keyup",t[27]),ne(l,"touchstart",t[28],{passive:!0}),ne(l,"touchend",t[29],{passive:!0}),ne(l,"touchmove",t[30],{passive:!0}),ne(l,"touchcancel",t[31]),ne(l,"mouseenter",t[32]),ne(l,"mouseleave",t[33])],d=!0)},p(v,S){var O;(!c||S[0]&2)&&(l.__value=v[1],nn(l,l.__value),i=!0),(!c||S[0]&16&&o!==(o=v[4]?v[17]:void 0))&&C(l,"aria-describedby",o),(!c||S[0]&8)&&C(l,"name",v[3]),(!c||S[0]&8192)&&C(l,"class",v[13]),(!c||S[0]&64)&&(l.disabled=v[6]),(!c||S[0]&128)&&(l.required=v[7]),(!c||S[0]&32)&&C(l,"tabindex",v[5]),(i||S[0]&1)&&(l.checked=l.__value===v[0]),s&&He(s.update)&&S[0]&256&&s.update.call(null,v[8]?{...v[8]===!0?{}:v[8],setValidationResult:v[15]}:void 0),v[2]?h?(h.p(v,S),S[0]&4&&p(h,1)):(h=En(v),h.c(),p(h,1),h.m(r,u)):h&&($(),y(h,1,1,()=>{h=null}),x()),v[9]&&!((O=v[9])!=null&&O.valid)?b?(b.p(v,S),S[0]&512&&p(b,1)):(b=In(v),b.c(),p(b,1),b.m(r,f)):b&&($(),y(b,1,1,()=>{b=null}),x()),v[4]?_?(_.p(v,S),S[0]&16&&p(_,1)):(_=Sn(v),_.c(),p(_,1),_.m(r,null)):_&&($(),y(_,1,1,()=>{_=null}),x()),(!c||S[0]&16384)&&C(e,"class",v[14])},i(v){c||(p(h),p(b),p(_),c=!0)},o(v){y(h),y(b),y(_),c=!1},d(v){v&&T(e),h&&h.d(),b&&b.d(),_&&_.d(),k.r(),d=!1,on(g)}}}const un={box:"flex items-start",label:"block w-full",input:`
			size-4 rounded-full
			bg-gray-100
			border-gray-300
			shadow-sm
			text-stuic-primary
			cursor-pointer
			focus:border-stuic-primary
			focus:ring-4
			focus:ring-offset-0
			focus:ring-stuic-primary
			focus:ring-opacity-20
			disabled:cursor-not-allowed
		`,validationMessage:"text-xs text-stuic-primary tracking-tight",description:"text-sm opacity-50"},fn={sm:{label:"text-sm"},md:{label:"text-base"},lg:{label:"text-base font-bold"}};function Qt(t,e,n){let l,i,o,s,a;const r=Ue();let{class:u={}}=e,{classBySize:f={}}=e,{size:c="md"}=e,{value:k}=e,{group:d}=e,{label:g}=e,{name:h}=e,{description:b=""}=e,{tabindex:_=0}=e,{disabled:E=!1}=e,{required:v=!1}=e,{validate:S=void 0}=e,O;const q=N=>{n(9,O=N),r("validation",O)};let G=dn(),Q=dn();const L=(N,Ee="")=>{var we,Ie,Se,ce,me;return[(un==null?void 0:un[N])||"",((we=fn==null?void 0:fn[c])==null?void 0:we[N])||"",((Ie=qe==null?void 0:qe.class)==null?void 0:Ie[N])||"",((ce=(Se=qe==null?void 0:qe.classBySize)==null?void 0:Se[c])==null?void 0:ce[N])||"",Ee||"",(u==null?void 0:u[N])||"",((me=f==null?void 0:f[c])==null?void 0:me[N])||""]},M=[[]];function B(N){X.call(this,t,N)}function oe(N){X.call(this,t,N)}function I(N){X.call(this,t,N)}function D(N){X.call(this,t,N)}function te(N){X.call(this,t,N)}function A(N){X.call(this,t,N)}function fe(N){X.call(this,t,N)}function pe(N){X.call(this,t,N)}function be(N){X.call(this,t,N)}function Z(N){X.call(this,t,N)}function w(N){X.call(this,t,N)}function H(N){X.call(this,t,N)}function ae(N){X.call(this,t,N)}function ee(){d=this.__value,n(0,d)}const z=()=>!E&&n(0,d=k);return t.$$set=N=>{"class"in N&&n(18,u=N.class),"classBySize"in N&&n(19,f=N.classBySize),"size"in N&&n(20,c=N.size),"value"in N&&n(1,k=N.value),"group"in N&&n(0,d=N.group),"label"in N&&n(2,g=N.label),"name"in N&&n(3,h=N.name),"description"in N&&n(4,b=N.description),"tabindex"in N&&n(5,_=N.tabindex),"disabled"in N&&n(6,E=N.disabled),"required"in N&&n(7,v=N.required),"validate"in N&&n(8,S=N.validate)},t.$$.update=()=>{t.$$.dirty[0]&512&&n(13,i=le(L("input",O&&!O.valid?L("invalid").join(" "):"")))},n(14,l=le(L("box"))),n(12,o=le(L("label"))),n(11,s=le(L("validationMessage"))),n(10,a=le(L("description"))),[d,k,g,h,b,_,E,v,S,O,a,s,o,i,l,q,G,Q,u,f,c,B,oe,I,D,te,A,fe,pe,be,Z,w,H,ae,ee,M,z]}class $t extends ze{constructor(e){super(),Be(this,e,Qt,Yt,ve,{class:18,classBySize:19,size:20,value:1,group:0,label:2,name:3,description:4,tabindex:5,disabled:6,required:7,validate:8},null,[-1,-1])}}function On(t,e,n){const l=t.slice();return l[25]=e[n],l[27]=n,l}function Rn(t){let e,n,l,i=Ge(t[9]),o=[];for(let a=0;a<i.length;a+=1)o[a]=Tn(On(t,i,a));const s=a=>y(o[a],1,1,()=>{o[a]=null});return{c(){e=j("div");for(let a=0;a<o.length;a+=1)o[a].c();C(e,"class",n=le(`gap-y-2 grid ${t[0].group||""}`))},m(a,r){R(a,e,r);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);l=!0},p(a,r){if(r&1015){i=Ge(a[9]);let u;for(u=0;u<i.length;u+=1){const f=On(a,i,u);o[u]?(o[u].p(f,r),p(o[u],1)):(o[u]=Tn(f),o[u].c(),p(o[u],1),o[u].m(e,null))}for($(),u=i.length;u<o.length;u+=1)s(u);x()}(!l||r&1&&n!==(n=le(`gap-y-2 grid ${a[0].group||""}`)))&&C(e,"class",n)},i(a){if(!l){for(let r=0;r<i.length;r+=1)p(o[r]);l=!0}},o(a){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)y(o[r]);l=!1},d(a){a&&T(e),at(o,a)}}}function Tn(t){let e,n,l;function i(s){t[10](s)}let o={name:t[1],label:t[25].label,value:t[25].value||t[25].label,description:t[25].description,class:t[0],classBySize:t[4],disabled:t[6],tabindex:t[8],required:t[7],size:t[5]};return t[2]!==void 0&&(o.group=t[2]),e=new $t({props:o}),ue.push(()=>Ne(e,"group",i)),e.$on("blur",t[11]),e.$on("change",t[12]),e.$on("click",t[13]),e.$on("focus",t[14]),e.$on("input",t[15]),e.$on("keydown",t[16]),e.$on("keyup",t[17]),e.$on("touchstart",t[18]),e.$on("touchend",t[19]),e.$on("touchmove",t[20]),e.$on("touchcancel",t[21]),e.$on("mouseenter",t[22]),e.$on("mouseleave",t[23]),{c(){J(e.$$.fragment)},m(s,a){W(e,s,a),l=!0},p(s,a){const r={};a&2&&(r.name=s[1]),a&512&&(r.label=s[25].label),a&512&&(r.value=s[25].value||s[25].label),a&512&&(r.description=s[25].description),a&1&&(r.class=s[0]),a&16&&(r.classBySize=s[4]),a&64&&(r.disabled=s[6]),a&256&&(r.tabindex=s[8]),a&128&&(r.required=s[7]),a&32&&(r.size=s[5]),!n&&a&4&&(n=!0,r.group=s[2],Me(()=>n=!1)),e.$set(r)},i(s){l||(p(e.$$.fragment,s),l=!0)},o(s){y(e.$$.fragment,s),l=!1},d(s){F(e,s)}}}function xt(t){let e,n,l=t[3].length&&Rn(t);return{c(){l&&l.c(),e=se()},m(i,o){l&&l.m(i,o),R(i,e,o),n=!0},p(i,[o]){i[3].length?l?(l.p(i,o),o&8&&p(l,1)):(l=Rn(i),l.c(),p(l,1),l.m(e.parentNode,e)):l&&($(),y(l,1,1,()=>{l=null}),x())},i(i){n||(p(l),n=!0)},o(i){y(l),n=!1},d(i){i&&T(e),l&&l.d(i)}}}const xe=()=>({group:"",box:"",label:"",input:"",invalid:"",validationMessage:"",description:""});class qe{}Ce(qe,"class",xe()),Ce(qe,"classBySize",{sm:xe(),md:xe(),lg:xe()});function el(t,e,n){je("FieldRadio");let{options:l=[]}=e,{class:i={}}=e,{classBySize:o={}}=e,{size:s="md"}=e,{name:a=""}=e,{value:r}=e,{disabled:u=!1}=e,{required:f=!1}=e,{tabindex:c=0}=e,k=[];function d(B){r=B,n(2,r)}function g(B){X.call(this,t,B)}function h(B){X.call(this,t,B)}function b(B){X.call(this,t,B)}function _(B){X.call(this,t,B)}function E(B){X.call(this,t,B)}function v(B){X.call(this,t,B)}function S(B){X.call(this,t,B)}function O(B){X.call(this,t,B)}function q(B){X.call(this,t,B)}function G(B){X.call(this,t,B)}function Q(B){X.call(this,t,B)}function L(B){X.call(this,t,B)}function M(B){X.call(this,t,B)}return t.$$set=B=>{"options"in B&&n(3,l=B.options),"class"in B&&n(0,i=B.class),"classBySize"in B&&n(4,o=B.classBySize),"size"in B&&n(5,s=B.size),"name"in B&&n(1,a=B.name),"value"in B&&n(2,r=B.value),"disabled"in B&&n(6,u=B.disabled),"required"in B&&n(7,f=B.required),"tabindex"in B&&n(8,c=B.tabindex)},t.$$.update=()=>{t.$$.dirty&1&&typeof i=="string"&&n(0,i={group:i}),t.$$.dirty&8&&n(9,k=l.map(B=>(typeof B=="string"&&(B={label:B}),B))),t.$$.dirty&2&&n(1,a||(a=dn()))},[i,a,r,l,o,s,u,f,c,k,d,g,h,b,_,E,v,S,O,q,G,Q,L,M]}class nl extends ze{constructor(e){super(),Be(this,e,el,xt,ve,{options:3,class:0,classBySize:4,size:5,name:1,value:2,disabled:6,required:7,tabindex:8})}}const tl=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||16}" height="${e||16}" ${o?`${o} `:""}fill="currentColor" viewBox="0 0 16 16"><path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>`},ll=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||24}" height="${e||24}" stroke-width="${i??2}" ${o?`${o} `:""}viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`},il=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||24}" height="${e||24}" stroke-width="${i??2}" ${o?`${o} `:""}viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>`},mt=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||24}" height="${e||24}" stroke-width="${i??2}" ${o?`${o} `:""}viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>`},ke=class ke{constructor(e,n=null,l=null){Ce(this,"value");Ce(this,"_parent");Ce(this,"tree");Ce(this,"_key");Ce(this,"_children",[]);Ce(this,"_readonly",!1);this.value=e,this._parent=n,this.tree=l,this._key=ke.createKey()}__setKey(e){return this._key=e,this}__setParent(e){return this._parent=e,this}__setTree(e){return this.tree=e,this}__setReadonly(e=!0){return this._readonly=e,this}__syncChildren(){const e=(n,l)=>{for(let i of n)i.__setParent(l).__setTree((l==null?void 0:l.tree)||null).__setReadonly(l==null?void 0:l.readonly),e(i.children,i)};return e(this._children,this)}get depth(){return this.path.length}get readonly(){return this._readonly}get root(){let e=this._parent,n=e;for(;e;)e=e.parent,e&&(n=e);return n}get path(){let e=this._parent,n=[];for(e&&n.push(e);e;)e=e.parent,e&&n.unshift(e);return n}get key(){return this._key}get parent(){return this._parent}get children(){return this._children}get isLeaf(){return this._children.length===0}get isRoot(){return this._parent===null}get siblings(){var e;return((e=this._parent)==null?void 0:e.children)||[]}get siblingIndex(){return this.siblings.length?this.siblings.findIndex(e=>e.key===this._key):-1}_assertNotReadonly(){if(this._readonly)throw new Error("Cannot proceed because the node is marked as readonly")}_assertSameTopRootNode(e){if(!this.isRoot&&e instanceof ke&&e.root!==this.root)throw new Error("Cannot proceed with a node from a different tree. (Use node's value instead.)")}_assertNotContains(e){if(e instanceof ke&&this.contains(e.key))throw new Error("Cannot proceed, already contains.")}_assertIsNotSiblingOf(e){if(e instanceof ke&&this.siblings.some(n=>n.key===e.key))throw new Error("Cannot proceed (is sibling of).")}toJSON(){return{key:this._key,value:this.value,children:this._children}}deepClone(){const e=JSON.parse(JSON.stringify(this.toJSON(),(i,o)=>i==="key"?ke.createKey():o)),n=new ke(e.value,this._parent);n.__setKey(e.key);const l=(i,o)=>{for(let s of i){const a=o.appendChild(s.value).__setKey(s.key);l(s.children,a)}};return l(e.children,n),n}appendChild(e,n=!0){this._assertNotReadonly(),this._assertSameTopRootNode(e),this._assertIsNotSiblingOf(e);const l=e instanceof ke?e:new ke(e,this);return l.__setParent(this),this._children.push(l),n&&this.__syncChildren(),l}removeChild(e){this._assertNotReadonly();const n=this._children.findIndex(l=>l.key===e);if(n<0)throw new Error(`Node "${e}" not found.`);return this._children.splice(n,1),this}replaceChild(e,n){this._assertNotReadonly(),this._assertSameTopRootNode(n);const l=this._children.findIndex(o=>o.key===e);if(l<0)throw new Error(`Node "${e}" not found.`);this._assertNotContains(n);const i=n instanceof ke?n:new ke(n,this);return i.__setParent(this),this._children[l]=i,this.__syncChildren(),this._children[l]}resetChildren(e=[]){return this._assertNotReadonly(),this._children=[],(e||[]).forEach(n=>this.appendChild(n,!1)),this.__syncChildren(),this}previousSibling(){if(this.siblings.length){const e=this.siblings.findIndex(n=>n.key===this._key);return this.siblings[e-1]||null}return null}nextSibling(){if(this.siblings.length){const e=this.siblings.findIndex(n=>n.key===this._key);return this.siblings[e+1]||null}return null}moveSiblingIndex(e){this._assertNotReadonly();const n=this.siblingIndex;return this.siblings.length<2||((e=Math.min(e,this.siblings.length-1))<0&&(e=Math.max(0,this.siblings.length-1+e)),this.siblings.splice(e,0,this.siblings.splice(n,1)[0])),this}contains(e){if(!e)throw new Error("Missing key");const n=l=>{for(let i of l)if(i.key===e||n(i.children))return!0;return!1};return n(this._children)}toString(){var n;let e=(n=this.value)==null?void 0:n.toString();return e==="[object Object]"&&(e=this.key),"    ".repeat(this.depth)+e}};Ce(ke,"createKey",()=>"n"+Math.random().toString(36).slice(2,10));let Ze=ke;class We{constructor(e=null,n=!1){Ce(this,"_root");Ce(this,"_readonly");this._root=e,this._readonly=n,this._root&&this._root.__setTree(this).__setReadonly(this._readonly).__syncChildren()}get readonly(){return this._readonly}__setReadonly(e=!0){return this._readonly=!!e,this._root&&this._root.__setReadonly(this._readonly).__syncChildren(),this}static factory(e,n=!1){return new We(null,n).restore(e)}appendChild(e){return this._root?this._root.appendChild(e).__setReadonly(this._readonly):(this._root=e instanceof Ze?e:new Ze(e),this._root.__setTree(this).__syncChildren(),this._root)}get root(){return this._root}*preOrderTraversal(e){if(e??(e=this._root),yield e,e==null?void 0:e.children.length)for(let n of e.children)yield*this.preOrderTraversal(n)}*postOrderTraversal(e){if(e??(e=this._root),e==null?void 0:e.children.length)for(let n of e.children)yield*this.postOrderTraversal(n);yield e}find(e){for(let n of this.preOrderTraversal())if(n.key===e)return n;return null}findBy(e,n=null){for(let l of this.preOrderTraversal())if(n&&l.value[n]!==void 0&&l.value[n]===e||!n&&l.value===e)return l;return null}findLCA(e,n){const l=this.find(e),i=this.find(n);if(!l||!i)throw new Error(`Node "${e}" and/or "${n}" not found.`);if(l===i)return l;const o=l.path.reduce((a,r)=>({...a,[r.key]:r}),{});let s=this._root;for(let a of i.path){if(!o[a.key])return s;s=o[a.key]}return s}insert(e,n){const l=this.find(e);if(l)return l.appendChild(n).__setReadonly(this._readonly);throw new Error(`Node "${e}" not found.`)}remove(e){var n;if(((n=this._root)==null?void 0:n.key)===e)return this._root=null,this;for(let l of this.preOrderTraversal())if(l.key===e&&l.parent.removeChild(e))return this;throw new Error(`Node "${e}" not found.`)}_moveOrCopy(e,n,l){const i=this.find(e);if(!i)throw new Error(`Source node "${e}" not found.`);if(l&&i.contains(n))throw new Error("Recursive reference detected. Node cannot be moved to its own descendant.");const o=this.find(n);if(!o)throw new Error(`Target node "${n}" not found.`);if(l&&o===i)throw new Error("Cannot move to self.");return l&&o===i.parent?i:l?(this.remove(i.key),o.appendChild(i).__setReadonly(this._readonly)):o.appendChild(i.deepClone()).__setReadonly(this._readonly)}move(e,n){return this._moveOrCopy(e,n,!0)}copy(e,n){return this._moveOrCopy(e,n,!1)}toJSON(){var e;return(e=this._root)==null?void 0:e.toJSON()}dump(){return JSON.stringify(this)}restore(e){let n=e;typeof e=="string"&&(n=JSON.parse(e));const l=(o,s)=>{for(let a of o){const r=s.appendChild(a.value,!1).__setTree(this).__setKey(a.key);l(a.children,r)}},i=new Ze(n.value).__setTree(this).__setKey(n.key);return l(n.children,i),this._readonly&&[...this.postOrderTraversal()].map(o=>o==null?void 0:o.__setReadonly(this._readonly)),this._root=i,this}size(e){if(e??(e=this._root),!e)return 0;const n=[...this.preOrderTraversal(e)].length;return e===this._root||n!==1||this.contains(e==null?void 0:e.key)?n:0}contains(e){var n;return!!((n=this._root)!=null&&n.contains(e))}toString(){return[...this.preOrderTraversal()].map(e=>e==null?void 0:e.toString()).join(`
`)}}const ol=t=>`${t}`.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),gt=(t,e,n=!1)=>{n&&(e=Object.entries(e).reduce((o,[s,a])=>({...o,[s.toLowerCase()]:a}),{}));let l=[];Object.keys(e).forEach(o=>l.push(ol(o)));let i=new RegExp(l.join("|"),"g"+(n?"i":""));return t.replace(i,o=>{n&&(o=o.toLowerCase());let s=typeof e[o]=="function"?e[o]():e[o];return s??""})};function Ln(t){let e,n,l,i;return{c(){e=j("div"),C(e,"class","transition-all rounded"),P(e,"bg-black",t[5]===t[1]),P(e,"h-2",t[5]!==t[1]&&t[0]===-1),P(e,"h-3",t[5]!==t[1]&&t[0]!==-1),P(e,"h-8",t[5]===t[1])},m(o,s){R(o,e,s),l||(i=De(n=_t.call(null,e,{enabled:!t[3],id:t[1],dropEffect:"move",onDrop:t[9],isDraggedOver:t[7]})),l=!0)},p(o,s){n&&He(n.update)&&s&31&&n.update.call(null,{enabled:!o[3],id:o[1],dropEffect:"move",onDrop:o[9],isDraggedOver:o[7]}),s&34&&P(e,"bg-black",o[5]===o[1]),s&35&&P(e,"h-2",o[5]!==o[1]&&o[0]===-1),s&35&&P(e,"h-3",o[5]!==o[1]&&o[0]!==-1),s&34&&P(e,"h-8",o[5]===o[1])},d(o){o&&T(e),l=!1,i()}}}function sl(t){let e,n=t[1]&&Ln(t);return{c(){n&&n.c(),e=se()},m(l,i){n&&n.m(l,i),R(l,e,i)},p(l,[i]){l[1]?n?n.p(l,i):(n=Ln(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Y,o:Y,d(l){l&&T(e),n&&n.d(l)}}}function al(t,e,n){let l,i=Y,o=()=>(i(),i=Ae(f,h=>n(4,l=h)),f),s;t.$$.on_destroy.push(()=>i());const a=Ue();je("Dropzone");let{index:r=0}=e,{id:u=""}=e,{store:f}=e;o();let{disabled:c=!1}=e;const k=Le(null);Oe(t,k,h=>n(5,s=h));const d=new We,g=(h,b)=>{var q;const _=(q=h.payload)==null?void 0:q.source,E=u;let v=r;d.restore(l.data);const S=d.find(_),O=d.find(E);(S==null?void 0:S.parent)===O?v===-1?v=0:(S==null?void 0:S.siblingIndex)>v&&v++:v++,f.move(_,E,v),a("dropped")};return t.$$set=h=>{"index"in h&&n(0,r=h.index),"id"in h&&n(1,u=h.id),"store"in h&&o(n(2,f=h.store)),"disabled"in h&&n(3,c=h.disabled)},[r,u,f,c,l,s,a,k,d,g]}class pt extends ze{constructor(e){super(),Be(this,e,al,sl,ve,{index:0,id:1,store:2,disabled:3})}}function Mn(t){let e,n;return{c(){e=j("span"),n=Je(t[1]),C(e,"class","text-xs font-mono opacity-50 mr-2")},m(l,i){R(l,e,i),K(e,n)},p(l,i){i&2&&Xe(n,l[1])},d(l){l&&T(e)}}}function rl(t){let e,n,l,i,o,s,a,r=t[0].type+"",u,f,c,k,d=t[4]&&Mn(t);return{c(){e=j("div"),n=j("div"),l=j("input"),i=V(),d&&d.c(),o=V(),s=j("button"),a=j("span"),u=Je(r),C(l,"type","text"),C(l,"class","w-full bg-transparent focus:outline-none focus:bg-gray-100 hover:bg-gray-50 focus:border-none focus:ring-0 border-none p-0 text-base ring-0 "),l.disabled=t[2],P(l,"cursor-not-allowed",t[2]),C(n,"class","flex-1 pr-2"),C(a,"class","opacity-75"),C(s,"class","text-xs font-mono rounded-full p-1 px-2 bg-gray-100 "),C(s,"type","button"),C(s,"aria-label",f=t[3]("node_edit_drag")),C(e,"class","flex items-center")},m(g,h){R(g,e,h),K(e,n),K(n,l),t[9](l),nn(l,t[0].label),K(e,i),d&&d.m(e,null),K(e,o),K(e,s),K(s,a),K(a,u),c||(k=[ne(l,"input",t[10]),ne(l,"blur",t[7]),ne(l,"keydown",t[11]),ne(s,"click",t[12])],c=!0)},p(g,[h]){h&4&&(l.disabled=g[2]),h&1&&l.value!==g[0].label&&nn(l,g[0].label),h&4&&P(l,"cursor-not-allowed",g[2]),g[4]?d?d.p(g,h):(d=Mn(g),d.c(),d.m(e,o)):d&&(d.d(1),d=null),h&1&&r!==(r=g[0].type+"")&&Xe(u,r),h&8&&f!==(f=g[3]("node_edit_drag"))&&C(s,"aria-label",f)},i:Y,o:Y,d(g){g&&T(e),t[9](null),d&&d.d(),c=!1,on(k)}}}function ul(t,e,n){je("ContentNodeValue");let{value:l}=e,{key:i}=e,{store:o}=e,{disabled:s=!1}=e,{t:a}=e,{showNodeId:r=!1}=e,{onNodeEditRequest:u}=e,f,c=l.label;const k=_=>{c!==l.label&&(o.save(),c=l.label)};function d(_){ue[_?"unshift":"push"](()=>{f=_,n(6,f)})}function g(){l.label=this.value,n(0,l)}const h=_=>{_.key==="Enter"&&(f.blur(),k())},b=async()=>u(i,l);return t.$$set=_=>{"value"in _&&n(0,l=_.value),"key"in _&&n(1,i=_.key),"store"in _&&n(8,o=_.store),"disabled"in _&&n(2,s=_.disabled),"t"in _&&n(3,a=_.t),"showNodeId"in _&&n(4,r=_.showNodeId),"onNodeEditRequest"in _&&n(5,u=_.onNodeEditRequest)},[l,i,s,a,r,u,f,k,o,d,g,h,b]}class fl extends ze{constructor(e){super(),Be(this,e,ul,rl,ve,{value:0,key:1,store:8,disabled:2,t:3,showNodeId:4,onNodeEditRequest:5})}}function dl(t){let e,n,l,i,o;const s=t[5].default,a=rt(s,t,t[4],null);return{c(){var r,u;e=j("button"),a&&a.c(),C(e,"class",n=le(`
        px-3 py-2 
        opacity-80
        text-white
        hover:underline hover:opacity-100 hover:bg-gray-700 
        ${((u=(r=t[2])==null?void 0:r.hover_control)==null?void 0:u.button)||""}
        ${t[0]}
    `)),C(e,"aria-label",t[1]),e.disabled=t[3],C(e,"type","button")},m(r,u){R(r,e,u),a&&a.m(e,null),l=!0,i||(o=[ne(e,"click",t[6]),De(Ye.call(null,e))],i=!0)},p(r,[u]){var f,c;a&&a.p&&(!l||u&16)&&ut(a,s,r,r[4],l?dt(s,r[4],u,null):ft(r[4]),null),(!l||u&5&&n!==(n=le(`
        px-3 py-2 
        opacity-80
        text-white
        hover:underline hover:opacity-100 hover:bg-gray-700 
        ${((c=(f=r[2])==null?void 0:f.hover_control)==null?void 0:c.button)||""}
        ${r[0]}
    `)))&&C(e,"class",n),(!l||u&2)&&C(e,"aria-label",r[1]),(!l||u&8)&&(e.disabled=r[3])},i(r){l||(p(a,r),l=!0)},o(r){y(a,r),l=!1},d(r){r&&T(e),a&&a.d(r),i=!1,on(o)}}}function cl(t,e,n){let{$$slots:l={},$$scope:i}=e,{class:o=""}=e,{ariaLabel:s=""}=e,{theme:a}=e,{disabled:r=!1}=e;function u(f){X.call(this,t,f)}return t.$$set=f=>{"class"in f&&n(0,o=f.class),"ariaLabel"in f&&n(1,s=f.ariaLabel),"theme"in f&&n(2,a=f.theme),"disabled"in f&&n(3,r=f.disabled),"$$scope"in f&&n(4,i=f.$$scope)},[o,s,a,r,i,l,u]}class en extends ze{constructor(e){super(),Be(this,e,cl,dl,ve,{class:0,ariaLabel:1,theme:2,disabled:3})}}function Dn(t){let e,n=JSON.stringify({dropzoneEnabled:t[1]})+"",l;return{c(){e=j("div"),l=Je(n),C(e,"class","text-xs font-mono bg-pink-100 text-pink-800/70 p-1")},m(i,o){R(i,e,o),K(e,l)},p(i,o){o&2&&n!==(n=JSON.stringify({dropzoneEnabled:i[1]})+"")&&Xe(l,n)},d(i){i&&T(e)}}}function _l(t){let e,n=t[0]&&Dn(t);return{c(){n&&n.c(),e=se()},m(l,i){n&&n.m(l,i),R(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=Dn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Y,o:Y,d(l){l&&T(e),n&&n.d(l)}}}function hl(t,e,n){let{debug:l=!1}=e,{node:i}=e,{dropzoneEnabled:o=void 0}=e;return t.$$set=s=>{"debug"in s&&n(0,l=s.debug),"node"in s&&n(2,i=s.node),"dropzoneEnabled"in s&&n(1,o=s.dropzoneEnabled)},[l,o,i]}class kt extends ze{constructor(e){super(),Be(this,e,hl,_l,ve,{debug:0,node:2,dropzoneEnabled:1})}}function jn(t,e,n){const l=t.slice();l[36]=e[n],l[40]=n;const i=l[36].key;l[37]=i;const o=!l[5]&&l[11].at(-1)===l[36].key;return l[38]=o,l}function Kn(t){var a;let e,n=[],l=new Map,i,o=Ge(((a=t[0])==null?void 0:a.children)||[]);const s=r=>r[36].key;for(let r=0;r<o.length;r+=1){let u=jn(t,o,r),f=s(u);l.set(f,n[r]=Vn(f,u))}return{c(){e=j("ol");for(let r=0;r<n.length;r+=1)n[r].c();C(e,"class","w-full"),P(e,"opacity-50",t[5]),P(e,"cursor-not-allowed",t[5])},m(r,u){R(r,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);i=!0},p(r,u){var f;u[0]&8126463&&(o=Ge(((f=r[0])==null?void 0:f.children)||[]),$(),n=Pt(n,u,s,1,r,o,l,e,Jt,Vn,null,jn),x()),(!i||u[0]&32)&&P(e,"opacity-50",r[5]),(!i||u[0]&32)&&P(e,"cursor-not-allowed",r[5])},i(r){if(!i){for(let u=0;u<o.length;u+=1)p(n[u]);i=!0}},o(r){for(let u=0;u<n.length;u+=1)y(n[u]);i=!1},d(r){r&&T(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function qn(t){var s;let e,n,l,i,o;return n=new kt({props:{node:t[0],debug:t[10],dropzoneEnabled:t[22](t[0])}}),i=new pt({props:{id:(s=t[0])==null?void 0:s.key,store:t[1],index:-1,disabled:t[5]||!t[22](t[0])}}),i.$on("dropped",t[23]),{c(){e=j("li"),J(n.$$.fragment),l=V(),J(i.$$.fragment)},m(a,r){R(a,e,r),W(n,e,null),K(e,l),W(i,e,null),o=!0},p(a,r){var c;const u={};r[0]&1&&(u.node=a[0]),r[0]&1024&&(u.debug=a[10]),r[0]&1&&(u.dropzoneEnabled=a[22](a[0])),n.$set(u);const f={};r[0]&1&&(f.id=(c=a[0])==null?void 0:c.key),r[0]&2&&(f.store=a[1]),r[0]&33&&(f.disabled=a[5]||!a[22](a[0])),i.$set(f)},i(a){o||(p(n.$$.fragment,a),p(i.$$.fragment,a),o=!0)},o(a){y(n.$$.fragment,a),y(i.$$.fragment,a),o=!1},d(a){a&&T(e),F(n),F(i)}}}function An(t){let e,n,l,i;return n=new vt({props:{node:t[36],store:t[1],hoveredKeys:t[2],t:t[3],theme:t[4],disabled:t[5],acp:t[6],showNodeId:t[8],onNodeEditRequest:t[7],highlightedNodeKey:t[9],debug:t[10]}}),{c(){e=j("div"),J(n.$$.fragment),C(e,"class",l=t[36].value.allowInnerBlocks?"":"text-red-500")},m(o,s){R(o,e,s),W(n,e,null),i=!0},p(o,s){const a={};s[0]&1&&(a.node=o[36]),s[0]&2&&(a.store=o[1]),s[0]&4&&(a.hoveredKeys=o[2]),s[0]&8&&(a.t=o[3]),s[0]&16&&(a.theme=o[4]),s[0]&32&&(a.disabled=o[5]),s[0]&64&&(a.acp=o[6]),s[0]&256&&(a.showNodeId=o[8]),s[0]&128&&(a.onNodeEditRequest=o[7]),s[0]&512&&(a.highlightedNodeKey=o[9]),s[0]&1024&&(a.debug=o[10]),n.$set(a),(!i||s[0]&1&&l!==(l=o[36].value.allowInnerBlocks?"":"text-red-500"))&&C(e,"class",l)},i(o){i||(p(n.$$.fragment,o),i=!0)},o(o){y(n.$$.fragment,o),i=!1},d(o){o&&T(e),F(n)}}}function Hn(t){let e,n,l,i,o,s,a,r,u,f,c;function k(){return t[27](t[36])}l=new en({props:{class:"rounded-bl",ariaLabel:t[3]("node_edit"),theme:t[4],disabled:t[5],$$slots:{default:[bl]},$$scope:{ctx:t}}}),l.$on("click",k);let d=t[36].value.allowInnerBlocks&&Pn(t);function g(){return t[29](t[36])}s=new en({props:{ariaLabel:t[3]("node_duplicate"),theme:t[4],disabled:t[5],$$slots:{default:[gl]},$$scope:{ctx:t}}}),s.$on("click",g);function h(){return t[30](t[36])}return r=new en({props:{ariaLabel:t[3]("node_remove"),class:"rounded-br",theme:t[4],disabled:t[5],$$slots:{default:[pl]},$$scope:{ctx:t}}}),r.$on("click",h),{c(){var b,_;e=j("div"),n=j("div"),J(l.$$.fragment),i=V(),d&&d.c(),o=V(),J(s.$$.fragment),a=V(),J(r.$$.fragment),C(n,"class","flex items-center h-full"),C(e,"class",u=le(`
						absolute leading-none
						top-[100%] -right-[3px] z-10
						bg-black
						${((_=(b=t[4])==null?void 0:b.hover_control)==null?void 0:_.box)||""}
						rounded-b
						transition-all
					`))},m(b,_){R(b,e,_),K(e,n),W(l,n,null),K(n,i),d&&d.m(n,null),K(n,o),W(s,n,null),K(n,a),W(r,n,null),c=!0},p(b,_){var O,q;t=b;const E={};_[0]&8&&(E.ariaLabel=t[3]("node_edit")),_[0]&16&&(E.theme=t[4]),_[0]&32&&(E.disabled=t[5]),_[1]&1024&&(E.$$scope={dirty:_,ctx:t}),l.$set(E),t[36].value.allowInnerBlocks?d?(d.p(t,_),_[0]&1&&p(d,1)):(d=Pn(t),d.c(),p(d,1),d.m(n,o)):d&&($(),y(d,1,1,()=>{d=null}),x());const v={};_[0]&8&&(v.ariaLabel=t[3]("node_duplicate")),_[0]&16&&(v.theme=t[4]),_[0]&32&&(v.disabled=t[5]),_[1]&1024&&(v.$$scope={dirty:_,ctx:t}),s.$set(v);const S={};_[0]&8&&(S.ariaLabel=t[3]("node_remove")),_[0]&16&&(S.theme=t[4]),_[0]&32&&(S.disabled=t[5]),_[1]&1024&&(S.$$scope={dirty:_,ctx:t}),r.$set(S),(!c||_[0]&16&&u!==(u=le(`
						absolute leading-none
						top-[100%] -right-[3px] z-10
						bg-black
						${((q=(O=t[4])==null?void 0:O.hover_control)==null?void 0:q.box)||""}
						rounded-b
						transition-all
					`)))&&C(e,"class",u)},i(b){c||(p(l.$$.fragment,b),p(d),p(s.$$.fragment,b),p(r.$$.fragment,b),b&&st(()=>{c&&(f||(f=tn(e,Cn,{},!0)),f.run(1))}),c=!0)},o(b){y(l.$$.fragment,b),y(d),y(s.$$.fragment,b),y(r.$$.fragment,b),b&&(f||(f=tn(e,Cn,{},!1)),f.run(0)),c=!1},d(b){b&&T(e),F(l),d&&d.d(),F(s),F(r),b&&f&&f.end()}}}function bl(t){let e,n=il({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function Pn(t){let e,n;function l(){return t[28](t[36])}return e=new en({props:{ariaLabel:t[3]("node_add"),theme:t[4],disabled:t[5],$$slots:{default:[ml]},$$scope:{ctx:t}}}),e.$on("click",l),{c(){J(e.$$.fragment)},m(i,o){W(e,i,o),n=!0},p(i,o){t=i;const s={};o[0]&8&&(s.ariaLabel=t[3]("node_add")),o[0]&16&&(s.theme=t[4]),o[0]&32&&(s.disabled=t[5]),o[1]&1024&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function ml(t){let e,n=mt({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function gl(t){let e,n=ll({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function pl(t){let e,n=Xt({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function Vn(t,e){var be;let n,l,i,o,s,a,r=tl({size:21})+"",u,f,c,k,d,g,h,b,_,E,v,S,O,q,G,Q,L,M,B,oe,I=!e[40]&&qn(e);c=new fl({props:{value:e[36].value,key:e[36].key,store:e[1],disabled:e[5],showNodeId:e[8],onNodeEditRequest:e[7],t:e[3]}});let D=((be=e[36].children)==null?void 0:be.length)&&An(e);function te(...Z){return e[26](e[37],...Z)}let A=!e[5]&&e[38]&&Hn(e);function fe(){return e[31](e[36])}function pe(){return e[32](e[36])}return O=new kt({props:{node:e[0],debug:e[10],dropzoneEnabled:e[22](e[0])}}),G=new pt({props:{id:e[0].key,store:e[1],index:e[40],disabled:e[5]||!e[22](e[0])}}),G.$on("dropped",e[33]),{key:t,first:null,c(){var Z,w,H,ae,ee,z,N,Ee;n=se(),I&&I.c(),l=V(),i=j("li"),o=j("div"),s=j("div"),a=j("div"),u=V(),f=j("div"),J(c.$$.fragment),k=V(),D&&D.c(),b=V(),A&&A.c(),v=V(),S=j("li"),J(O.$$.fragment),q=V(),J(G.$$.fragment),Q=V(),C(a,"class","flex flex-col justify-center p-0 opacity-40"),P(a,"hidden",e[5]),P(a,"cursor-grab",!e[5]&&e[14]!==e[37]),P(a,"cursor-grabbing",!e[5]&&e[14]===e[37]),C(f,"class","flex-1 p-2"),C(s,"class","flex w-full"),C(o,"data-content-builder-node-highlighted",d=e[9]===e[36].key?!0:void 0),P(o,"bg-gray-300",!e[5]&&e[14]===e[37]),C(i,"class",_=le("select-none relative",((Z=e[4])==null?void 0:Z.li)||"",e[38]?"border-solid":"border-dashed",e[38]?((w=e[4])==null?void 0:w.li_hi)||"border-black":((H=e[4])==null?void 0:H.li_low)||"border-gray-300","border-[3px] rounded-t rounded-l relative block",e[13]===e[37]&&" border-black border-solid","transition-all	duration-500")),C(i,"role","group"),C(i,"data-content-builder-node-hidden",E=(ee=(ae=e[36].value)==null?void 0:ae.props)!=null&&ee.hidden?!0:void 0),P(i,"mx-4",!e[0].isRoot),C(S,"data-content-builder-node-debug",L=JSON.stringify({isRoot:e[0].isRoot,parentIsRoot:(z=e[0].parent)==null?void 0:z.isRoot,parentAllowInnerBlocks:(Ee=(N=e[0].parent)==null?void 0:N.value)==null?void 0:Ee.allowInnerBlocks})),this.first=n},m(Z,w){var H;R(Z,n,w),I&&I.m(Z,w),R(Z,l,w),R(Z,i,w),K(i,o),K(o,s),K(s,a),a.innerHTML=r,K(s,u),K(s,f),W(c,f,null),K(o,k),D&&D.m(o,null),K(i,b),A&&A.m(i,null),R(Z,v,w),R(Z,S,w),W(O,S,null),K(S,q),W(G,S,null),K(S,Q),M=!0,B||(oe=[ne(a,"mousedown",e[24]),ne(a,"mouseup",e[25]),De(g=Vt.call(null,o,{enabled:e[12]&&!e[5]&&e[38],id:e[37],payload:{source:e[36].key},effectAllowed:"move",isDragged:e[19]})),De(h=_t.call(null,o,{enabled:!!(e[36].value.allowInnerBlocks&&!((H=e[36].children)!=null&&H.length)),id:e[37],onDrop:te,isDraggedOver:e[20]})),ne(i,"pointerenter",fe),ne(i,"pointerleave",pe)],B=!0)},p(Z,w){var z,N,Ee,we,Ie,Se,ce,me,ge,Te;e=Z,e[40]?I&&($(),y(I,1,1,()=>{I=null}),x()):I?(I.p(e,w),w[0]&1&&p(I,1)):(I=qn(e),I.c(),p(I,1),I.m(l.parentNode,l)),(!M||w[0]&32)&&P(a,"hidden",e[5]),(!M||w[0]&16417)&&P(a,"cursor-grab",!e[5]&&e[14]!==e[37]),(!M||w[0]&16417)&&P(a,"cursor-grabbing",!e[5]&&e[14]===e[37]);const H={};w[0]&1&&(H.value=e[36].value),w[0]&1&&(H.key=e[36].key),w[0]&2&&(H.store=e[1]),w[0]&32&&(H.disabled=e[5]),w[0]&256&&(H.showNodeId=e[8]),w[0]&128&&(H.onNodeEditRequest=e[7]),w[0]&8&&(H.t=e[3]),c.$set(H),(z=e[36].children)!=null&&z.length?D?(D.p(e,w),w[0]&1&&p(D,1)):(D=An(e),D.c(),p(D,1),D.m(o,null)):D&&($(),y(D,1,1,()=>{D=null}),x()),(!M||w[0]&513&&d!==(d=e[9]===e[36].key?!0:void 0))&&C(o,"data-content-builder-node-highlighted",d),g&&He(g.update)&&w[0]&6177&&g.update.call(null,{enabled:e[12]&&!e[5]&&e[38],id:e[37],payload:{source:e[36].key},effectAllowed:"move",isDragged:e[19]}),h&&He(h.update)&&w[0]&36867&&h.update.call(null,{enabled:!!(e[36].value.allowInnerBlocks&&!((N=e[36].children)!=null&&N.length)),id:e[37],onDrop:te,isDraggedOver:e[20]}),(!M||w[0]&16417)&&P(o,"bg-gray-300",!e[5]&&e[14]===e[37]),!e[5]&&e[38]?A?(A.p(e,w),w[0]&2081&&p(A,1)):(A=Hn(e),A.c(),p(A,1),A.m(i,null)):A&&($(),y(A,1,1,()=>{A=null}),x()),(!M||w[0]&10289&&_!==(_=le("select-none relative",((Ee=e[4])==null?void 0:Ee.li)||"",e[38]?"border-solid":"border-dashed",e[38]?((we=e[4])==null?void 0:we.li_hi)||"border-black":((Ie=e[4])==null?void 0:Ie.li_low)||"border-gray-300","border-[3px] rounded-t rounded-l relative block",e[13]===e[37]&&" border-black border-solid","transition-all	duration-500")))&&C(i,"class",_),(!M||w[0]&1&&E!==(E=(ce=(Se=e[36].value)==null?void 0:Se.props)!=null&&ce.hidden?!0:void 0))&&C(i,"data-content-builder-node-hidden",E),(!M||w[0]&10289)&&P(i,"mx-4",!e[0].isRoot);const ae={};w[0]&1&&(ae.node=e[0]),w[0]&1024&&(ae.debug=e[10]),w[0]&1&&(ae.dropzoneEnabled=e[22](e[0])),O.$set(ae);const ee={};w[0]&1&&(ee.id=e[0].key),w[0]&2&&(ee.store=e[1]),w[0]&1&&(ee.index=e[40]),w[0]&33&&(ee.disabled=e[5]||!e[22](e[0])),G.$set(ee),(!M||w[0]&1&&L!==(L=JSON.stringify({isRoot:e[0].isRoot,parentIsRoot:(me=e[0].parent)==null?void 0:me.isRoot,parentAllowInnerBlocks:(Te=(ge=e[0].parent)==null?void 0:ge.value)==null?void 0:Te.allowInnerBlocks})))&&C(S,"data-content-builder-node-debug",L)},i(Z){M||(p(I),p(c.$$.fragment,Z),p(D),p(A),p(O.$$.fragment,Z),p(G.$$.fragment,Z),M=!0)},o(Z){y(I),y(c.$$.fragment,Z),y(D),y(A),y(O.$$.fragment,Z),y(G.$$.fragment,Z),M=!1},d(Z){Z&&(T(n),T(l),T(i),T(v),T(S)),I&&I.d(Z),F(c),D&&D.d(),A&&A.d(),F(O),F(G),B=!1,on(oe)}}}function kl(t){var i,o;let e,n,l=((o=(i=t[0])==null?void 0:i.children)==null?void 0:o.length)&&Kn(t);return{c(){l&&l.c(),e=se()},m(s,a){l&&l.m(s,a),R(s,e,a),n=!0},p(s,a){var r,u;(u=(r=s[0])==null?void 0:r.children)!=null&&u.length?l?(l.p(s,a),a[0]&1&&p(l,1)):(l=Kn(s),l.c(),p(l,1),l.m(e.parentNode,e)):l&&($(),y(l,1,1,()=>{l=null}),x())},i(s){n||(p(l),n=!0)},o(s){y(l),n=!1},d(s){s&&T(e),l&&l.d(s)}}}function vl(t,e,n){let l,i=Y,o=()=>(i(),i=Ae(g,z=>n(11,l=z)),g),s,a,r,u,f=Y,c=()=>(f(),f=Ae(d,z=>n(15,u=z)),d);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>f()),je("ContentNode"),Ue();let{node:k}=e,{store:d}=e;c();let{hoveredKeys:g=Le([])}=e;o();let{t:h}=e,{theme:b}=e,{disabled:_=!1}=e,{acp:E=null}=e,{onNodeEditRequest:v}=e,{showNodeId:S=!1}=e,{highlightedNodeKey:O=void 0}=e,{debug:q=!1}=e;const G=z=>{ie(g,l=[...l,z.key],l)},Q=z=>{ie(g,l=[...l.filter(N=>N!==z.key)],l)},L=Le(!1);Oe(t,L,z=>n(12,s=z));const M=Le(null);Oe(t,M,z=>n(14,r=z));const B=Le(null);Oe(t,B,z=>n(13,a=z));const oe=new We,I=z=>{var N;return z.isRoot||((N=k==null?void 0:k.value)==null?void 0:N.allowInnerBlocks)},D=()=>ie(L,s=!1,s),te=()=>ie(L,s=!0,s),A=()=>ie(L,s=!1,s),fe=(z,N,Ee)=>{var me;const we=(me=N.payload)==null?void 0:me.source,Ie=z;oe.restore(u.data);const Se=oe.find(we),ce=oe.find(Ie);Se&&ce&&Se!==ce&&d.move(we,Ie),ie(L,s=!1,s)},pe=async z=>v(z.key,z.value),be=z=>d.add(z.key),Z=z=>d.duplicate(z.key),w=async z=>{const N=we=>({html:gt(h(we),{"{{label}}":z.value.label})});await(E?ht(E,{title:N("node_remove_confirm_title"),variant:"warn"}):confirm)(N("node_remove_confirm"))&&d.remove(z.key)},H=z=>G(z),ae=z=>Q(z),ee=()=>ie(L,s=!1,s);return t.$$set=z=>{"node"in z&&n(0,k=z.node),"store"in z&&c(n(1,d=z.store)),"hoveredKeys"in z&&o(n(2,g=z.hoveredKeys)),"t"in z&&n(3,h=z.t),"theme"in z&&n(4,b=z.theme),"disabled"in z&&n(5,_=z.disabled),"acp"in z&&n(6,E=z.acp),"onNodeEditRequest"in z&&n(7,v=z.onNodeEditRequest),"showNodeId"in z&&n(8,S=z.showNodeId),"highlightedNodeKey"in z&&n(9,O=z.highlightedNodeKey),"debug"in z&&n(10,q=z.debug)},[k,d,g,h,b,_,E,v,S,O,q,l,s,a,r,u,G,Q,L,M,B,oe,I,D,te,A,fe,pe,be,Z,w,H,ae,ee]}class vt extends ze{constructor(e){super(),Be(this,e,vl,kl,ve,{node:0,store:1,hoveredKeys:2,t:3,theme:4,disabled:5,acp:6,onNodeEditRequest:7,showNodeId:8,highlightedNodeKey:9,debug:10},null,[-1,-1])}}function wl(t){let e,n,l,i=t[5]("empty")+"",o,s;return{c(){e=j("div"),n=j("button"),l=j("span"),C(l,"class","opacity-75 group-hover:opacity-100"),C(n,"type","button"),C(n,"class","text-sm mx-auto text-gray-800 border-dashed border-[3px] border-gray-300 hover:border-black focus:outline-none focus:border-black rounded-md p-2 px-3 flex items-center justify-center leading-none group "),C(e,"class","text-center")},m(a,r){R(a,e,r),K(e,n),K(n,l),l.innerHTML=i,o||(s=ne(n,"click",t[15]),o=!0)},p:Y,i:Y,o:Y,d(a){a&&T(e),o=!1,s()}}}function yl(t){let e,n;return e=new vt({props:{node:t[10].root,store:t[2],t:t[5],theme:t[3],disabled:t[6],acp:t[4],onNodeEditRequest:t[7],showNodeId:t[8],highlightedNodeKey:t[0],debug:t[8]}}),{c(){J(e.$$.fragment)},m(l,i){W(e,l,i),n=!0},p(l,i){const o={};i&1024&&(o.node=l[10].root),i&4&&(o.store=l[2]),i&8&&(o.theme=l[3]),i&64&&(o.disabled=l[6]),i&16&&(o.acp=l[4]),i&128&&(o.onNodeEditRequest=l[7]),i&256&&(o.showNodeId=l[8]),i&1&&(o.highlightedNodeKey=l[0]),i&256&&(o.debug=l[8]),e.$set(o)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Cl(t){let e,n,l,i,o;const s=[yl,wl],a=[];function r(u,f){return u[9].size>1?0:1}return n=r(t),l=a[n]=s[n](t),{c(){e=j("div"),l.c(),C(e,"class",i=le(`${t[1]}`))},m(u,f){R(u,e,f),a[n].m(e,null),o=!0},p(u,[f]){let c=n;n=r(u),n===c?a[n].p(u,f):($(),y(a[c],1,1,()=>{a[c]=null}),x(),l=a[n],l?l.p(u,f):(l=a[n]=s[n](u),l.c()),p(l,1),l.m(e,null)),(!o||f&2&&i!==(i=le(`${u[1]}`)))&&C(e,"class",i)},i(u){o||(p(l),o=!0)},o(u){y(l),o=!1},d(u){u&&T(e),a[n].d()}}}function Nl(t,e,n){let l,i,o=Y,s=()=>(o(),o=Ae(r,O=>n(9,i=O)),r);t.$$.on_destroy.push(()=>o()),je("ContentBuilder");let{class:a=""}=e,{store:r}=e;s();let{i18n:u={empty:"Click here to append the first content block",node_remove:"Remove this content block",node_remove_confirm_title:'Are you sure to delete <b>"{{label}}"</b>?',node_remove_confirm:['This operation removes the content block <b>"{{label}}"</b> and all its inner blocks (if any).',"There is no undo. Continue?"].join(" "),node_add:"Add a new content block inside this block",node_duplicate:"Duplicate this content block",node_edit:"Edit this content block",node_edit_drag:"Click to edit this content block or drag to move",label_label:"Label",label_desc:"For your internal reference only.",type_label:"Content block type",type_desc:"This will affect how this content block is rendered. Note that changing the type resets all current block properties.",props_fieldset_legend:"Content block properties",html_label:"Block inner HTML (advanced)",html_desc:"Be careful. You can break things.",style_label:"Block CSS (advanced)",style_desc:"Note that some content blocks may ignore this value.",class_label:"Block classes (advanced)",class_desc:"Note that some content blocks may ignore this value.",hidden_label:"Hidden",hidden_desc:"If checked, this block including its inner blocks will not be rendered.",allow_inner_label:"Allow this block to contain inner blocks",allow_inner_desc:"If unchecked, any existing inner blocks will not be rendered, but will remain intact."}}=e,{theme:f={}}=e,{notifications:c=void 0}=e,{acp:k=void 0}=e;const d=(O,q={})=>(u==null?void 0:u[O])??O;let{disabled:g=!1}=e,{highlightedNodeKey:h=void 0}=e;function b(O){n(0,h=O)}async function _(O,q){if(k){r.resetError();const G=await new Promise(Q=>{k==null||k.prompt(L=>{try{L=JSON.parse(L),k.close(),Q(L)}catch{k.setHeadValue(L),(c||console).error("Invalid JSON data. Can't continue...")}},{content:"Valid JSON is required. Edit at your own risk.",value:JSON.stringify(q,null,2),promptFieldProps:{type:"textarea",class:{input:"font-mono"}},iconFn:!1,title:{html:['<span class="flex items-center justify-between">',"<span>Advanced content block data editor</span>",`<code class="text-xs opacity-50 font-normal">${O}</code>`,"</span>"].join(" ")}})});return G&&r.edit(O,G),!!G}else return console.warn("Default `defaultOnNodeEdit` is a no-op, because `acp` instance was not provided."),!1}let{onNodeEditRequest:E=_}=e,{debug:v=!1}=e;const S=()=>r.add(null);return t.$$set=O=>{"class"in O&&n(1,a=O.class),"store"in O&&s(n(2,r=O.store)),"i18n"in O&&n(11,u=O.i18n),"theme"in O&&n(3,f=O.theme),"notifications"in O&&n(12,c=O.notifications),"acp"in O&&n(4,k=O.acp),"disabled"in O&&n(6,g=O.disabled),"highlightedNodeKey"in O&&n(0,h=O.highlightedNodeKey),"onNodeEditRequest"in O&&n(7,E=O.onNodeEditRequest),"debug"in O&&n(8,v=O.debug)},t.$$.update=()=>{t.$$.dirty&512&&n(10,l=We.factory(i.data||"",!0))},[h,a,r,f,k,d,g,E,v,i,l,u,c,b,_,S]}class zl extends ze{constructor(e){super(),Be(this,e,Nl,Cl,ve,{class:1,store:2,i18n:11,theme:3,notifications:12,acp:4,t:5,disabled:6,highlightedNodeKey:0,setHighlightedNodeKey:13,defaultOnNodeEdit:14,onNodeEditRequest:7,debug:8})}get t(){return this.$$.ctx[5]}get setHighlightedNodeKey(){return this.$$.ctx[13]}get defaultOnNodeEdit(){return this.$$.ctx[14]}}const Bl={label:"Default",value:"default",description:"",props:[{name:"html",inputType:"textarea",value:"",inputProps:{placeholder:"<b>Hello, World!</b>"}},{name:"style",inputType:"textarea",value:"",inputProps:{placeholder:"color: red;"}}],allowInnerBlocks:{value:!0,hidden:!1}},El=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${o?`${o} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"/></svg>`},Il=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${o?`${o} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z" clip-rule="evenodd"/></svg>`},Sl=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${o?`${o} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M6.28 5.22a.75.75 0 0 1 0 1.06L2.56 10l3.72 3.72a.75.75 0 0 1-1.06 1.06L.97 10.53a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Zm7.44 0a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L17.44 10l-3.72-3.72a.75.75 0 0 1 0-1.06ZM11.377 2.011a.75.75 0 0 1 .612.867l-2.5 14.5a.75.75 0 0 1-1.478-.255l2.5-14.5a.75.75 0 0 1 .866-.612Z" clip-rule="evenodd"/></svg>`},Ol=(t={})=>{t??(t={});const{size:e,class:n,style:l,strokeWidth:i}=t;let o=Object.entries(t).filter(([s,a])=>!/^class|size|style|strokeWidth$/.test(s)).reduce((s,[a,r])=>[...s,`${a}="${r}"`],[]).join(" ");return`<svg ${l?`style="${l}" `:""}${n?`class="${n}" `:""}width="${e||20}" height="${e||20}" ${o?`${o} `:""}viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"/></svg>`};function Jn(t,e,n){const l=t.slice();l[68]=e[n][0],l[69]=e[n][1],l[71]=e,l[72]=n;const i=l[37](l[68],l[69].inputType,l[69].inputProps);return l[70]=i,l}function Wn(t){let e=t[19].key,n,l,i=et(t);return{c(){i.c(),n=se()},m(o,s){i.m(o,s),R(o,n,s),l=!0},p(o,s){s[0]&524288&&ve(e,e=o[19].key)?($(),y(i,1,1,Y),x(),i=et(o),i.c(),p(i,1),i.m(n.parentNode,n)):i.p(o,s)},i(o){l||(p(i),l=!0)},o(o){y(i),l=!1},d(o){o&&T(n),i.d(o)}}}function Rl(t){let e,n,l,i,o;return{c(){e=j("span"),n=Je(t[0]),C(e,"slot","input_after"),C(e,"class","text-xs font-mono px-2 flex items-center opacity-50")},m(s,a){R(s,e,a),K(e,n),i||(o=De(l=Ye.call(null,e,{content:"Internal block ID",getAppendChildTarget:t[12],boundaryRoot:t[24]})),i=!0)},p(s,a){a[0]&1&&Xe(n,s[0]),l&&He(l.update)&&a[0]&16781312&&l.update.call(null,{content:"Internal block ID",getAppendChildTarget:s[12],boundaryRoot:s[24]})},d(s){s&&T(e),i=!1,o()}}}function Tl(t){let e,n,l;function i(s){t[54](s)}let o={type:"text",label:t[14]("type_label"),size:t[35](t[13],"sm","md"),class:t[36].text.props.class,disabled:!0};return t[22]!==void 0&&(o.value=t[22]),e=new ln({props:o}),ue.push(()=>Ne(e,"value",i)),{c(){J(e.$$.fragment)},m(s,a){W(e,s,a),l=!0},p(s,a){const r={};a[0]&16384&&(r.label=s[14]("type_label")),a[0]&8192&&(r.size=s[35](s[13],"sm","md")),!n&&a[0]&4194304&&(n=!0,r.value=s[22],Me(()=>n=!1)),e.$set(r)},i(s){l||(p(e.$$.fragment,s),l=!0)},o(s){y(e.$$.fragment,s),l=!1},d(s){F(e,s)}}}function Ll(t){let e,n,l;function i(s){t[53](s)}let o={label:t[14]("type_label"),description:t[14]("type_desc"),class:t[36].select.props.class,options:t[20].map(nt),size:t[35](t[13],"sm","md")};return t[22]!==void 0&&(o.value=t[22]),e=new bt({props:o}),ue.push(()=>Ne(e,"value",i)),e.$on("change",t[34]),{c(){J(e.$$.fragment)},m(s,a){W(e,s,a),l=!0},p(s,a){const r={};a[0]&16384&&(r.label=s[14]("type_label")),a[0]&16384&&(r.description=s[14]("type_desc")),a[0]&1048576&&(r.options=s[20].map(nt)),a[0]&8192&&(r.size=s[35](s[13],"sm","md")),!n&&a[0]&4194304&&(n=!0,r.value=s[22],Me(()=>n=!1)),e.$set(r)},i(s){l||(p(e.$$.fragment,s),l=!0)},o(s){y(e.$$.fragment,s),l=!1},d(s){F(e,s)}}}function Fn(t){var l;let e,n;return e=new Ft({props:{legend:(l=t[18])==null?void 0:l.label,class:{box:`mb-4 pb-2 ${t[3]}`},$$slots:{default:[Ml]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(i,o){W(e,i,o),n=!0},p(i,o){var a;const s={};o[0]&262144&&(s.legend=(a=i[18])==null?void 0:a.label),o[0]&8&&(s.class={box:`mb-4 pb-2 ${i[3]}`}),o[0]&2367504|o[2]&2048&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Zn(t){let e,n=t[18].description+"",l;return{c(){e=j("div"),C(e,"class",l=le("-mt-2 mb-3 opacity-50",t[4],t[35](t[13],"text-xs","text-sm")))},m(i,o){R(i,e,o),e.innerHTML=n},p(i,o){o[0]&262144&&n!==(n=i[18].description+"")&&(e.innerHTML=n),o[0]&8208&&l!==(l=le("-mt-2 mb-3 opacity-50",i[4],i[35](i[13],"text-xs","text-sm")))&&C(e,"class",l)},d(i){i&&T(e)}}}function Gn(t){let e,n,l,i,o,s;const a=[t[70].props||{},{name:t[68]},{size:t[35](t[13],"sm","md")},{validate:!0}];function r(d){t[55](d,t[68])}function u(d){t[56](d,t[68])}function f(d){t[57](d,t[68])}var c=t[70].component;function k(d,g){let h={};for(let b=0;b<a.length;b+=1)h=vn(h,a[b]);return g!==void 0&&g[0]&270336|g[1]&80&&(h=vn(h,Nn(a,[g[0]&262144|g[1]&64&&zn(d[70].props||{}),g[0]&262144&&{name:d[68]},g[0]&8192|g[1]&16&&{size:d[35](d[13],"sm","md")},a[3]]))),d[21][d[68]]!==void 0&&(h.value=d[21][d[68]]),d[21][d[68]]!==void 0&&(h.group=d[21][d[68]]),d[21][d[68]]!==void 0&&(h.checked=d[21][d[68]]),{props:h}}return c&&(e=kn(c,k(t)),ue.push(()=>Ne(e,"value",r)),ue.push(()=>Ne(e,"group",u)),ue.push(()=>Ne(e,"checked",f)),e.$on("change",t[34])),{c(){e&&J(e.$$.fragment),o=se()},m(d,g){e&&W(e,d,g),R(d,o,g),s=!0},p(d,g){if(t=d,g[0]&262144&&c!==(c=t[70].component)){if(e){$();const h=e;y(h.$$.fragment,1,0,()=>{F(h,1)}),x()}c?(e=kn(c,k(t,g)),ue.push(()=>Ne(e,"value",r)),ue.push(()=>Ne(e,"group",u)),ue.push(()=>Ne(e,"checked",f)),e.$on("change",t[34]),J(e.$$.fragment),p(e.$$.fragment,1),W(e,o.parentNode,o)):e=null}else if(c){const h=g[0]&270336|g[1]&80?Nn(a,[g[0]&262144|g[1]&64&&zn(t[70].props||{}),g[0]&262144&&{name:t[68]},g[0]&8192|g[1]&16&&{size:t[35](t[13],"sm","md")},a[3]]):{};!n&&g[0]&2359296&&(n=!0,h.value=t[21][t[68]],Me(()=>n=!1)),!l&&g[0]&2359296&&(l=!0,h.group=t[21][t[68]],Me(()=>l=!1)),!i&&g[0]&2359296&&(i=!0,h.checked=t[21][t[68]],Me(()=>i=!1)),e.$set(h)}},i(d){s||(e&&p(e.$$.fragment,d),s=!0)},o(d){e&&y(e.$$.fragment,d),s=!1},d(d){d&&T(o),e&&F(e,d)}}}function Ml(t){var r,u,f;let e,n,l,i=((r=t[18])==null?void 0:r.description)&&Zn(t),o=Ge(((f=(u=t[18])==null?void 0:u.props)==null?void 0:f.entries())||[]),s=[];for(let c=0;c<o.length;c+=1)s[c]=Gn(Jn(t,o,c));const a=c=>y(s[c],1,1,()=>{s[c]=null});return{c(){i&&i.c(),e=V();for(let c=0;c<s.length;c+=1)s[c].c();n=se()},m(c,k){i&&i.m(c,k),R(c,e,k);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,k);R(c,n,k),l=!0},p(c,k){var d,g,h;if((d=c[18])!=null&&d.description?i?i.p(c,k):(i=Zn(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),k[0]&2367488|k[1]&88){o=Ge(((h=(g=c[18])==null?void 0:g.props)==null?void 0:h.entries())||[]);let b;for(b=0;b<o.length;b+=1){const _=Jn(c,o,b);s[b]?(s[b].p(_,k),p(s[b],1)):(s[b]=Gn(_),s[b].c(),p(s[b],1),s[b].m(n.parentNode,n))}for($(),b=o.length;b<s.length;b+=1)a(b);x()}},i(c){if(!l){for(let k=0;k<o.length;k+=1)p(s[k]);l=!0}},o(c){s=s.filter(Boolean);for(let k=0;k<s.length;k+=1)y(s[k]);l=!1},d(c){c&&(T(e),T(n)),i&&i.d(c),at(s,c)}}}function Un(t){var a,r;let e,n,l,i;function o(u){t[59](u)}let s={label:t[14]("allow_inner_label"),description:t[14]("allow_inner_desc"),disabled:(r=(a=t[18])==null?void 0:a.allowInnerBlocks)==null?void 0:r.hidden,size:t[35](t[13],"sm","md"),class:t[36].checkbox.props.class};return t[25]!==void 0&&(s.checked=t[25]),n=new cn({props:s}),ue.push(()=>Ne(n,"checked",o)),n.$on("change",t[34]),{c(){var u,f;e=j("div"),J(n.$$.fragment),P(e,"opacity-50",(f=(u=t[18])==null?void 0:u.allowInnerBlocks)==null?void 0:f.hidden)},m(u,f){R(u,e,f),W(n,e,null),i=!0},p(u,f){var k,d,g,h;const c={};f[0]&16384&&(c.label=u[14]("allow_inner_label")),f[0]&16384&&(c.description=u[14]("allow_inner_desc")),f[0]&262144&&(c.disabled=(d=(k=u[18])==null?void 0:k.allowInnerBlocks)==null?void 0:d.hidden),f[0]&8192&&(c.size=u[35](u[13],"sm","md")),!l&&f[0]&33554432&&(l=!0,c.checked=u[25],Me(()=>l=!1)),n.$set(c),(!i||f[0]&262144)&&P(e,"opacity-50",(h=(g=u[18])==null?void 0:g.allowInnerBlocks)==null?void 0:h.hidden)},i(u){i||(p(n.$$.fragment,u),i=!0)},o(u){y(n.$$.fragment,u),i=!1},d(u){u&&T(e),F(n)}}}function Xn(t){var k;let e,n,l,i,o,s,a,r=t[6]&&Yn(t),u=t[8]&&Qn(t),f=t[7]&&$n(t),c=((k=t[23])==null?void 0:k.isSaving)&&xn();return{c(){e=j("div"),n=j("div"),r&&r.c(),l=V(),u&&u.c(),i=V(),f&&f.c(),o=V(),c&&c.c(),C(n,"class","flex-1"),C(e,"class",s=le("space-x-2 mt-8 flex items-start justify-center",t[2]))},m(d,g){R(d,e,g),K(e,n),r&&r.m(n,null),K(n,l),u&&u.m(n,null),K(n,i),f&&f.m(n,null),K(e,o),c&&c.m(e,null),a=!0},p(d,g){var h;d[6]?r?(r.p(d,g),g[0]&64&&p(r,1)):(r=Yn(d),r.c(),p(r,1),r.m(n,l)):r&&($(),y(r,1,1,()=>{r=null}),x()),d[8]?u?(u.p(d,g),g[0]&256&&p(u,1)):(u=Qn(d),u.c(),p(u,1),u.m(n,i)):u&&($(),y(u,1,1,()=>{u=null}),x()),d[7]?f?(f.p(d,g),g[0]&128&&p(f,1)):(f=$n(d),f.c(),p(f,1),f.m(n,null)):f&&($(),y(f,1,1,()=>{f=null}),x()),(h=d[23])!=null&&h.isSaving?c||(c=xn(),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!a||g[0]&4&&s!==(s=le("space-x-2 mt-8 flex items-start justify-center",d[2])))&&C(e,"class",s)},i(d){a||(p(r),p(u),p(f),a=!0)},o(d){y(r),y(u),y(f),a=!1},d(d){d&&T(e),r&&r.d(),u&&u.d(),f&&f.d(),c&&c.d()}}}function Yn(t){let e,n,l,i,o,s;return n=new Ve({props:{size:t[35](t[13],"sm","md"),"data-content-editor-edit":!0,class:t[10],variant:t[11],$$slots:{default:[Dl]},$$scope:{ctx:t}}}),n.$on("click",t[16]),{c(){e=j("span"),J(n.$$.fragment)},m(a,r){R(a,e,r),W(n,e,null),i=!0,o||(s=De(l=Ye.call(null,e,{content:"Advanced raw data editor",getAppendChildTarget:t[12],boundaryRoot:t[24]})),o=!0)},p(a,r){const u={};r[0]&8192&&(u.size=a[35](a[13],"sm","md")),r[0]&1024&&(u.class=a[10]),r[0]&2048&&(u.variant=a[11]),r[2]&2048&&(u.$$scope={dirty:r,ctx:a}),n.$set(u),l&&He(l.update)&&r[0]&16781312&&l.update.call(null,{content:"Advanced raw data editor",getAppendChildTarget:a[12],boundaryRoot:a[24]})},i(a){i||(p(n.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),i=!1},d(a){a&&T(e),F(n),o=!1,s()}}}function Dl(t){let e,n=Sl({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function Qn(t){let e,n,l,i,o,s;return n=new Ve({props:{size:t[35](t[13],"sm","md"),"data-content-editor-remove":!0,class:t[10],variant:t[11],$$slots:{default:[jl]},$$scope:{ctx:t}}}),n.$on("click",t[17]),{c(){e=j("span"),J(n.$$.fragment)},m(a,r){R(a,e,r),W(n,e,null),i=!0,o||(s=De(l=Ye.call(null,e,{content:"Delete this content block",getAppendChildTarget:t[12],boundaryRoot:t[24]})),o=!0)},p(a,r){const u={};r[0]&8192&&(u.size=a[35](a[13],"sm","md")),r[0]&1024&&(u.class=a[10]),r[0]&2048&&(u.variant=a[11]),r[2]&2048&&(u.$$scope={dirty:r,ctx:a}),n.$set(u),l&&He(l.update)&&r[0]&16781312&&l.update.call(null,{content:"Delete this content block",getAppendChildTarget:a[12],boundaryRoot:a[24]})},i(a){i||(p(n.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),i=!1},d(a){a&&T(e),F(n),o=!1,s()}}}function jl(t){let e,n=Il({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function $n(t){let e,n,l,i,o,s;return n=new Ve({props:{size:t[35](t[13],"sm","md"),"data-content-editor-close":!0,class:t[10],variant:t[11],$$slots:{default:[Kl]},$$scope:{ctx:t}}}),n.$on("click",t[15]),{c(){e=j("span"),J(n.$$.fragment)},m(a,r){R(a,e,r),W(n,e,null),i=!0,o||(s=De(l=Ye.call(null,e,{content:"Close this editor",getAppendChildTarget:t[12],boundaryRoot:t[24]})),o=!0)},p(a,r){const u={};r[0]&8192&&(u.size=a[35](a[13],"sm","md")),r[0]&1024&&(u.class=a[10]),r[0]&2048&&(u.variant=a[11]),r[2]&2048&&(u.$$scope={dirty:r,ctx:a}),n.$set(u),l&&He(l.update)&&r[0]&16781312&&l.update.call(null,{content:"Close this editor",getAppendChildTarget:a[12],boundaryRoot:a[24]})},i(a){i||(p(n.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),i=!1},d(a){a&&T(e),F(n),o=!1,s()}}}function Kl(t){let e,n=El({size:16})+"",l;return{c(){e=new Re(!1),l=se(),e.a=l},m(i,o){e.m(n,i,o),R(i,l,o)},p:Y,d(i){i&&(T(l),e.d())}}}function xn(t){let e,n=Ol({class:le("animate-spin m-auto inline")})+"";return{c(){e=j("div"),C(e,"class","opacity-25")},m(l,i){R(l,e,i),e.innerHTML=n},d(l){l&&T(e)}}}function et(t){var B,oe;let e,n,l,i,o,s,a,r,u=t[33]((B=t[18])==null?void 0:B.props)||((oe=t[18])==null?void 0:oe.description),f,c,k,d,g=t[32](t[22]),h,b;function _(I){t[52](I)}let E={type:"text",label:t[14]("label_label"),description:t[14]("label_desc"),size:t[35](t[13],"sm","md"),class:{input:le(t[36].text.props.class.input,"rounded-r-none"),description:t[36].text.props.class.description},$$slots:{input_after:[Rl]},$$scope:{ctx:t}};t[26]!==void 0&&(E.value=t[26]),n=new ln({props:E}),ue.push(()=>Ne(n,"value",_)),n.$on("change",t[34]);const v=[Ll,Tl],S=[];function O(I,D){return D[0]&4194304&&(o=null),o==null&&(o=!!I[32](I[22])),o?0:1}s=O(t,[-1,-1,-1]),a=S[s]=v[s](t);let q=u&&Fn(t);function G(I){t[58](I)}let Q={label:t[14]("hidden_label"),description:t[14]("hidden_desc"),size:t[35](t[13],"sm","md"),class:t[36].checkbox.props.class};t[21].hidden!==void 0&&(Q.checked=t[21].hidden),c=new cn({props:Q}),ue.push(()=>Ne(c,"checked",G)),c.$on("change",t[34]);let L=g&&Un(t),M=(t[6]||t[7]||t[8]||t[9])&&Xn(t);return{c(){e=j("form"),J(n.$$.fragment),i=V(),a.c(),r=V(),q&&q.c(),f=V(),J(c.$$.fragment),d=V(),L&&L.c(),h=V(),M&&M.c(),C(e,"class",t[1])},m(I,D){R(I,e,D),W(n,e,null),K(e,i),S[s].m(e,null),K(e,r),q&&q.m(e,null),K(e,f),W(c,e,null),K(e,d),L&&L.m(e,null),K(e,h),M&&M.m(e,null),t[60](e),b=!0},p(I,D){var pe,be;const te={};D[0]&16384&&(te.label=I[14]("label_label")),D[0]&16384&&(te.description=I[14]("label_desc")),D[0]&8192&&(te.size=I[35](I[13],"sm","md")),D[0]&16781313|D[2]&2048&&(te.$$scope={dirty:D,ctx:I}),!l&&D[0]&67108864&&(l=!0,te.value=I[26],Me(()=>l=!1)),n.$set(te);let A=s;s=O(I,D),s===A?S[s].p(I,D):($(),y(S[A],1,1,()=>{S[A]=null}),x(),a=S[s],a?a.p(I,D):(a=S[s]=v[s](I),a.c()),p(a,1),a.m(e,r)),D[0]&262144&&(u=I[33]((pe=I[18])==null?void 0:pe.props)||((be=I[18])==null?void 0:be.description)),u?q?(q.p(I,D),D[0]&262144&&p(q,1)):(q=Fn(I),q.c(),p(q,1),q.m(e,f)):q&&($(),y(q,1,1,()=>{q=null}),x());const fe={};D[0]&16384&&(fe.label=I[14]("hidden_label")),D[0]&16384&&(fe.description=I[14]("hidden_desc")),D[0]&8192&&(fe.size=I[35](I[13],"sm","md")),!k&&D[0]&2097152&&(k=!0,fe.checked=I[21].hidden,Me(()=>k=!1)),c.$set(fe),D[0]&4194304&&(g=I[32](I[22])),g?L?(L.p(I,D),D[0]&4194304&&p(L,1)):(L=Un(I),L.c(),p(L,1),L.m(e,h)):L&&($(),y(L,1,1,()=>{L=null}),x()),I[6]||I[7]||I[8]||I[9]?M?(M.p(I,D),D[0]&960&&p(M,1)):(M=Xn(I),M.c(),p(M,1),M.m(e,null)):M&&($(),y(M,1,1,()=>{M=null}),x()),(!b||D[0]&2)&&C(e,"class",I[1])},i(I){b||(p(n.$$.fragment,I),p(a),p(q),p(c.$$.fragment,I),p(L),p(M),b=!0)},o(I){y(n.$$.fragment,I),y(a),y(q),y(c.$$.fragment,I),y(L),y(M),b=!1},d(I){I&&T(e),F(n),S[s].d(),q&&q.d(),F(c),L&&L.d(),M&&M.d(),t[60](null)}}}function ql(t){let e,n,l=t[19]&&Wn(t);return{c(){l&&l.c(),e=se()},m(i,o){l&&l.m(i,o),R(i,e,o),n=!0},p(i,o){i[19]?l?(l.p(i,o),o[0]&524288&&p(l,1)):(l=Wn(i),l.c(),p(l,1),l.m(e.parentNode,e)):l&&($(),y(l,1,1,()=>{l=null}),x())},i(i){n||(p(l),n=!0)},o(i){y(l),n=!1},d(i){i&&T(e),l&&l.d(i)}}}const Al=je("ContentNodeEditor"),nt=t=>({label:t.label||t.value,value:t.value,optgroup:t.optgroup||""});function Hl(t,e,n){let l,i,o,s,a,r,u,f,c,k,d=Y,g=()=>(d(),d=Ae(L,m=>n(23,k=m)),L);t.$$.on_destroy.push(()=>d());const h=Ue();let{debug:b=!1}=e;const _=(...m)=>b&&Al(...m);let{class:E=""}=e,{buttonBoxClass:v=""}=e,{fieldsetBoxClass:S=""}=e,{fieldsetDescriptionClass:O=""}=e,{selectInputClass:q=""}=e,{notifications:G=void 0}=e,{acp:Q=void 0}=e,{store:L}=e;g();let{key:M=""}=e,{builder:B=void 0}=e,{typesConfig:oe=[]}=e;function I(m){_("setKey",m),n(0,M=m)}let{afterEdit:D=void 0}=e,{afterClose:te=void 0}=e,{afterRemove:A=void 0}=e,{showButtonEdit:fe=!0}=e,{showButtonClose:pe=!0}=e,{showButtonRemove:be=!0}=e,{showIsSaving:Z=!0}=e,{buttonsClass:w=""}=e,{buttonsVariant:H=""}=e,{tooltipGetAppendChildTarget:ae=void 0}=e,{size:ee="md"}=e,{t:z=(m,U)=>m}=e,{allowClassProp:N=!0}=e;const Ee=m=>{let U=[...m];return m.findIndex(re=>re.name==="style")<0&&U.push({name:"style",inputType:"textarea",value:"",inputProps:{placeholder:"color: red;"}}),N&&m.findIndex(re=>re.name==="class")<0&&U.push({name:"class",inputType:"textarea",value:"",inputProps:{placeholder:"text-red-500"}}),U};function we(){n(0,M=""),te==null||te(),h("closed")}async function Ie(){var m;s&&await((m=B==null?void 0:B.defaultOnNodeEdit)==null?void 0:m.call(B,M,a)),D==null||D(),h("edited")}async function Se(){const m=re=>({html:gt(z(re),{"{{label}}":s==null?void 0:s.value.label})});await(Q?ht(Q,{title:m("node_remove_confirm_title"),variant:"warn"}):confirm)(m("node_remove_confirm"))&&L.remove(M),A==null||A(),h("removed")}const ce=Le("");Oe(t,ce,m=>n(22,f=m));const me=Le("");Oe(t,me,m=>n(26,c=m));const ge=Le({});Oe(t,ge,m=>n(21,u=m));const Te=Le(!0);Oe(t,Te,m=>n(25,r=m));const _n=Wt([ce,me,ge,Te],([m,U,re,de])=>({...(s==null?void 0:s.value)||{},type:m,label:U,props:re,allowInnerBlocks:de}));Oe(t,_n,m=>n(61,a=m));let _e=null;const hn=(m,U=!1)=>{m=U?{}:{...m};const re=(de,he)=>{_(`setting prop ${de}=${JSON.stringify(he)}`),m[de]=he};return _e==null||_e.props.forEach((de,he)=>{m[he]===void 0&&re(he,de==null?void 0:de.value)}),_("going to apply config props:",m),m},wt=m=>i.has(m),yt=m=>{const U=[...(m==null?void 0:m.entries())||[]];if(!U.length)return!1;for(let[re,de]of U)if(de.inputType==="hidden")return!1;return!0};let Pe={};const Ct=()=>{s&&(_(`SAVING '${M}'s VALUE TO '`,a),L.edit(M,a),h("saved"))},Nt=()=>({html:{label:z("html_label"),description:z("html_desc")},style:{label:z("style_label"),description:z("style_desc")},class:{label:z("class_label"),description:z("class_desc")}}),Ke=(m,U,re)=>m==="sm"?U:re,bn={class:{input:`font-mono bg-white p-1 ${Ke(ee,"text-sm placeholder:text-sm","text-base placeholder:text-base")}`,description:Ke(ee,"text-xs","text-sm")}},mn={text:{component:ln,props:{...bn,type:"text",class:{input:"bg-white p-2 font-mono",description:Ke(ee,"text-xs","text-sm")}}},textarea:{component:ln,props:{...bn,type:"textarea",class:{input:"bg-white p-2 font-mono min-h-0",description:Ke(ee,"text-xs","text-sm")}}},select:{component:bt,props:{class:{input:"bg-white p-2",description:Ke(ee,"text-xs","text-sm")}}},radio:{component:nl,props:{class:{description:Ke(ee,"text-xs","text-sm")}}},checkbox:{component:cn,props:{class:{description:Ke(ee,"text-xs","text-sm")}}}},zt=(m,U,re)=>{let{component:de,props:he}=mn[U]||{component:null,props:{}};return he={...re||{},...he,...Nt()[m]||{}},he.rows??(he.rows=1),{component:de,props:he}};let sn;function Bt(m){c=m,me.set(c)}function Et(m){f=m,ce.set(f)}function It(m){f=m,ce.set(f)}function St(m,U){t.$$.not_equal(u[U],m)&&(u[U]=m,ge.set(u))}function Ot(m,U){t.$$.not_equal(u[U],m)&&(u[U]=m,ge.set(u))}function Rt(m,U){t.$$.not_equal(u[U],m)&&(u[U]=m,ge.set(u))}function Tt(m){t.$$.not_equal(u.hidden,m)&&(u.hidden=m,ge.set(u))}function Lt(m){r=m,Te.set(r)}function Mt(m){ue[m?"unshift":"push"](()=>{sn=m,n(24,sn)})}return t.$$set=m=>{"debug"in m&&n(38,b=m.debug),"class"in m&&n(1,E=m.class),"buttonBoxClass"in m&&n(2,v=m.buttonBoxClass),"fieldsetBoxClass"in m&&n(3,S=m.fieldsetBoxClass),"fieldsetDescriptionClass"in m&&n(4,O=m.fieldsetDescriptionClass),"selectInputClass"in m&&n(39,q=m.selectInputClass),"notifications"in m&&n(40,G=m.notifications),"acp"in m&&n(41,Q=m.acp),"store"in m&&g(n(5,L=m.store)),"key"in m&&n(0,M=m.key),"builder"in m&&n(42,B=m.builder),"typesConfig"in m&&n(43,oe=m.typesConfig),"afterEdit"in m&&n(45,D=m.afterEdit),"afterClose"in m&&n(46,te=m.afterClose),"afterRemove"in m&&n(47,A=m.afterRemove),"showButtonEdit"in m&&n(6,fe=m.showButtonEdit),"showButtonClose"in m&&n(7,pe=m.showButtonClose),"showButtonRemove"in m&&n(8,be=m.showButtonRemove),"showIsSaving"in m&&n(9,Z=m.showIsSaving),"buttonsClass"in m&&n(10,w=m.buttonsClass),"buttonsVariant"in m&&n(11,H=m.buttonsVariant),"tooltipGetAppendChildTarget"in m&&n(12,ae=m.tooltipGetAppendChildTarget),"size"in m&&n(13,ee=m.size),"t"in m&&n(14,z=m.t),"allowClassProp"in m&&n(48,N=m.allowClassProp)},t.$$.update=()=>{var m,U,re,de,he,gn,pn;t.$$.dirty[1]&4096&&n(20,l=[Bl,...oe].sort((Fe,ye)=>{const Qe=[Fe.optgroup||"",Fe.label||Fe.value].join(" "),$e=[ye.optgroup||"",ye.label||ye.value].join(" ");return Qe.localeCompare($e)})),t.$$.dirty[0]&1048576&&n(50,i=l.reduce((Fe,ye)=>(Fe.set(ye.value,{label:ye.label||ye.value,description:ye.description,props:Ee(ye.props||[]).reduce((Qe,$e)=>(Qe.set($e.name,$e),Qe),new Map),allowInnerBlocks:(ye==null?void 0:ye.allowInnerBlocks)||{value:!0,hidden:!1}}),Fe),new Map([["html",{value:""}],["style",{value:""}]]))),t.$$.dirty[0]&1|t.$$.dirty[1]&2048&&(B==null||B.setHighlightedNodeKey(M||null)),t.$$.dirty[0]&8388608&&n(51,o=We.factory(k.data||"",!0)),t.$$.dirty[0]&1|t.$$.dirty[1]&1048576&&n(19,s=o.find(M)),t.$$.dirty[0]&524288&&s&&(_("NODE",s.value),ie(ce,f=((m=s.value)==null?void 0:m.type)||"default",f),ie(me,c=((U=s.value)==null?void 0:U.label)||"",c),ie(ge,u=((re=s.value)==null?void 0:re.props)||{},u),ie(Te,r=!!((de=s.value)!=null&&de.allowInnerBlocks),r)),t.$$.dirty[0]&2097152&&u.hidden===void 0&&ie(ge,u.hidden=!1,u),t.$$.dirty[0]&4194304|t.$$.dirty[1]&524288&&f&&n(18,_e=i.get(f)),t.$$.dirty[0]&262144&&_("typeConfig",_e),t.$$.dirty[0]&524289|t.$$.dirty[1]&262144&&s&&!Pe[M]&&(_("NOT SEEN",s.value),n(49,Pe[M]=s.value.type,Pe),ie(ge,u=hn(s.value.props||{},!1),u)),t.$$.dirty[0]&7077889|t.$$.dirty[1]&262144&&s&&Pe[M]!==f&&(_(`SWITCHING TYPE FROM '${s.value.type}' TO '${f}' FOR ${M}`),n(49,Pe[M]=f,Pe),ie(ge,u=hn(u,!0),u),((he=_e==null?void 0:_e.allowInnerBlocks)==null?void 0:he.value)!==void 0&&(_("Setting 'allowInnerBlocks' from config to ",!!((gn=_e==null?void 0:_e.allowInnerBlocks)!=null&&gn.value)),ie(Te,r=!!((pn=_e==null?void 0:_e.allowInnerBlocks)!=null&&pn.value),r)))},[M,E,v,S,O,L,fe,pe,be,Z,w,H,ae,ee,z,we,Ie,Se,_e,s,l,u,f,k,sn,r,c,ce,me,ge,Te,_n,wt,yt,Ct,Ke,mn,zt,b,q,G,Q,B,oe,I,D,te,A,N,Pe,i,o,Bt,Et,It,St,Ot,Rt,Tt,Lt,Mt]}class Pl extends ze{constructor(e){super(),Be(this,e,Hl,ql,ve,{debug:38,class:1,buttonBoxClass:2,fieldsetBoxClass:3,fieldsetDescriptionClass:4,selectInputClass:39,notifications:40,acp:41,store:5,key:0,builder:42,typesConfig:43,setKey:44,afterEdit:45,afterClose:46,afterRemove:47,showButtonEdit:6,showButtonClose:7,showButtonRemove:8,showIsSaving:9,buttonsClass:10,buttonsVariant:11,tooltipGetAppendChildTarget:12,size:13,t:14,allowClassProp:48,close:15,openRawEditor:16,remove:17},null,[-1,-1,-1])}get setKey(){return this.$$.ctx[44]}get close(){return this.$$.ctx[15]}get openRawEditor(){return this.$$.ctx[16]}get remove(){return this.$$.ctx[17]}}je("content-builder");const Vl={type:"default",label:"",props:{},allowInnerBlocks:!0},Jl=(t=null,e={})=>{const n=(..._)=>{var E;return(E=e.logger)==null?void 0:E.apply(null,_)};let l=new We(new Ze({type:"__root__"}));n("initialDump",t),t&&l.restore(t);const i=an(0),o=an(""),s=an(!1),a=Zt([i,o,s],([_,E,v])=>({size:l.size(),data:l.toJSON(),error:E,isSaving:v})),r=()=>i.set(Date.now()),u=()=>qt(a).size,f=async()=>{try{s.set(!0),o.set(""),typeof e.save=="function"&&await e.save(l.dump())}catch(_){o.set(`${_}`)}finally{s.set(!1)}},c=(_,E)=>{try{o.set("");const v=l.find(_||l.root.key);if(v)E??(E={...e.defaultNodeValue||Vl}),E.label||(E.label=`block #${u()}`),v.appendChild(E),r(),f();else throw new Error(`Parent node (key "${_}") not found`)}catch(v){o.set(`${v}`)}},k=_=>{try{o.set(""),l.remove(_)&&f()}catch(E){o.set(`${E}`)}},d=_=>{var E;try{o.set("");const v=l.find(_);if(!v)throw new Error(`Source node (key "${_}") not found`);l.copy(v.key,(E=v==null?void 0:v.parent)==null?void 0:E.key)&&f()}catch(v){o.set(`${v}`)}},g=(_,E,v=0)=>{var S,O;try{n("move",_,E,v),o.set(""),_===E?(S=l.find(_))==null||S.moveSiblingIndex(v):(O=l.move(_,E))==null||O.moveSiblingIndex(v),f()}catch(q){o.set(`${q}`)}},h=(_,E)=>{try{if(n("edit",_,E),o.set(""),typeof E=="string")try{E=JSON.parse(E)}catch{throw new TypeError("Invalid JSON data. Cannot edit.")}if(!E)return;const v=l.find(_);if(!v)throw new Error(`Node "${_}" not found!`);v.value=E,f()}catch(v){o.set(`${v}`)}},b=()=>{r(),f()};return{subscribe:a.subscribe,get:a.get,add:c,duplicate:d,move:g,remove:k,edit:h,resetError:()=>o.set(""),save:b,restore:_=>{l.restore(_),b()}}};function Wl(t){let e;return{c(){e=Je("Cancel")},m(n,l){R(n,e,l)},d(n){n&&T(e)}}}function tt(t){let e,n;return e=new Ve({props:{type:"button",variant:"",class:"min-w-24 flex justify-center",$$slots:{default:[Fl]},$$scope:{ctx:t}}}),e.$on("click",t[9]),{c(){J(e.$$.fragment)},m(l,i){W(e,l,i),n=!0},p(l,i){const o={};i&4112&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Fl(t){let e,n;return{c(){e=new Re(!1),n=se(),e.a=n},m(l,i){e.m(t[4],l,i),R(l,n,i)},p(l,i){i&16&&e.p(l[4])},d(l){l&&(T(n),e.d())}}}function Zl(t){let e,n;return{c(){e=new Re(!1),n=se(),e.a=n},m(l,i){e.m(t[3],l,i),R(l,n,i)},p(l,i){i&8&&e.p(l[3])},d(l){l&&(T(n),e.d())}}}function Gl(t){let e,n,l,i,o,s;n=new Ve({props:{variant:"flat",class:"min-w-24 flex justify-center",$$slots:{default:[Wl]},$$scope:{ctx:t}}}),n.$on("click",t[8]);let a=t[2]&&tt(t);return o=new Ve({props:{variant:"primary",class:"min-w-24 flex justify-center",$$slots:{default:[Zl]},$$scope:{ctx:t}}}),o.$on("click",t[10]),{c(){e=j("footer"),J(n.$$.fragment),l=V(),a&&a.c(),i=V(),J(o.$$.fragment),C(e,"class","w-full min-h-14 flex items-center justify-end px-4 sm:px-8 transition-all space-x-4 bg-neutral-200 ")},m(r,u){R(r,e,u),W(n,e,null),K(e,l),a&&a.m(e,null),K(e,i),W(o,e,null),s=!0},p(r,[u]){const f={};u&4096&&(f.$$scope={dirty:u,ctx:r}),n.$set(f),r[2]?a?(a.p(r,u),u&4&&p(a,1)):(a=tt(r),a.c(),p(a,1),a.m(e,i)):a&&($(),y(a,1,1,()=>{a=null}),x());const c={};u&4104&&(c.$$scope={dirty:u,ctx:r}),o.$set(c)},i(r){s||(p(n.$$.fragment,r),p(a),p(o.$$.fragment,r),s=!0)},o(r){y(n.$$.fragment,r),y(a),y(o.$$.fragment,r),s=!1},d(r){r&&T(e),F(n),a&&a.d(),F(o)}}}function Ul(t,e,n){let l;Oe(t,rn,h=>n(7,l=h));const i=je("NonFieldModalFooter");let{onCancel:o}=e,{onOK:s}=e,{onSave:a=null}=e,{okLabel:r="Save &amp; close"}=e,{saveLabel:u="Save"}=e,{allowCtrlSave:f=!0}=e;const c=h=>{if(typeof h=="function")return h();i.warn("Cannot execute. Not a function")};At(()=>{l.includes(a)&&(l.splice(l.indexOf(a),1),ie(rn,l=[...l],l))});const k=()=>c(o),d=()=>c(a),g=()=>c(s);return t.$$set=h=>{"onCancel"in h&&n(0,o=h.onCancel),"onOK"in h&&n(1,s=h.onOK),"onSave"in h&&n(2,a=h.onSave),"okLabel"in h&&n(3,r=h.okLabel),"saveLabel"in h&&n(4,u=h.saveLabel),"allowCtrlSave"in h&&n(6,f=h.allowCtrlSave)},t.$$.update=()=>{t.$$.dirty&196&&f&&typeof a=="function"&&!l.includes(a)&&ie(rn,l=[...l,a],l)},[o,s,a,r,u,c,f,l,k,d,g]}class Xl extends ze{constructor(e){super(),Be(this,e,Ul,Gl,ve,{onCancel:0,onOK:1,onSave:2,okLabel:3,saveLabel:4,allowCtrlSave:6})}}function Yl(t){let e,n;const l=t[1].default,i=rt(l,t,t[0],null);return{c(){e=j("div"),i&&i.c(),C(e,"class","w-full min-h-14 flex items-center justify-center bg-neutral-200 px-4 sm:px-8 transition-all font-semibold ")},m(o,s){R(o,e,s),i&&i.m(e,null),n=!0},p(o,[s]){i&&i.p&&(!n||s&1)&&ut(i,l,o,o[0],n?dt(l,o[0],s,null):ft(o[0]),null)},i(o){n||(p(i,o),n=!0)},o(o){y(i,o),n=!1},d(o){o&&T(e),i&&i.d(o)}}}function Ql(t,e,n){let{$$slots:l={},$$scope:i}=e;return t.$$set=o=>{"$$scope"in o&&n(0,i=o.$$scope)},[i,l]}class $l extends ze{constructor(e){super(),Be(this,e,Ql,Yl,ve,{})}}function xl(t){let e;return{c(){e=Je("Content Builder")},m(n,l){R(n,e,l)},d(n){n&&T(e)}}}function ei(t){var h;let e,n,l,i,o,s,a,r,u,f=((h=t[14])==null?void 0:h.error)&&lt(t),c={store:t[11],disabled:ii,acp:Bn,notifications:t[2],debug:!1,onNodeEditRequest:t[19],class:"p-4"};l=new zl({props:c}),t[20](l);let k=t[14].size>1&&it(t),d=!t[10]&&ot(),g={notifications:t[2],acp:Bn,store:t[11],builder:t[8],class:"p-4",t:t[22],fieldsetBoxClass:"text-sm border-neutral-300",showButtonClose:!1,size:"sm",buttonsVariant:"flat",buttonsClass:"bg-neutral-300 py-1 px-5",typesConfig:t[15](t[13].data)};return r=new Pl({props:g}),t[23](r),{c(){e=j("div"),f&&f.c(),n=V(),J(l.$$.fragment),i=V(),k&&k.c(),o=V(),s=j("div"),d&&d.c(),a=V(),J(r.$$.fragment),C(e,"class","overflow-y-auto"),C(s,"class","bg-neutral-100 overflow-y-auto")},m(b,_){R(b,e,_),f&&f.m(e,null),K(e,n),W(l,e,null),K(e,i),k&&k.m(e,null),R(b,o,_),R(b,s,_),d&&d.m(s,null),K(s,a),W(r,s,null),t[24](s),u=!0},p(b,_){var S;(S=b[14])!=null&&S.error?f?f.p(b,_):(f=lt(b),f.c(),f.m(e,n)):f&&(f.d(1),f=null);const E={};_&2048&&(E.store=b[11]),_&4&&(E.notifications=b[2]),_&1536&&(E.onNodeEditRequest=b[19]),l.$set(E),b[14].size>1?k?(k.p(b,_),_&16384&&p(k,1)):(k=it(b),k.c(),p(k,1),k.m(e,null)):k&&($(),y(k,1,1,()=>{k=null}),x()),b[10]?d&&(d.d(1),d=null):d||(d=ot(),d.c(),d.m(s,a));const v={};_&4&&(v.notifications=b[2]),_&2048&&(v.store=b[11]),_&256&&(v.builder=b[8]),_&256&&(v.t=b[22]),_&8192&&(v.typesConfig=b[15](b[13].data)),r.$set(v)},i(b){u||(p(l.$$.fragment,b),p(k),p(r.$$.fragment,b),u=!0)},o(b){y(l.$$.fragment,b),y(k),y(r.$$.fragment,b),u=!1},d(b){b&&(T(e),T(o),T(s)),f&&f.d(),t[20](null),F(l),k&&k.d(),d&&d.d(),t[23](null),F(r),t[24](null)}}}function ni(t){let e,n;return e=new Ut({}),{c(){J(e.$$.fragment)},m(l,i){W(e,l,i),n=!0},p:Y,i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function lt(t){let e,n=t[14].error+"",l;return{c(){e=j("code"),l=Je(n),C(e,"class","text-red-500 text-sm block")},m(i,o){R(i,e,o),K(e,l)},p(i,o){o&16384&&n!==(n=i[14].error+"")&&Xe(l,n)},d(i){i&&T(e)}}}function it(t){let e,n,l;return n=new Ve({props:{size:"sm",type:"button",variant:"flat",class:"bg-neutral-200",$$slots:{default:[ti]},$$scope:{ctx:t}}}),n.$on("click",t[21]),{c(){e=j("div"),J(n.$$.fragment),C(e,"class","p-4 pt-0")},m(i,o){R(i,e,o),W(n,e,null),l=!0},p(i,o){const s={};o&1073741824&&(s.$$scope={dirty:o,ctx:i}),n.$set(s)},i(i){l||(p(n.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),l=!1},d(i){i&&T(e),F(n)}}}function ti(t){let e,n=mt({size:16})+"",l,i;return{c(){e=new Re(!1),l=V(),i=j("span"),i.textContent="Add new content block",e.a=l,C(i,"class","")},m(o,s){e.m(n,o,s),R(o,l,s),R(o,i,s)},p:Y,d(o){o&&(e.d(),T(l),T(i))}}}function ot(t){let e;return{c(){e=j("div"),e.textContent="Click on the content_block to edit.",C(e,"class","p-4 text-sm opacity-50")},m(n,l){R(n,e,l)},d(n){n&&T(e)}}}function li(t){let e,n,l,i,o,s,a,r,u;n=new $l({props:{$$slots:{default:[xl]},$$scope:{ctx:t}}});const f=[ni,ei],c=[];function k(d,g){return d[13].isFetching?0:1}return o=k(t),s=c[o]=f[o](t),r=new Xl({props:{onCancel:t[3],onOK:t[25],onSave:t[26]}}),{c(){e=j("div"),J(n.$$.fragment),l=V(),i=j("div"),s.c(),a=V(),J(r.$$.fragment),C(i,"class","flex-1 w-full grid grid-cols-1 sm:grid-cols-2 overflow-hidden"),C(e,"class","absolute inset-0 flex flex-col items-center justify-center")},m(d,g){R(d,e,g),W(n,e,null),K(e,l),K(e,i),c[o].m(i,null),K(e,a),W(r,e,null),u=!0},p(d,[g]){const h={};g&1073741824&&(h.$$scope={dirty:g,ctx:d}),n.$set(h);let b=o;o=k(d),o===b?c[o].p(d,g):($(),y(c[b],1,1,()=>{c[b]=null}),x(),s=c[o],s?s.p(d,g):(s=c[o]=f[o](d),s.c()),p(s,1),s.m(i,null));const _={};g&8&&(_.onCancel=d[3]),g&4153&&(_.onOK=d[25]),g&4145&&(_.onSave=d[26]),r.$set(_)},i(d){u||(p(n.$$.fragment,d),p(s),p(r.$$.fragment,d),u=!0)},o(d){y(n.$$.fragment,d),y(s),y(r.$$.fragment,d),u=!1},d(d){d&&T(e),F(n),c[o].d(),F(r)}}}let ii=!1;function oi(t,e,n){let l,i,o,s=Y,a=()=>(s(),s=Ae(E,w=>n(12,o=w)),E),r,u=Y,f=()=>(u(),u=Ae(i,w=>n(13,r=w)),i),c,k=Y,d=()=>(k(),k=Ae(l,w=>n(14,c=w)),l);t.$$.on_destroy.push(()=>s()),t.$$.on_destroy.push(()=>u()),t.$$.on_destroy.push(()=>k()),je("ContentBuilder"),Ue();let{params:g}=e,{name:h}=e,{attrs:b}=e,{model:_}=e,{formData:E}=e;a();let{modalNotifs:v}=e,{modalClose:S}=e,{save:O}=e,q,G;wn(()=>{n(5,G=o[h])});let Q,L,M;const B=w=>`${w}`.startsWith("_")?w:`_${w}`,oe=w=>(w||[]).map(H=>{var ae,ee;return{value:H.value,label:H.label,description:H.description,optgroup:H.optgroup,props:(H.props||[]).map(z=>({name:z.name,type:z.type,inputType:z.inputType,value:z.value,inputProps:z.inputProps||{}})),allowInnerBlocks:{value:!!((ae=H==null?void 0:H.allowInnerBlocks)!=null&&ae.value),hidden:!!((ee=H==null?void 0:H.allowInnerBlocks)!=null&&ee.hidden)}}}),I=async(w,H)=>(n(10,M=w),L==null||L.setKey(w),!0);function D(w){ue[w?"unshift":"push"](()=>{Q=w,n(8,Q)})}const te=()=>l.add(null),A=(...w)=>Q==null?void 0:Q.t.apply(null,w);function fe(w){ue[w?"unshift":"push"](()=>{L=w,n(9,L)})}function pe(w){ue[w?"unshift":"push"](()=>{q=w,n(7,q)})}const be=()=>{ie(E,o[h]=G,o),O({rightClose:!1}),S()},Z=()=>{ie(E,o[h]=G,o),O({rightClose:!1})};return t.$$set=w=>{"params"in w&&n(16,g=w.params),"name"in w&&n(0,h=w.name),"attrs"in w&&n(17,b=w.attrs),"model"in w&&n(18,_=w.model),"formData"in w&&a(n(1,E=w.formData)),"modalNotifs"in w&&n(2,v=w.modalNotifs),"modalClose"in w&&n(3,S=w.modalClose),"save"in w&&n(4,O=w.save)},t.$$.update=()=>{t.$$.dirty&32&&d(n(11,l=Jl(G,{save:async w=>{n(5,G=w)}}))),t.$$.dirty&196608&&f(n(6,i=Gt(b.content_builder_types_config_entity||`_content_builder${B(g==null?void 0:g.entity)}_`,1e3))),t.$$.dirty&64&&wn(()=>i.fetch())},[h,E,v,S,O,G,i,q,Q,L,M,l,o,r,c,oe,g,b,_,I,D,te,A,fe,pe,be,Z]}class di extends ze{constructor(e){super(),Be(this,e,oi,li,ve,{params:16,name:0,attrs:17,model:18,formData:1,modalNotifs:2,modalClose:3,save:4})}}export{di as default};
